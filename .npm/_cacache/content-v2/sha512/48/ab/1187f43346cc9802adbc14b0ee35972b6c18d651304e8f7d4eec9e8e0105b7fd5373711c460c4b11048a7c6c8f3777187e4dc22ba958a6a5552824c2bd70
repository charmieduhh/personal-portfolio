{"_id":"@cloudflare/next-on-pages","_rev":"366-bf8b25c6fb5708ebe105333e52c152f1","name":"@cloudflare/next-on-pages","dist-tags":{"latest":"1.11.2","beta":"0.0.0-1493f82","pre-v1":"0.10.2"},"versions":{"0.1.0":{"name":"@cloudflare/next-on-pages","version":"0.1.0","bin":{"next-on-pages":"bin/index.js"},"scripts":{"build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.3","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","p-limit":"^4.0.0","prettier":"^2.7.1","typescript":"^4.7.4","vitest":"^0.24.3"},"gitHead":"2864175417fa068f908bc9228e15a0f2b1201382","description":"Reference:","_id":"@cloudflare/next-on-pages@0.1.0","_nodeVersion":"18.11.0","_npmVersion":"8.19.2","dist":{"integrity":"sha512-kU4p+FMHCfTHeKK4Z+cagRKaoWLcNM4RpsTgxBqKxKfC3meRZ0d0L9A2MCkuzhx7ev0tPF+ODgFEQnTRN1CgcQ==","shasum":"ab93f17927f19f79fa851db68251e862997b69b3","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.1.0.tgz","fileCount":9,"unpackedSize":237977,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIFWm5r2IC2B+5JWrWUbhF7cRyUJqfWfphNj5l9d1LmBLAiEA9AkLwMdQJvO4SEiqGLy6Zb+pxS/drp6fIkypW5Zwd6Q="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJjVoEgACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmqapBAAjfzeJsmCvyILtzbK6jrzJofzsFvX5Ko0odCSS6sJWNuD8zw5\r\n8TYT3FKhaeYSSC6ttMUuduaA3v3YtBcd1MA6hezq3D05LscTfrHX4YV9LNpy\r\nEPedaxQCQOCEUdATDmIIrFScl+mbgaAia7wkZFYHysHbs44PzfdinjQg6y+e\r\nN5YCgpHYBaAdzHZMtVWTVY/ZC7Dhuz6/XK3b1u1hNSF/BSTwmoSDBIveaar1\r\nm3npIls3NB9bPXph2B5mqx6pgJ3CyIHJTqMEJNFE0qUxrx+wKDVpgzOXbS4w\r\nYnVewqQEEpO4KCACDAG8CB5oYVkznO/5Ojr3jPtlPTXgrtP2kxK/Ep1agE8j\r\ns7H+N48buJdur+ituOgtt1fb8bdvJ0isFjDh/TKpL+fMNbDth9ikpFYScs2k\r\nOdKVhsFV+bnPoL8E/Ud3t1GsL9+oM0w9JTWi85tFxrVTqLILhjKGrNXql1Hp\r\n08dUBzhTxeHpWPj7Kk9ze3Lud1Rq2yllsJzcrIH+x73JsnksYGIY5cdQBQSc\r\nYO3fyuH+zKpk/oKaghgADTxPYm16OeGMZY0GUl8vVQPQyW4Q4LAfeuFEuj0o\r\n48FYwmrwdvuplr1sqq0Ime5wYVn6OtDV4gizyO4jkh7nanPJTrmLt5EYutCL\r\nkODX/OJopUhc7+dR27chyeS3Vtcvte85xvw=\r\n=eSfN\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"gregbrimble","email":"developer@gregbrimble.com"},"directories":{},"maintainers":[{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"janik-cloudflare","email":"janik@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"threepointone","email":"threepointone@gmail.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.1.0_1666613536580_0.8312610339001039"},"_hasShrinkwrap":false},"0.2.0":{"name":"@cloudflare/next-on-pages","version":"0.2.0","bin":{"next-on-pages":"bin/index.js"},"scripts":{"build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.3","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","p-limit":"^4.0.0","prettier":"^2.7.1","typescript":"^4.7.4","vitest":"^0.24.3"},"gitHead":"31deb808d490e76cbdd5f2b6e98a6266c3decf5f","description":"Reference:","_id":"@cloudflare/next-on-pages@0.2.0","_nodeVersion":"18.11.0","_npmVersion":"8.19.2","dist":{"integrity":"sha512-LC2Jyw0zpSW0lFoKFXExECiBmbRMHPNeWg2RhC4eigxcGGpafQFx07hvZhximpwUcg6h4beeKjY1PS6MD5M9qg==","shasum":"2ee6154c891f408e356b7770fa882711b8f6cf18","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.2.0.tgz","fileCount":9,"unpackedSize":240480,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDeYKqvc/FacK1ACrAvwmIJLs0Z7siB2+JQWf60PPa8VgIgRfPnCZqx6zN5GQ0nA9IZpxcdaGkw+7+vxfqfHUIUdWE="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJjdjdNACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmpRjg//QczyoNm0NaVnzfZgvdD/5Q2B0/zwX3ZIAN8zw2iJMC5IzuAf\r\nko/GSaqF9R8J1ZynTGzx8jezz7eHaMbJAdNon2d7nHZjHSsfQ3DwiCc0t07x\r\nHkPzcRw1QbKal7W82Oc0A0vd/zXGnqL1k6UnrDSBD/kWdgz7MfCm1SyPinBe\r\nTMW0pUem5AyhMb3qrXaZQozkzVVivR4NDxejTGy41cP6tTeCtDq7P0MrKsBi\r\nCWcXovz2nl/pv8KtR7sJYuFNMDYvOTQhL3iVPVRTSexYepKlY0oAGgjRXoLd\r\nv/AVbHyhgLBtjt3tGLVXLD30+3zNCvAZtGCLQETevHqUJhV8xI7iFPTvnH3O\r\ncWwADTuN7TKHkPzMvUnJbK1JIp7lS/DindiSWRo0JWGvvri/GyXNsVx8A4TQ\r\n3OxDLD45wv3ywEFSk4AFloEupvZjOrYpXxVtiCcZ5qrnxHw2bjnsu/Ve8fiv\r\npcWU++vXftompPG7457NPW386AJ5jdU2J1xG5q6wlR8chL9lInrsOs2GHS9J\r\nmywQAL0BSwV1i4gtERgjDcMS8K7FixonGQRCqDR5RRDj39HLk2i2nI1xEB6L\r\nuU0bgkG8dQuzp66KSZ7G5E/g49/+21DCDCEAscH+RvBzNYhQ8B32uj5Slge2\r\nvurbtREv8WC899uaHXZJx6nJbV9BFqJP9so=\r\n=dfJE\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"gregbrimble","email":"developer@gregbrimble.com"},"directories":{},"maintainers":[{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"janik-cloudflare","email":"janik@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"threepointone","email":"threepointone@gmail.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.2.0_1668691789390_0.5385054915204068"},"_hasShrinkwrap":false},"0.3.0":{"name":"@cloudflare/next-on-pages","version":"0.3.0","bin":{"next-on-pages":"bin/index.js"},"scripts":{"build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","publish":"npm run build && npx changeset publish"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.3","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","p-limit":"^4.0.0","prettier":"^2.7.1","typescript":"^4.7.4","vitest":"^0.24.3"},"gitHead":"aa5202e6a7d2d6b5d7215f006194225ba6515569","description":"Reference:","_id":"@cloudflare/next-on-pages@0.3.0","_nodeVersion":"16.19.0","_npmVersion":"8.19.3","dist":{"integrity":"sha512-ncrkskryB3qtrMlMjLTKY54e+TE0q2R0YJEZHFUzuNwHeagj6TlT0ByqcWltx4uYplE/HOhDtfbimDG1wGwbiQ==","shasum":"10fc1933ff4b84c4d54ed6902b2cb8e04e86bc30","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.3.0.tgz","fileCount":9,"unpackedSize":240815,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIFq/EWFtZ/XczBU4vxT+lTTZVFvXoPet+hESHJmG6Hi1AiBlHpwxBs6xicOzd4iX3PUvAVEzB5adEbV8Lni1afMWbA=="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJj5OTNACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2Vmr+vA//TAuB3RqsLiFYxWwH5DUE+/T4SXDdflCp7VhzOM6tel4j16lA\r\nWmWOni1dcnpbuCEXFhobj8oyhOFoVYsH9mUUB2flwjckydPPEBVQPwdTjZjS\r\n/WBXS3bt0AFsVHToi+qKbuREeCvCkkDK1QrY5e4g8TSya1QzNj7+sX5XYPy6\r\nx48AT2ExkiwHk/G5hGh+hQjnnM9DBqlXAtctstIg5i7h0WJEVXS2TRT7meNy\r\nupZoY7RB5LR8U+VBW5C8PRvhmpzlFP32VHaAKweye3BeG6fcVaV2JatmM8h9\r\nyVnMi+WTAw0kc9sjWP/JLd5eFceHvf8c9Ye5rJxLzSAQcKMQbLBHqwye5TQy\r\nsZjiRM+iSkEbul7wP6Wt/xVgB7z1aCu6PHHceMM3R8nbry3ZpjgFT3cDL/Q8\r\npmUh0EoptovlGVKGz48nspf3jLpr2SQiqFaDl5uniEMsWgU3Sd5f9z1sKn99\r\nZS7lWk+7gBNJxdbySf2wL3RGgACvVwsBl/E70+zC49BXnl1cVjCmaKwYStB8\r\nbYADPOwX6vcfVhPANJYj9dm87hE2vIER+Obyh51gYXQnraxf0X5x7t7lbG/v\r\nr1X7LWR5JNTDScVLqZcckq7YH5VKTxkZPO2NSvTsGjVaa7fQAJccQYaGjc1W\r\n8yeMMHlDQfvC27uTCVnsTN+a0LIXeejtEG4=\r\n=dHvA\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"gregbrimble","email":"developer@gregbrimble.com"},"directories":{},"maintainers":[{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.3.0_1675945164879_0.049938938335881256"},"_hasShrinkwrap":false},"0.4.0":{"name":"@cloudflare/next-on-pages","version":"0.4.0","bin":{"next-on-pages":"bin/index.js"},"scripts":{"build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","publish":"npm run build && npx changeset publish"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.3","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","p-limit":"^4.0.0","prettier":"^2.7.1","typescript":"^4.7.4","vitest":"^0.24.3"},"gitHead":"8ff78c7019fe3724ebd92886468817bd8555fa42","description":"Reference:","_id":"@cloudflare/next-on-pages@0.4.0","_nodeVersion":"16.19.1","_npmVersion":"8.19.3","dist":{"integrity":"sha512-85/s3oR3mvSfPjkflvfIjA1i19YTd+cud8iJpIpWzpcVHmOeSuWS6rnwJGcTJO6kARuP/SLuDtZ1N3biNK9Imw==","shasum":"842e67b7399e0f814bb0702d3599fb110effe324","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.4.0.tgz","fileCount":9,"unpackedSize":241130,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIAFRsAESvhb8I3XLo8+c8cDqs5dKhzlCmk+czX6xinNpAiEAlUXbRBso7ofPWWiduG39UKqJtD3hQeU3lEQWuo1kr+A="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkENqoACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmpspQ//ZKu65gE760niAviSyauj35yNykKBRNII1YZsKkEgozT8sKpj\r\n/sFTUQg3rR1pGuGDEGD0XS0prRpn+mLmIixCkNV+gbvyv1skVbKgZ6ZfVk/l\r\nHcjjh6ZjvVYATxSbON8RbZn9L4GPtS1LEcZfTGqmELsv7hPg+G59HpAS8mTH\r\nTYFbaJbzuimt0gn9YjnLQLsabVoyZmkY9AMuKb2OfLv+fFvuDNnQM6r3jZh/\r\n8EADcdLU5tT120vsU3MF/Cx61phUW+oeC+RyfvfQEj19s0pCGEP8wVvKHRN9\r\nir0MZAZ3lYS3F5WoU23gkhb6D2kBWIMOzVdL9vQKVET9h9omEFbIkqvSB1Es\r\nQH7kQlmfhTSmBkQqTr3mzVQp8Q3Xa/n09/74syV+UmW4oqsTKqPHtlVFTipb\r\nYzUbIGblSzcpg++A1cSrP3WFqCVnYqNygdcvXk8n9j8Hm9UdDSOmAfRokV+L\r\njuvO3zENC9K+FkfMSfj48viQywJNQm8wL7a6iHoMymTORfXiJMv0SuNLJrhy\r\n4VDSBiasCe98rXy3QHwB2hkcfU0rreOTjvelQTopsgNz7l7pZ85pi77+Z1N5\r\nx5AeHwIBxAX64l7WiqEQKFfvjU9TMTviiY8p4n14hjRpo8YqsPJptk2Lwfkr\r\nPTCqapUvYWMp7CmjL0tCu37vJjf4VEUz6lE=\r\n=+Zaa\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"gregbrimble","email":"developer@gregbrimble.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.4.0_1678826152136_0.7581974083413228"},"_hasShrinkwrap":false},"0.4.1":{"name":"@cloudflare/next-on-pages","version":"0.4.1","bin":{"next-on-pages":"bin/index.js"},"scripts":{"build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","publish":"npm run build && npx changeset publish"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","p-limit":"^4.0.0","prettier":"^2.7.1","typescript":"^4.7.4","vitest":"^0.24.3"},"gitHead":"ba6b36cb528df8de15ed024ac14dd6065c72ad26","description":"Reference:","_id":"@cloudflare/next-on-pages@0.4.1","_nodeVersion":"16.19.1","_npmVersion":"8.19.3","dist":{"integrity":"sha512-VC5ZP9P6kDrwXIocg6SSUbn8yQzZNxG1oUFo9KzoUMP9p3YrQ242+GJlbmYYtN4HKs7SeJBIU7GOFoM18RlYCA==","shasum":"54075e67e4eb09afdcaf52b999835713369afdc6","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.4.1.tgz","fileCount":9,"unpackedSize":242450,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCID6DPhiyZcN3FOzOSkrZT3dCJymvoHOBoCcpCYubYqBvAiEA86+xQhaSLxLmi4+++Tk2RzRiwj/pZwF+MPLDeQE+F4s="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkEjIIACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmrMHQ//QGeDwQlZLxvhMdEIciFgCkItNwdREQBqCVYM4hzAdm4Ad28H\r\noD3/6339PFjrJFdgnbqqV+Vxn4nvWXDETwqFf5Gr5x8I1tC+Ufr1gjMp6ZzV\r\nT8n9Kw+bTCbSJwmLBduBZUkKwzX1X27S6VFb4uWm6agz8SAK2G2U4inhQcky\r\nlRSibMvLDmu1VW9yNPDd8rk6atlLQtjC8FXe+CFKR7385s4NwjrPM+8TU6sE\r\nZZrz7xN8VST90gde9GxiHP0SYtRROl8T/8r9xmZ/+S1/cTGvrNzyELtsHzLA\r\n69mwPizGQcJUNZDql1UyN2Cg4IG5O20e88eoc+JIFGCJfgWk5kt8uBhg/BCm\r\n96KPGsvfmLouM6dFFBFNoTBzmourkWvVL2aodGD4TPlDzMnJIRopWnRTGF8D\r\nJIICMIOZx/e6KBmaNGrc+iH1iwNQCGb7iiffvX630tjalhCBRboS1aODduAT\r\nPN1QblBZmC95UmXSL+oFwy0H8hVHMOzHX8qh05+itQTBgwYv5XAcZNJtckKG\r\nyujaOg1jwELKcfr0drMv3j16pZwWS1bOhOmYN3QL0UGdLf2Q69+6dVmLapIl\r\n2LG9nj8Rwm1cMNOg18V7B55iF5J8yxPH4lMbN/q54lgC9hzoODk05T+CBPNh\r\ndwPN00IOVLBNv4b2ZQcPuqvmox1jzT94W1g=\r\n=gKId\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"gregbrimble","email":"developer@gregbrimble.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.4.1_1678914056583_0.9916946491188887"},"_hasShrinkwrap":false},"0.4.2":{"name":"@cloudflare/next-on-pages","version":"0.4.2","bin":{"next-on-pages":"bin/index.js"},"scripts":{"build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","publish":"npm run build && npx changeset publish"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","p-limit":"^4.0.0","prettier":"^2.7.1","typescript":"^4.7.4","vitest":"^0.24.3"},"gitHead":"2b97f9de925a3e8dc8876bc9e4417715b88ecbd5","description":"Reference:","_id":"@cloudflare/next-on-pages@0.4.2","_nodeVersion":"16.19.1","_npmVersion":"8.19.3","dist":{"integrity":"sha512-VEGHP5sbJ6LKRwWGHwFKXmSab5cH4YzJO6FmIACcbxPa2XGCep4jEcztBFjKMR+FnQ66knfNUYle5IYXejmSQQ==","shasum":"aad8a02dd46ca6453eeb6dee54ecb8c9333f3d60","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.4.2.tgz","fileCount":9,"unpackedSize":244148,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIBzY8bPj5DX5rhceSmUwv+eNi+2WQdx9XsoWfZEUbdlaAiB3TS3hSFdNttdjncJsxvvosHaEA17KDud0VuFnVuS1zA=="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkE5IUACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2Vmo1Vg/+LLgLWYCWF6E2cIrzCftQRN9fM5CQ1HPka/6EQSV13h2GdCsr\r\nPWEOw4dCJNbeHv/Aurj6m3MgxNIY++L0G8EJiKHnBFJfpknXAAuD4O+Zqc49\r\nDnzN9RrNG6JYyrBEs7y0s4XZbInGkxutHNcQKb9g1fFNF2g5r+CT4fJ7WFvz\r\nZQfx2lZqsBVjxQmjbJLU4PclkRJceQIt6c17oqFvjbKcLhUAh6ub5eI7kiPc\r\nt/lUpZS+J56uPvT/KsXGR37n3tNPikrzyPar/GQbCHGMwHYWKLYl80KZ6mWO\r\nY6J4CpL69sK/8wTrK+X9yFMeK/BLkRV0VuGkr2FdMTCgUZjtJBYOoI2TqjuW\r\nm/E5ZiTjkiXTMe/ji9VnjGlyElQxfypzsVdOIjhMSMLaSIZ8g1565wKFLKQo\r\nYfFwO1nL9dT+a9Bd+sSj8dh/5pdBL4MkEBWx/9AxtFidvp76Q0++hoXTDQQY\r\nSUFaZSJqWvzQpPo8kAW2B3olqUHhfk+s6uqhwfOw7omPdPLOELe97meY+DQ9\r\nYyipbYwQlw7ovd5m8jNrBs6rzJ0mcdIVehR8Ueh2wMjkyMyzgMNys3+XYc71\r\nfLsMpHoWbAb+5k8sgwoCshlJCGPtxFHeP/EQISqD0YFQB/W3Gheax7r5EBv8\r\netLueBinuAHGZZK1eu95ts92GDMMHASjY4A=\r\n=etaR\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"gregbrimble","email":"developer@gregbrimble.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.4.2_1679004180273_0.041697004265924154"},"_hasShrinkwrap":false},"0.0.0-f25e836":{"name":"@cloudflare/next-on-pages","version":"0.0.0-f25e836","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","publish":"npm run build && npx changeset publish"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.24.3"},"readme":"# `@cloudflare/next-on-pages`\n\nReference:\n\n- [Blog](https://blog.cloudflare.com/next-on-pages)\n- [Documentation](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n## Quick Start\n\n1. `npx create-next-app@latest my-app`\n\n   Note that if you elect to use eslint, there are a couple of places you need to add return types to make the default template pass the pre-build checks.\n\n1. `cd` into the new directory (e.g. `cd my-app`)\n\n1. `npm install -D @cloudflare/next-on-pages vercel`\n\n1. Configure the project to use the Edge Runtime:\n\n   Replace `pages/api/hello.ts` with the following:\n\n   ```typescript\n   // Next.js Edge API Routes: https://nextjs.org/docs/api-routes/edge-api-routes\n   import type { NextRequest } from 'next/server';\n\n   export const config = {\n   \truntime: 'experimental-edge',\n   };\n\n   export default async function handler(req: NextRequest) {\n   \treturn new Response(JSON.stringify({ name: 'John Doe' }), {\n   \t\tstatus: 200,\n   \t\theaders: {\n   \t\t\t'Content-Type': 'application/json',\n   \t\t},\n   \t});\n   }\n   ```\n\n1. `git commit` and `git push` to a GitHub/GitLab repository.\n\n1. Create a Pages project, connect that repository, and select \"Next.js\" from the framework preset list.\n\n   | Option                 | Value                                                 |\n   | ---------------------- | ----------------------------------------------------- |\n   | Build command          | `npx @cloudflare/next-on-pages --experimental-minify` |\n   | Build output directory | `.vercel/output/static`                               |\n\n1. Add a `NODE_VERSION` environment variable set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1).\n\n1. In the Pages project **Settings** > **Functions** > **Compatibility Flags**, add the `nodejs_compat` and ensure the **Compatibility Date** is set to at least `2022-11-30`.\n\n1. The project should now be ready to deploy. Create a new deployment.\n\n## `@cloudflare/next-on-pages` CLI\n\n```\n⚡️ @cloudflare/next-to-pages CLI\n⚡️\n⚡️ Usage: npx @cloudflare/next-to-pages [options]\n⚡️\n⚡️ Options:\n⚡️\n⚡️   --help:                Shows this help message\n⚡️\n⚡️   --skip-build:          Doesn't run 'vercel build' automatically\n⚡️\n⚡️   --experimental-minify: Attempts to minify the functions of a project (by de-duping webpack chunks)\n⚡️\n⚡️   --watch:               Automatically rebuilds when the project is edited\n⚡️\n⚡️\n⚡️ GitHub: https://github.com/cloudflare/next-on-pages\n⚡️ Docs: https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/\n```\n\n### Local development\n\nIn one terminal, run `npx @cloudflare/next-on-pages --watch`, and in another `npx wrangler pages dev .vercel/output/static`. We hope to soon make improvements to the refresh speed.\n\n### Build Output Configuration\n\n| `config.json` property  | Support                                                                                                                                           |\n| ----------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------- |\n| version                 | `3`                                                                                                                                               |\n| routes `src`            | ✅                                                                                                                                                |\n| routes `dest`           | 🔄                                                                                                                                                |\n| routes `headers`        | 🔄                                                                                                                                                |\n| routes `methods`        | ✅                                                                                                                                                |\n| routes `continue`       | 🔄                                                                                                                                                |\n| routes `caseSensitive`  | ✅                                                                                                                                                |\n| routes `check`          | 🔄                                                                                                                                                |\n| routes `status`         | 🔄                                                                                                                                                |\n| routes `has`            | ✅                                                                                                                                                |\n| routes `missing`        | ✅                                                                                                                                                |\n| routes `locale`         | 🔄                                                                                                                                                |\n| routes `middlewarePath` | ✅                                                                                                                                                |\n| images                  | ❌ (see [Cloudflare's Image Resizing documentation](https://developers.cloudflare.com/images/image-resizing/integration-with-frameworks/#nextjs)) |\n| wildcard                | 🔄                                                                                                                                                |\n| overrides               | 🔄                                                                                                                                                |\n| cache                   | ❌                                                                                                                                                |\n\n- ✅: Supported\n- 🔄: Not currently supported, but it's probably possible and we may add support in the future\n- ❌: Not supported and unlikely we ever will support this\n\n## Examples\n\n### [Next.js 13's `app` Directory](https://beta.nextjs.org/docs/routing/fundamentals#the-app-directory)\n\nAdd the following to `next.config.js`:\n\n```diff\n/** @type {import('next').NextConfig} */\nconst nextConfig = {\n  experimental: {\n    runtime: \"experimental-edge\",\n+   appDir: true,\n  },\n  reactStrictMode: true,\n  swcMinify: true,\n};\n\nmodule.exports = nextConfig;\n```\n\nIf you're following the [Next.js 12 → 13 Upgrade Guide](https://beta.nextjs.org/docs/upgrade-guide#step-4-migrating-pages), delete any `./pages/_app.tsx` and `./pages/index.tsx` files and replace with `./app/layout.tsx` and `./app/page.tsx`:\n\n```typescript\n// ./app/layout.tsx\nimport '../styles/globals.css';\nimport { FC } from 'react';\n\nconst RootLayout: FC<{\n\tchildren: React.ReactNode;\n}> = ({\n\t// Layouts must accept a children prop.\n\t// This will be populated with nested layouts or pages\n\tchildren,\n}) => {\n\treturn (\n\t\t<html lang=\"en\">\n\t\t\t<body>{children}</body>\n\t\t</html>\n\t);\n};\n\nexport default RootLayout;\n```\n\n```typescript\n// ./app/page.tsx\nimport { FC } from 'react';\nimport styles from '../styles/Home.module.css';\n\nconst Home = async (): Promise<ReturnType<FC>> => {\n\tconst uuid = await fetch('https://uuid.rocks/plain').then(\n\t\tasync response => await response.text()\n\t);\n\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<main className={styles.main}>\n\t\t\t\t<h1 className={styles.title}>\n\t\t\t\t\tWelcome to <a href=\"https://nextjs.org\">Next.js!</a>\n\t\t\t\t</h1>\n\n\t\t\t\t<p className={styles.description}>\n\t\t\t\t\tGet started by editing{' '}\n\t\t\t\t\t<code className={styles.code}>pages/index.tsx</code>\n\t\t\t\t</p>\n\n\t\t\t\t<p className={styles.description}>\n\t\t\t\t\tHere&apos;s a server-side UUID:\n\t\t\t\t\t<code className={styles.code}>{uuid}</code>\n\t\t\t\t</p>\n\t\t\t</main>\n\t\t</div>\n\t);\n};\n\nexport default Home;\n```\n\n### [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes)\n\n```typescript\n// ./pages/api/some_route.ts\n\nimport type { NextRequest } from 'next/server';\n\nexport const config = {\n\truntime: 'experimental-edge',\n};\n\nexport default async function handler(req: NextRequest) {\n\treturn new Response(\n\t\tJSON.stringify({\n\t\t\tname: process.env.NEXT_RUNTIME,\n\t\t}),\n\t\t{\n\t\t\tstatus: 200,\n\t\t\theaders: {\n\t\t\t\t'content-type': 'application/json',\n\t\t\t},\n\t\t}\n\t);\n}\n```\n\n### Server-side rendering (SSR) pages with [`getServerSideProps()`](https://nextjs.org/docs/basic-features/data-fetching/get-server-side-props)\n\n```typescript\n// ./pages/ssr.tsx\n\nimport type { NextPage } from 'next';\nimport Head from 'next/head';\nimport styles from '../styles/Home.module.css';\n\nexport const config = {\n\truntime: 'experimental-edge',\n};\n\nexport const getServerSideProps = async () => {\n\treturn {\n\t\tprops: {\n\t\t\truntime: process.env.NEXT_RUNTIME,\n\t\t\tuuid: await fetch('https://uuid.rocks/plain').then(response =>\n\t\t\t\tresponse.text()\n\t\t\t),\n\t\t},\n\t};\n};\n\nconst Home: NextPage<{ runtime: string; uuid: string }> = ({\n\truntime,\n\tuuid,\n}) => {\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<Head>\n\t\t\t\t<title>Create Next App</title>\n\t\t\t\t<meta name=\"description\" content=\"Generated by create next app\" />\n\t\t\t\t<link rel=\"icon\" href=\"/favicon.ico\" />\n\t\t\t</Head>\n\n\t\t\t<main className={styles.main}>\n\t\t\t\t<h1 className={styles.title}>\n\t\t\t\t\tWelcome to{' '}\n\t\t\t\t\t<a href=\"https://nextjs.org\">Next.js, running at the {runtime}!</a>\n\t\t\t\t</h1>\n\n\t\t\t\t<p className={styles.description}>\n\t\t\t\t\tGet started by editing{' '}\n\t\t\t\t\t<code className={styles.code}>pages/index.tsx</code>\n\t\t\t\t</p>\n\n\t\t\t\t<p className={styles.description}>\n\t\t\t\t\tHere&apos;s a server-side UUID:\n\t\t\t\t\t<code className={styles.code}>{uuid}</code>\n\t\t\t\t</p>\n\t\t\t</main>\n\t\t</div>\n\t);\n};\n\nexport default Home;\n```\n\n### [Middleware](https://nextjs.org/docs/advanced-features/middleware)\n\n```typescript\nimport { NextResponse } from 'next/server';\nimport type { NextRequest } from 'next/server';\n\n// This function can be marked `async` if using `await` inside\nexport function middleware(request: NextRequest) {\n\treturn NextResponse.redirect(new URL('/about-2', request.url));\n}\n\nexport const config = {\n\tmatcher: '/about/:path*',\n};\n```\n","readmeFilename":"README.md","gitHead":"f25e836e73508d3b18d3aef035ab9870c628f45e","description":"Reference:","_id":"@cloudflare/next-on-pages@0.0.0-f25e836","_nodeVersion":"16.19.1","_npmVersion":"8.19.3","dist":{"integrity":"sha512-gBdDH3+STRj/IsXA3V89k2NfrNdiIDmRaKj/jojS/pvl/0UtLdLXgFrpKwA4MZgVFKR6/2cdtJN1PyP/p/xG3w==","shasum":"7ec391139f33b62a3d8a79deb09b884733819d06","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-f25e836.tgz","fileCount":9,"unpackedSize":244413,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIAjL2IwoHxvNW6JPGp8ugU6EXD0mJLu4/QkcPvlKfhYtAiBe1eWHgmMBfgZhbO+HJVozym8HF5LXhswwRVpBJBny6Q=="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkGFPcACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmqSUQ/9EF/Gkx7/LKFcONJsIHtWWLNgG/nH3YDR0CtuujfMQwKTpXap\r\nIzJtOTm+HWs7AJ78c84cfO1LKtZPiS+hJv2sBdk9gXHc5PxsApQW70P48fDm\r\n7PooD1dEYy6TmtdZtbuZYyg99N+7OAncnwVApWqZNc1lWiwLM6onbJ8p4UKp\r\n3wLYjfwP3lSjtIt9J+cOTSwa0OuBuGcHuRItDZcQYUSQxqGrleSNYiZiDMQQ\r\nCGYFlhV2ZSR8AP2Hy1A4CokWRkKwetNPcVLsUFsN90IqwKb2n/woT4sCTiLQ\r\nPQi65lou1rX2waSh8qcS1c5t8i3Rl1BlOrXnL9qDtIh3yJSJ27VT6bncbA19\r\na1mCIJG52n7hahFg7QuxE24sUhJtuX7T1VlqS0LB2TMrOCP34f4G6vkJBz60\r\nC3m1NtnuZEZAHeLlkd2Q2KKNFliSEbj4FE2+0bK7yJ/CH0PId0S8IqwO12dB\r\nyrJwcUzZrxG0bnXKvTRea5QUU9DRxT+8/4oF8Hh5am6C4QxYoVNquDhTH9Fg\r\n1UX4zvaJkfenweCjK1Ccb64PrjxsdlXqJPUXEsm6Cx+a3PdXS8rio4af5kNN\r\n2kKngl6lieFcJ2zJVQ3NIo+Gn6u3OU5XsuLYoeyxeeGOqvokPYvpdd6ykfXt\r\nY23SLXqdnhsGdfxh0Fqrt654ZmyN63OluxY=\r\n=2k8k\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"gregbrimble","email":"developer@gregbrimble.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-f25e836_1679315932137_0.8015172797240904"},"_hasShrinkwrap":false},"0.0.0-b1845fd":{"name":"@cloudflare/next-on-pages","version":"0.0.0-b1845fd","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","publish":"npm run build && npx changeset publish"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.24.3"},"readme":"# `@cloudflare/next-on-pages`\n\nReference:\n\n- [Blog](https://blog.cloudflare.com/next-on-pages)\n- [Documentation](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n## Quick Start\n\n1. `npx create-next-app@latest my-app`\n\n   Note that if you elect to use eslint, there are a couple of places you need to add return types to make the default template pass the pre-build checks.\n\n1. `cd` into the new directory (e.g. `cd my-app`)\n\n1. `npm install -D @cloudflare/next-on-pages vercel`\n\n1. Configure the project to use the Edge Runtime:\n\n   Replace `pages/api/hello.ts` with the following:\n\n   ```typescript\n   // Next.js Edge API Routes: https://nextjs.org/docs/api-routes/edge-api-routes\n   import type { NextRequest } from 'next/server';\n\n   export const config = {\n   \truntime: 'experimental-edge',\n   };\n\n   export default async function handler(req: NextRequest) {\n   \treturn new Response(JSON.stringify({ name: 'John Doe' }), {\n   \t\tstatus: 200,\n   \t\theaders: {\n   \t\t\t'Content-Type': 'application/json',\n   \t\t},\n   \t});\n   }\n   ```\n\n1. `git commit` and `git push` to a GitHub/GitLab repository.\n\n1. Create a Pages project, connect that repository, and select \"Next.js\" from the framework preset list.\n\n   | Option                 | Value                                                 |\n   | ---------------------- | ----------------------------------------------------- |\n   | Build command          | `npx @cloudflare/next-on-pages --experimental-minify` |\n   | Build output directory | `.vercel/output/static`                               |\n\n1. Add a `NODE_VERSION` environment variable set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1).\n\n1. In the Pages project **Settings** > **Functions** > **Compatibility Flags**, add the `nodejs_compat` and ensure the **Compatibility Date** is set to at least `2022-11-30`.\n\n1. The project should now be ready to deploy. Create a new deployment.\n\n## `@cloudflare/next-on-pages` CLI\n\n```\n⚡️ @cloudflare/next-to-pages CLI\n⚡️\n⚡️ Usage: npx @cloudflare/next-to-pages [options]\n⚡️\n⚡️ Options:\n⚡️\n⚡️   --help:                Shows this help message\n⚡️\n⚡️   --skip-build:          Doesn't run 'vercel build' automatically\n⚡️\n⚡️   --experimental-minify: Attempts to minify the functions of a project (by de-duping webpack chunks)\n⚡️\n⚡️   --watch:               Automatically rebuilds when the project is edited\n⚡️\n⚡️\n⚡️ GitHub: https://github.com/cloudflare/next-on-pages\n⚡️ Docs: https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/\n```\n\n### Local development\n\nIn one terminal, run `npx @cloudflare/next-on-pages --watch`, and in another `npx wrangler pages dev .vercel/output/static`. We hope to soon make improvements to the refresh speed.\n\n### Build Output Configuration\n\n| `config.json` property  | Support                                                                                                                                           |\n| ----------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------- |\n| version                 | `3`                                                                                                                                               |\n| routes `src`            | ✅                                                                                                                                                |\n| routes `dest`           | 🔄                                                                                                                                                |\n| routes `headers`        | 🔄                                                                                                                                                |\n| routes `methods`        | ✅                                                                                                                                                |\n| routes `continue`       | 🔄                                                                                                                                                |\n| routes `caseSensitive`  | ✅                                                                                                                                                |\n| routes `check`          | 🔄                                                                                                                                                |\n| routes `status`         | 🔄                                                                                                                                                |\n| routes `has`            | ✅                                                                                                                                                |\n| routes `missing`        | ✅                                                                                                                                                |\n| routes `locale`         | 🔄                                                                                                                                                |\n| routes `middlewarePath` | ✅                                                                                                                                                |\n| images                  | ❌ (see [Cloudflare's Image Resizing documentation](https://developers.cloudflare.com/images/image-resizing/integration-with-frameworks/#nextjs)) |\n| wildcard                | 🔄                                                                                                                                                |\n| overrides               | 🔄                                                                                                                                                |\n| cache                   | ❌                                                                                                                                                |\n\n- ✅: Supported\n- 🔄: Not currently supported, but it's probably possible and we may add support in the future\n- ❌: Not supported and unlikely we ever will support this\n\n## Examples\n\n### [Next.js 13's `app` Directory](https://beta.nextjs.org/docs/routing/fundamentals#the-app-directory)\n\nAdd the following to `next.config.js`:\n\n```diff\n/** @type {import('next').NextConfig} */\nconst nextConfig = {\n  experimental: {\n    runtime: \"experimental-edge\",\n+   appDir: true,\n  },\n  reactStrictMode: true,\n  swcMinify: true,\n};\n\nmodule.exports = nextConfig;\n```\n\nIf you're following the [Next.js 12 → 13 Upgrade Guide](https://beta.nextjs.org/docs/upgrade-guide#step-4-migrating-pages), delete any `./pages/_app.tsx` and `./pages/index.tsx` files and replace with `./app/layout.tsx` and `./app/page.tsx`:\n\n```typescript\n// ./app/layout.tsx\nimport '../styles/globals.css';\nimport { FC } from 'react';\n\nconst RootLayout: FC<{\n\tchildren: React.ReactNode;\n}> = ({\n\t// Layouts must accept a children prop.\n\t// This will be populated with nested layouts or pages\n\tchildren,\n}) => {\n\treturn (\n\t\t<html lang=\"en\">\n\t\t\t<body>{children}</body>\n\t\t</html>\n\t);\n};\n\nexport default RootLayout;\n```\n\n```typescript\n// ./app/page.tsx\nimport { FC } from 'react';\nimport styles from '../styles/Home.module.css';\n\nconst Home = async (): Promise<ReturnType<FC>> => {\n\tconst uuid = await fetch('https://uuid.rocks/plain').then(\n\t\tasync response => await response.text()\n\t);\n\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<main className={styles.main}>\n\t\t\t\t<h1 className={styles.title}>\n\t\t\t\t\tWelcome to <a href=\"https://nextjs.org\">Next.js!</a>\n\t\t\t\t</h1>\n\n\t\t\t\t<p className={styles.description}>\n\t\t\t\t\tGet started by editing{' '}\n\t\t\t\t\t<code className={styles.code}>pages/index.tsx</code>\n\t\t\t\t</p>\n\n\t\t\t\t<p className={styles.description}>\n\t\t\t\t\tHere&apos;s a server-side UUID:\n\t\t\t\t\t<code className={styles.code}>{uuid}</code>\n\t\t\t\t</p>\n\t\t\t</main>\n\t\t</div>\n\t);\n};\n\nexport default Home;\n```\n\n### [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes)\n\n```typescript\n// ./pages/api/some_route.ts\n\nimport type { NextRequest } from 'next/server';\n\nexport const config = {\n\truntime: 'experimental-edge',\n};\n\nexport default async function handler(req: NextRequest) {\n\treturn new Response(\n\t\tJSON.stringify({\n\t\t\tname: process.env.NEXT_RUNTIME,\n\t\t}),\n\t\t{\n\t\t\tstatus: 200,\n\t\t\theaders: {\n\t\t\t\t'content-type': 'application/json',\n\t\t\t},\n\t\t}\n\t);\n}\n```\n\n### Server-side rendering (SSR) pages with [`getServerSideProps()`](https://nextjs.org/docs/basic-features/data-fetching/get-server-side-props)\n\n```typescript\n// ./pages/ssr.tsx\n\nimport type { NextPage } from 'next';\nimport Head from 'next/head';\nimport styles from '../styles/Home.module.css';\n\nexport const config = {\n\truntime: 'experimental-edge',\n};\n\nexport const getServerSideProps = async () => {\n\treturn {\n\t\tprops: {\n\t\t\truntime: process.env.NEXT_RUNTIME,\n\t\t\tuuid: await fetch('https://uuid.rocks/plain').then(response =>\n\t\t\t\tresponse.text()\n\t\t\t),\n\t\t},\n\t};\n};\n\nconst Home: NextPage<{ runtime: string; uuid: string }> = ({\n\truntime,\n\tuuid,\n}) => {\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<Head>\n\t\t\t\t<title>Create Next App</title>\n\t\t\t\t<meta name=\"description\" content=\"Generated by create next app\" />\n\t\t\t\t<link rel=\"icon\" href=\"/favicon.ico\" />\n\t\t\t</Head>\n\n\t\t\t<main className={styles.main}>\n\t\t\t\t<h1 className={styles.title}>\n\t\t\t\t\tWelcome to{' '}\n\t\t\t\t\t<a href=\"https://nextjs.org\">Next.js, running at the {runtime}!</a>\n\t\t\t\t</h1>\n\n\t\t\t\t<p className={styles.description}>\n\t\t\t\t\tGet started by editing{' '}\n\t\t\t\t\t<code className={styles.code}>pages/index.tsx</code>\n\t\t\t\t</p>\n\n\t\t\t\t<p className={styles.description}>\n\t\t\t\t\tHere&apos;s a server-side UUID:\n\t\t\t\t\t<code className={styles.code}>{uuid}</code>\n\t\t\t\t</p>\n\t\t\t</main>\n\t\t</div>\n\t);\n};\n\nexport default Home;\n```\n\n### [Middleware](https://nextjs.org/docs/advanced-features/middleware)\n\n```typescript\nimport { NextResponse } from 'next/server';\nimport type { NextRequest } from 'next/server';\n\n// This function can be marked `async` if using `await` inside\nexport function middleware(request: NextRequest) {\n\treturn NextResponse.redirect(new URL('/about-2', request.url));\n}\n\nexport const config = {\n\tmatcher: '/about/:path*',\n};\n```\n","readmeFilename":"README.md","gitHead":"b1845fd50084d9388c67137053e83a817f7c5c50","description":"Reference:","_id":"@cloudflare/next-on-pages@0.0.0-b1845fd","_nodeVersion":"16.19.1","_npmVersion":"8.19.3","dist":{"integrity":"sha512-dh81vG2LjLx5B6FupcQk85XDBINjnyu3tllTNp8Dg0ZyN1xdg+8uoW6BZfNgv/s6eZKreGu3CVu1A7CfFfia5g==","shasum":"8420ceb3bb3c08bea941c7888645874871021f5a","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-b1845fd.tgz","fileCount":9,"unpackedSize":244413,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDEVcOs3Ri5pYf0qEh07XHa4sX94archmsr3buEqTdxGAIgQAVTLYMrpNvIViH/uR4JkK7I6O+eyJ0bNSIqnAQLUYQ="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkGFW1ACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2Vmq8LhAAoDZVBJPIujcXIBbvDJzGP8gWuyEx53ds+9CEvLuHtUAPPia0\r\nIpxbX7hWXJq1uw8eu03dVseeS3zDpWd4phUCLdqtgg753RAy0deTWnvD3f5U\r\ntnSoQMolIOjLmJe2mnyyP1neUOsDg+b4Ud4cEzaRJn3n4AMGirxezUm18DW9\r\n6lKPyEOJpSB30fKhQcxHzbtbbZ7tD5ve/uhmg7M6/RTSj1IpHKFG2FC8ncAh\r\nliGYiQHR2/qlHB3FZZdG/FdFDzUpBfDVcPiUpnRh4lCiBebrDr5cRA3VKst4\r\nuCt1qy0PpoUCx6SiTOZRSw2JLY6LL1kiVer3i2CW72Vgrkt1JhTeLBzfrAgD\r\nt3wmRPM/q15Nc3I/1yNPaxdSH/Xd8KYMRmOFkK8z7O+flqSQV+YxPd523+Fc\r\nBZgxGDkzkUFe8i3eO+jfBopHjxrhRxSuX1pgLX3MBc6tskFUsPWbe+hsZkcJ\r\nhumm8MwhJg+EZj/WOnRmk+4p4UKGDvqRTi79set4r4tg05KmAJzLe3A0rS07\r\nWJvieFMb9zX6eX0dIVFrVImLSDqVD9nh8UvcKRncgNwVRQq1KrXxq+Lm0OPa\r\niRE4YhzbFLfLVInyyjm9ipfgByPCb4PszCUwTfPASa86btzPt1sgMFRHL4yF\r\nDgqgirZp98uQ/VQJiB8d0SWJ+j9YznHSQCU=\r\n=VRh4\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"gregbrimble","email":"developer@gregbrimble.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-b1845fd_1679316405024_0.07524071317232339"},"_hasShrinkwrap":false},"0.0.0-4d3f879":{"name":"@cloudflare/next-on-pages","version":"0.0.0-4d3f879","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","publish":"npm run build && npx changeset publish"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.24.3"},"readme":"# `@cloudflare/next-on-pages`\n\nReference:\n\n- [Blog](https://blog.cloudflare.com/next-on-pages)\n- [Documentation](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n## Quick Start\n\n1. `npx create-next-app@latest my-app`\n\n   Note that if you elect to use eslint, there are a couple of places you need to add return types to make the default template pass the pre-build checks.\n\n1. `cd` into the new directory (e.g. `cd my-app`)\n\n1. `npm install -D @cloudflare/next-on-pages vercel`\n\n1. Configure the project to use the Edge Runtime:\n\n   Replace `pages/api/hello.ts` with the following:\n\n   ```typescript\n   // Next.js Edge API Routes: https://nextjs.org/docs/api-routes/edge-api-routes\n   import type { NextRequest } from 'next/server';\n\n   export const config = {\n   \truntime: 'experimental-edge',\n   };\n\n   export default async function handler(req: NextRequest) {\n   \treturn new Response(JSON.stringify({ name: 'John Doe' }), {\n   \t\tstatus: 200,\n   \t\theaders: {\n   \t\t\t'Content-Type': 'application/json',\n   \t\t},\n   \t});\n   }\n   ```\n\n1. `git commit` and `git push` to a GitHub/GitLab repository.\n\n1. Create a Pages project, connect that repository, and select \"Next.js\" from the framework preset list.\n\n   | Option                 | Value                                                 |\n   | ---------------------- | ----------------------------------------------------- |\n   | Build command          | `npx @cloudflare/next-on-pages --experimental-minify` |\n   | Build output directory | `.vercel/output/static`                               |\n\n1. Add a `NODE_VERSION` environment variable set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1).\n\n1. In the Pages project **Settings** > **Functions** > **Compatibility Flags**, add the `nodejs_compat` and ensure the **Compatibility Date** is set to at least `2022-11-30`.\n\n1. The project should now be ready to deploy. Create a new deployment.\n\n## `@cloudflare/next-on-pages` CLI\n\n```\n⚡️ @cloudflare/next-to-pages CLI\n⚡️\n⚡️ Usage: npx @cloudflare/next-to-pages [options]\n⚡️\n⚡️ Options:\n⚡️\n⚡️   --help:                Shows this help message\n⚡️\n⚡️   --skip-build:          Doesn't run 'vercel build' automatically\n⚡️\n⚡️   --experimental-minify: Attempts to minify the functions of a project (by de-duping webpack chunks)\n⚡️\n⚡️   --watch:               Automatically rebuilds when the project is edited\n⚡️\n⚡️\n⚡️ GitHub: https://github.com/cloudflare/next-on-pages\n⚡️ Docs: https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/\n```\n\n### Local development\n\nIn one terminal, run `npx @cloudflare/next-on-pages --watch`, and in another `npx wrangler pages dev .vercel/output/static`. We hope to soon make improvements to the refresh speed.\n\n### Build Output Configuration\n\n| `config.json` property  | Support                                                                                                                                           |\n| ----------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------- |\n| version                 | `3`                                                                                                                                               |\n| routes `src`            | ✅                                                                                                                                                |\n| routes `dest`           | 🔄                                                                                                                                                |\n| routes `headers`        | 🔄                                                                                                                                                |\n| routes `methods`        | ✅                                                                                                                                                |\n| routes `continue`       | 🔄                                                                                                                                                |\n| routes `caseSensitive`  | ✅                                                                                                                                                |\n| routes `check`          | 🔄                                                                                                                                                |\n| routes `status`         | 🔄                                                                                                                                                |\n| routes `has`            | ✅                                                                                                                                                |\n| routes `missing`        | ✅                                                                                                                                                |\n| routes `locale`         | 🔄                                                                                                                                                |\n| routes `middlewarePath` | ✅                                                                                                                                                |\n| images                  | ❌ (see [Cloudflare's Image Resizing documentation](https://developers.cloudflare.com/images/image-resizing/integration-with-frameworks/#nextjs)) |\n| wildcard                | 🔄                                                                                                                                                |\n| overrides               | 🔄                                                                                                                                                |\n| cache                   | ❌                                                                                                                                                |\n\n- ✅: Supported\n- 🔄: Not currently supported, but it's probably possible and we may add support in the future\n- ❌: Not supported and unlikely we ever will support this\n\n## Examples\n\n### [Next.js 13's `app` Directory](https://beta.nextjs.org/docs/routing/fundamentals#the-app-directory)\n\nAdd the following to `next.config.js`:\n\n```diff\n/** @type {import('next').NextConfig} */\nconst nextConfig = {\n  experimental: {\n    runtime: \"experimental-edge\",\n+   appDir: true,\n  },\n  reactStrictMode: true,\n  swcMinify: true,\n};\n\nmodule.exports = nextConfig;\n```\n\nIf you're following the [Next.js 12 → 13 Upgrade Guide](https://beta.nextjs.org/docs/upgrade-guide#step-4-migrating-pages), delete any `./pages/_app.tsx` and `./pages/index.tsx` files and replace with `./app/layout.tsx` and `./app/page.tsx`:\n\n```typescript\n// ./app/layout.tsx\nimport '../styles/globals.css';\nimport { FC } from 'react';\n\nconst RootLayout: FC<{\n\tchildren: React.ReactNode;\n}> = ({\n\t// Layouts must accept a children prop.\n\t// This will be populated with nested layouts or pages\n\tchildren,\n}) => {\n\treturn (\n\t\t<html lang=\"en\">\n\t\t\t<body>{children}</body>\n\t\t</html>\n\t);\n};\n\nexport default RootLayout;\n```\n\n```typescript\n// ./app/page.tsx\nimport { FC } from 'react';\nimport styles from '../styles/Home.module.css';\n\nconst Home = async (): Promise<ReturnType<FC>> => {\n\tconst uuid = await fetch('https://uuid.rocks/plain').then(\n\t\tasync response => await response.text()\n\t);\n\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<main className={styles.main}>\n\t\t\t\t<h1 className={styles.title}>\n\t\t\t\t\tWelcome to <a href=\"https://nextjs.org\">Next.js!</a>\n\t\t\t\t</h1>\n\n\t\t\t\t<p className={styles.description}>\n\t\t\t\t\tGet started by editing{' '}\n\t\t\t\t\t<code className={styles.code}>pages/index.tsx</code>\n\t\t\t\t</p>\n\n\t\t\t\t<p className={styles.description}>\n\t\t\t\t\tHere&apos;s a server-side UUID:\n\t\t\t\t\t<code className={styles.code}>{uuid}</code>\n\t\t\t\t</p>\n\t\t\t</main>\n\t\t</div>\n\t);\n};\n\nexport default Home;\n```\n\n### [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes)\n\n```typescript\n// ./pages/api/some_route.ts\n\nimport type { NextRequest } from 'next/server';\n\nexport const config = {\n\truntime: 'experimental-edge',\n};\n\nexport default async function handler(req: NextRequest) {\n\treturn new Response(\n\t\tJSON.stringify({\n\t\t\tname: process.env.NEXT_RUNTIME,\n\t\t}),\n\t\t{\n\t\t\tstatus: 200,\n\t\t\theaders: {\n\t\t\t\t'content-type': 'application/json',\n\t\t\t},\n\t\t}\n\t);\n}\n```\n\n### Server-side rendering (SSR) pages with [`getServerSideProps()`](https://nextjs.org/docs/basic-features/data-fetching/get-server-side-props)\n\n```typescript\n// ./pages/ssr.tsx\n\nimport type { NextPage } from 'next';\nimport Head from 'next/head';\nimport styles from '../styles/Home.module.css';\n\nexport const config = {\n\truntime: 'experimental-edge',\n};\n\nexport const getServerSideProps = async () => {\n\treturn {\n\t\tprops: {\n\t\t\truntime: process.env.NEXT_RUNTIME,\n\t\t\tuuid: await fetch('https://uuid.rocks/plain').then(response =>\n\t\t\t\tresponse.text()\n\t\t\t),\n\t\t},\n\t};\n};\n\nconst Home: NextPage<{ runtime: string; uuid: string }> = ({\n\truntime,\n\tuuid,\n}) => {\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<Head>\n\t\t\t\t<title>Create Next App</title>\n\t\t\t\t<meta name=\"description\" content=\"Generated by create next app\" />\n\t\t\t\t<link rel=\"icon\" href=\"/favicon.ico\" />\n\t\t\t</Head>\n\n\t\t\t<main className={styles.main}>\n\t\t\t\t<h1 className={styles.title}>\n\t\t\t\t\tWelcome to{' '}\n\t\t\t\t\t<a href=\"https://nextjs.org\">Next.js, running at the {runtime}!</a>\n\t\t\t\t</h1>\n\n\t\t\t\t<p className={styles.description}>\n\t\t\t\t\tGet started by editing{' '}\n\t\t\t\t\t<code className={styles.code}>pages/index.tsx</code>\n\t\t\t\t</p>\n\n\t\t\t\t<p className={styles.description}>\n\t\t\t\t\tHere&apos;s a server-side UUID:\n\t\t\t\t\t<code className={styles.code}>{uuid}</code>\n\t\t\t\t</p>\n\t\t\t</main>\n\t\t</div>\n\t);\n};\n\nexport default Home;\n```\n\n### [Middleware](https://nextjs.org/docs/advanced-features/middleware)\n\n```typescript\nimport { NextResponse } from 'next/server';\nimport type { NextRequest } from 'next/server';\n\n// This function can be marked `async` if using `await` inside\nexport function middleware(request: NextRequest) {\n\treturn NextResponse.redirect(new URL('/about-2', request.url));\n}\n\nexport const config = {\n\tmatcher: '/about/:path*',\n};\n```\n","readmeFilename":"README.md","gitHead":"4d3f8790da9aafea4170f661e149ecc69377e3cf","description":"Reference:","_id":"@cloudflare/next-on-pages@0.0.0-4d3f879","_nodeVersion":"16.19.1","_npmVersion":"8.19.3","dist":{"integrity":"sha512-U/X2wyciMsGJPP3H6ucsMHUp4Ilx/uca1Jzw0O8N7oO2Mz3THbdljysBrcKt1GR4iLqvFXHvsDjxDG9zo8Y3rg==","shasum":"889c9b262ec4db290d08d360a79dfe847aed1126","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-4d3f879.tgz","fileCount":9,"unpackedSize":244413,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIHeDhCWbHbY8I9NvA72th1wXysMiokkxwszj7ZLH91d5AiEAo5KUHPl38wlATgZRICA6/Nq0pWIJYyJfkCgKSn15eJ8="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkGFlIACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmqfIw/9HuTTsnEQ7OU4/B9WE82O5V4Kk95UY7oK5rMG0vzcpfskA+Kq\r\nWs1eRdkpgDvRk/Y82eg6XJpjHf04mzTHpefDswWVcSHFV4BzfzCNe+T+nHNN\r\nOtg5mJUOwzWWGWOYfSWwEA45eJTlSiEGqG7QdqA02wg64LIT5uX8nOjrN6Rd\r\nqu1bY/6i901QJh2iM4HNnQNujvtMfPRDIXPbgFUlu0/xy0893FqLCAS3vMFF\r\nssUNX3USO2yBKDf/gECvKEVkS+ry0rJZ63wI2XUiZratN7drPNBdX6gx2A8W\r\n/Un9neTUi5sFWCsJTZqL5Lj2te3Bx3gaGPLAcYafjmr44M+GX5gP+nCOgB3t\r\nOAIk7cBBc+HKLlG67q2IG/yDcCIM880/WSUmEUMCHRi+lzo2OyEtMNoNYzLs\r\nNR9hnlz1kV9J3AAvg750qeemusTXjAtds1iIPqoqECvpaB0mTu6yFkOrQIQJ\r\ncif+ltaNP/ng+GHl+oSQV2Rcjcj4JkRlGJX9aoqy+xFlFpFvI2zEAFoL4Ky1\r\naX/spiANIRKgc7asTbfjdpOOBBEFGyclqRHDc5TQ2DQsTrFFBFgEwSTYaWKS\r\nRjxK417Yun1OIMrP3SbD+UmmI6gWK9Rp6f3w9NVxDhaM5KDkL6aqw0qAacF7\r\n1tlGROd369iTr9j3/N12autAY+PwbWYN68o=\r\n=8hBJ\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"gregbrimble","email":"developer@gregbrimble.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-4d3f879_1679317319939_0.1376512148511686"},"_hasShrinkwrap":false},"0.0.0-4296d3e":{"name":"@cloudflare/next-on-pages","version":"0.0.0-4296d3e","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","prepare":"npm run build","publish":"npm run build && npx changeset publish"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.24.3"},"readme":"# `@cloudflare/next-on-pages`\n\nReference:\n\n- [Blog](https://blog.cloudflare.com/next-on-pages)\n- [Documentation](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n## Quick Start\n\n1. `npx create-next-app@latest my-app`\n\n   Note that if you elect to use eslint, there are a couple of places you need to add return types to make the default template pass the pre-build checks.\n\n1. `cd` into the new directory (e.g. `cd my-app`)\n\n1. `npm install -D @cloudflare/next-on-pages vercel`\n\n1. Configure the project to use the Edge Runtime:\n\n   Replace `pages/api/hello.ts` with the following:\n\n   ```typescript\n   // Next.js Edge API Routes: https://nextjs.org/docs/api-routes/edge-api-routes\n   import type { NextRequest } from 'next/server';\n\n   export const config = {\n   \truntime: 'experimental-edge',\n   };\n\n   export default async function handler(req: NextRequest) {\n   \treturn new Response(JSON.stringify({ name: 'John Doe' }), {\n   \t\tstatus: 200,\n   \t\theaders: {\n   \t\t\t'Content-Type': 'application/json',\n   \t\t},\n   \t});\n   }\n   ```\n\n1. `git commit` and `git push` to a GitHub/GitLab repository.\n\n1. Create a Pages project, connect that repository, and select \"Next.js\" from the framework preset list.\n\n   | Option                 | Value                                                 |\n   | ---------------------- | ----------------------------------------------------- |\n   | Build command          | `npx @cloudflare/next-on-pages --experimental-minify` |\n   | Build output directory | `.vercel/output/static`                               |\n\n1. Add a `NODE_VERSION` environment variable set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1).\n\n1. In the Pages project **Settings** > **Functions** > **Compatibility Flags**, add the `nodejs_compat` and ensure the **Compatibility Date** is set to at least `2022-11-30`.\n\n1. The project should now be ready to deploy. Create a new deployment.\n\n## `@cloudflare/next-on-pages` CLI\n\n```\n⚡️ @cloudflare/next-to-pages CLI\n⚡️\n⚡️ Usage: npx @cloudflare/next-to-pages [options]\n⚡️\n⚡️ Options:\n⚡️\n⚡️   --help:                Shows this help message\n⚡️\n⚡️   --skip-build:          Doesn't run 'vercel build' automatically\n⚡️\n⚡️   --experimental-minify: Attempts to minify the functions of a project (by de-duping webpack chunks)\n⚡️\n⚡️   --watch:               Automatically rebuilds when the project is edited\n⚡️\n⚡️\n⚡️ GitHub: https://github.com/cloudflare/next-on-pages\n⚡️ Docs: https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/\n```\n\n### Local development\n\nIn one terminal, run `npx @cloudflare/next-on-pages --watch`, and in another `npx wrangler pages dev .vercel/output/static`. We hope to soon make improvements to the refresh speed.\n\n### Build Output Configuration\n\n| `config.json` property  | Support                                                                                                                                           |\n| ----------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------- |\n| version                 | `3`                                                                                                                                               |\n| routes `src`            | ✅                                                                                                                                                |\n| routes `dest`           | 🔄                                                                                                                                                |\n| routes `headers`        | 🔄                                                                                                                                                |\n| routes `methods`        | ✅                                                                                                                                                |\n| routes `continue`       | 🔄                                                                                                                                                |\n| routes `caseSensitive`  | ✅                                                                                                                                                |\n| routes `check`          | 🔄                                                                                                                                                |\n| routes `status`         | 🔄                                                                                                                                                |\n| routes `has`            | ✅                                                                                                                                                |\n| routes `missing`        | ✅                                                                                                                                                |\n| routes `locale`         | 🔄                                                                                                                                                |\n| routes `middlewarePath` | ✅                                                                                                                                                |\n| images                  | ❌ (see [Cloudflare's Image Resizing documentation](https://developers.cloudflare.com/images/image-resizing/integration-with-frameworks/#nextjs)) |\n| wildcard                | 🔄                                                                                                                                                |\n| overrides               | 🔄                                                                                                                                                |\n| cache                   | ❌                                                                                                                                                |\n\n- ✅: Supported\n- 🔄: Not currently supported, but it's probably possible and we may add support in the future\n- ❌: Not supported and unlikely we ever will support this\n\n## Examples\n\n### [Next.js 13's `app` Directory](https://beta.nextjs.org/docs/routing/fundamentals#the-app-directory)\n\nAdd the following to `next.config.js`:\n\n```diff\n/** @type {import('next').NextConfig} */\nconst nextConfig = {\n  experimental: {\n    runtime: \"experimental-edge\",\n+   appDir: true,\n  },\n  reactStrictMode: true,\n  swcMinify: true,\n};\n\nmodule.exports = nextConfig;\n```\n\nIf you're following the [Next.js 12 → 13 Upgrade Guide](https://beta.nextjs.org/docs/upgrade-guide#step-4-migrating-pages), delete any `./pages/_app.tsx` and `./pages/index.tsx` files and replace with `./app/layout.tsx` and `./app/page.tsx`:\n\n```typescript\n// ./app/layout.tsx\nimport '../styles/globals.css';\nimport { FC } from 'react';\n\nconst RootLayout: FC<{\n\tchildren: React.ReactNode;\n}> = ({\n\t// Layouts must accept a children prop.\n\t// This will be populated with nested layouts or pages\n\tchildren,\n}) => {\n\treturn (\n\t\t<html lang=\"en\">\n\t\t\t<body>{children}</body>\n\t\t</html>\n\t);\n};\n\nexport default RootLayout;\n```\n\n```typescript\n// ./app/page.tsx\nimport { FC } from 'react';\nimport styles from '../styles/Home.module.css';\n\nconst Home = async (): Promise<ReturnType<FC>> => {\n\tconst uuid = await fetch('https://uuid.rocks/plain').then(\n\t\tasync response => await response.text()\n\t);\n\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<main className={styles.main}>\n\t\t\t\t<h1 className={styles.title}>\n\t\t\t\t\tWelcome to <a href=\"https://nextjs.org\">Next.js!</a>\n\t\t\t\t</h1>\n\n\t\t\t\t<p className={styles.description}>\n\t\t\t\t\tGet started by editing{' '}\n\t\t\t\t\t<code className={styles.code}>pages/index.tsx</code>\n\t\t\t\t</p>\n\n\t\t\t\t<p className={styles.description}>\n\t\t\t\t\tHere&apos;s a server-side UUID:\n\t\t\t\t\t<code className={styles.code}>{uuid}</code>\n\t\t\t\t</p>\n\t\t\t</main>\n\t\t</div>\n\t);\n};\n\nexport default Home;\n```\n\n### [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes)\n\n```typescript\n// ./pages/api/some_route.ts\n\nimport type { NextRequest } from 'next/server';\n\nexport const config = {\n\truntime: 'experimental-edge',\n};\n\nexport default async function handler(req: NextRequest) {\n\treturn new Response(\n\t\tJSON.stringify({\n\t\t\tname: process.env.NEXT_RUNTIME,\n\t\t}),\n\t\t{\n\t\t\tstatus: 200,\n\t\t\theaders: {\n\t\t\t\t'content-type': 'application/json',\n\t\t\t},\n\t\t}\n\t);\n}\n```\n\n### Server-side rendering (SSR) pages with [`getServerSideProps()`](https://nextjs.org/docs/basic-features/data-fetching/get-server-side-props)\n\n```typescript\n// ./pages/ssr.tsx\n\nimport type { NextPage } from 'next';\nimport Head from 'next/head';\nimport styles from '../styles/Home.module.css';\n\nexport const config = {\n\truntime: 'experimental-edge',\n};\n\nexport const getServerSideProps = async () => {\n\treturn {\n\t\tprops: {\n\t\t\truntime: process.env.NEXT_RUNTIME,\n\t\t\tuuid: await fetch('https://uuid.rocks/plain').then(response =>\n\t\t\t\tresponse.text()\n\t\t\t),\n\t\t},\n\t};\n};\n\nconst Home: NextPage<{ runtime: string; uuid: string }> = ({\n\truntime,\n\tuuid,\n}) => {\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<Head>\n\t\t\t\t<title>Create Next App</title>\n\t\t\t\t<meta name=\"description\" content=\"Generated by create next app\" />\n\t\t\t\t<link rel=\"icon\" href=\"/favicon.ico\" />\n\t\t\t</Head>\n\n\t\t\t<main className={styles.main}>\n\t\t\t\t<h1 className={styles.title}>\n\t\t\t\t\tWelcome to{' '}\n\t\t\t\t\t<a href=\"https://nextjs.org\">Next.js, running at the {runtime}!</a>\n\t\t\t\t</h1>\n\n\t\t\t\t<p className={styles.description}>\n\t\t\t\t\tGet started by editing{' '}\n\t\t\t\t\t<code className={styles.code}>pages/index.tsx</code>\n\t\t\t\t</p>\n\n\t\t\t\t<p className={styles.description}>\n\t\t\t\t\tHere&apos;s a server-side UUID:\n\t\t\t\t\t<code className={styles.code}>{uuid}</code>\n\t\t\t\t</p>\n\t\t\t</main>\n\t\t</div>\n\t);\n};\n\nexport default Home;\n```\n\n### [Middleware](https://nextjs.org/docs/advanced-features/middleware)\n\n```typescript\nimport { NextResponse } from 'next/server';\nimport type { NextRequest } from 'next/server';\n\n// This function can be marked `async` if using `await` inside\nexport function middleware(request: NextRequest) {\n\treturn NextResponse.redirect(new URL('/about-2', request.url));\n}\n\nexport const config = {\n\tmatcher: '/about/:path*',\n};\n```\n","readmeFilename":"README.md","gitHead":"4296d3e905684ddfab3ba77d7eef57dd944fde2c","description":"Reference:","_id":"@cloudflare/next-on-pages@0.0.0-4296d3e","_nodeVersion":"16.19.1","_npmVersion":"8.19.3","dist":{"integrity":"sha512-meDBsK8gjDyIK8L2OtFz4KkCrVlxucoiIOXoG8NQIeqgm6iu1vQz3jOU3rVrepCe1moT33h9YkcjnIJAvDe96A==","shasum":"639686020047378c2fc124a65faaa4e7ad3847dc","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-4296d3e.tgz","fileCount":9,"unpackedSize":244443,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIDkLXEc1tfOqihe9yBSYBV4n9hKttvdgyRKNYHBP/wujAiEAyC/3lfl2BE0yVVg0LX2m6RKDNNgS7alX6NepzPlElF4="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkGKU8ACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2Vmr6Cg//V1ZTKKC2HoOm6LzwUUxpCRDb15os4EUOyVpNYRrON+xPGrEH\r\nvYDyrBH/CMAZSsprF+5VfR48ir+43/QqMSIdJ3H308BH4lKgwepOicC2V+pI\r\now8u1vE30ilVXDfUYhBUZYT8DsPFEcSRKEnbUl37TmnZU9RsPzj9QhO33yJq\r\nvOCMQjpHvjc3/bgoYVzgeEMu1YM0ChMC6aSrAoOI5pj42gc9zEPr1uJpK/Gs\r\nN0rkZ1JtZrLxZ7ipvMo7i7WXM6UYFXRjDQ1XslEVSSsbPWx+hHzq+3eO9HMM\r\n3vlcbC+6fqjB6mAGp/10k1q1mlmjVAjTuPwednj370rQp+IckCrFS6+DdYa1\r\nYjPCz4VoabhA1M605GQNXbLJ3OLFFkuGNaD22XIqBo6li2eEkEK8qKoI+Xcx\r\nON61ODidHDret9xXvTkhm7roQpxw7xL81chRSznMsV3EyOGiIStPazoMHYUR\r\nmzz5GBHjFlqNYA/3MeF8Qc6rX5eCxNBviAS/whXGzEzCgZg9bnLoHfF6l1+J\r\nnphlkLUWjEUAQ8v92TH9AyWvvIRHEumo6OamqeUBZ/j0FkW20aTN1AF7FiXM\r\nZiz6AsnD+IMr8d+De3mcERd4V5+CsNnsiPsJ7orT1RbNsiA2qdWjVcM537UC\r\nCd/BYGLDnji/g1JF8lIXBwzj4b9+3l50MYI=\r\n=qVwf\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"gregbrimble","email":"developer@gregbrimble.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-4296d3e_1679336764367_0.5738001261245318"},"_hasShrinkwrap":false},"0.0.0-cc91567":{"name":"@cloudflare/next-on-pages","version":"0.0.0-cc91567","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","prepare":"npm run build","publish":"npm run build && npx changeset publish"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.24.3"},"readme":"# `@cloudflare/next-on-pages`\n\nReference:\n\n- [Blog](https://blog.cloudflare.com/next-on-pages)\n- [Documentation](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n## Quick Start\n\n1. `npx create-next-app@latest my-app`\n\n   Note that if you elect to use eslint, there are a couple of places you need to add return types to make the default template pass the pre-build checks.\n\n1. `cd` into the new directory (e.g. `cd my-app`)\n\n1. `npm install -D @cloudflare/next-on-pages vercel`\n\n1. Configure the project to use the Edge Runtime:\n\n   Replace `pages/api/hello.ts` with the following:\n\n   ```typescript\n   // Next.js Edge API Routes: https://nextjs.org/docs/api-routes/edge-api-routes\n   import type { NextRequest } from 'next/server';\n\n   export const config = {\n   \truntime: 'experimental-edge',\n   };\n\n   export default async function handler(req: NextRequest) {\n   \treturn new Response(JSON.stringify({ name: 'John Doe' }), {\n   \t\tstatus: 200,\n   \t\theaders: {\n   \t\t\t'Content-Type': 'application/json',\n   \t\t},\n   \t});\n   }\n   ```\n\n1. `git commit` and `git push` to a GitHub/GitLab repository.\n\n1. Create a Pages project, connect that repository, and select \"Next.js\" from the framework preset list.\n\n   | Option                 | Value                                                 |\n   | ---------------------- | ----------------------------------------------------- |\n   | Build command          | `npx @cloudflare/next-on-pages --experimental-minify` |\n   | Build output directory | `.vercel/output/static`                               |\n\n1. Add a `NODE_VERSION` environment variable set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1).\n\n1. In the Pages project **Settings** > **Functions** > **Compatibility Flags**, add the `nodejs_compat` and ensure the **Compatibility Date** is set to at least `2022-11-30`.\n\n1. The project should now be ready to deploy. Create a new deployment.\n\n## `@cloudflare/next-on-pages` CLI\n\n```\n⚡️ @cloudflare/next-to-pages CLI\n⚡️\n⚡️ Usage: npx @cloudflare/next-to-pages [options]\n⚡️\n⚡️ Options:\n⚡️\n⚡️   --help:                Shows this help message\n⚡️\n⚡️   --skip-build:          Doesn't run 'vercel build' automatically\n⚡️\n⚡️   --experimental-minify: Attempts to minify the functions of a project (by de-duping webpack chunks)\n⚡️\n⚡️   --watch:               Automatically rebuilds when the project is edited\n⚡️\n⚡️\n⚡️ GitHub: https://github.com/cloudflare/next-on-pages\n⚡️ Docs: https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/\n```\n\n### Local development\n\nIn one terminal, run `npx @cloudflare/next-on-pages --watch`, and in another `npx wrangler pages dev .vercel/output/static`. We hope to soon make improvements to the refresh speed.\n\n### Build Output Configuration\n\n| `config.json` property  | Support                                                                                                                                           |\n| ----------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------- |\n| version                 | `3`                                                                                                                                               |\n| routes `src`            | ✅                                                                                                                                                |\n| routes `dest`           | 🔄                                                                                                                                                |\n| routes `headers`        | 🔄                                                                                                                                                |\n| routes `methods`        | ✅                                                                                                                                                |\n| routes `continue`       | 🔄                                                                                                                                                |\n| routes `caseSensitive`  | ✅                                                                                                                                                |\n| routes `check`          | 🔄                                                                                                                                                |\n| routes `status`         | 🔄                                                                                                                                                |\n| routes `has`            | ✅                                                                                                                                                |\n| routes `missing`        | ✅                                                                                                                                                |\n| routes `locale`         | 🔄                                                                                                                                                |\n| routes `middlewarePath` | ✅                                                                                                                                                |\n| images                  | ❌ (see [Cloudflare's Image Resizing documentation](https://developers.cloudflare.com/images/image-resizing/integration-with-frameworks/#nextjs)) |\n| wildcard                | 🔄                                                                                                                                                |\n| overrides               | 🔄                                                                                                                                                |\n| cache                   | ❌                                                                                                                                                |\n\n- ✅: Supported\n- 🔄: Not currently supported, but it's probably possible and we may add support in the future\n- ❌: Not supported and unlikely we ever will support this\n\n## Examples\n\n### [Next.js 13's `app` Directory](https://beta.nextjs.org/docs/routing/fundamentals#the-app-directory)\n\nAdd the following to `next.config.js`:\n\n```diff\n/** @type {import('next').NextConfig} */\nconst nextConfig = {\n  experimental: {\n    runtime: \"experimental-edge\",\n+   appDir: true,\n  },\n  reactStrictMode: true,\n  swcMinify: true,\n};\n\nmodule.exports = nextConfig;\n```\n\nIf you're following the [Next.js 12 → 13 Upgrade Guide](https://beta.nextjs.org/docs/upgrade-guide#step-4-migrating-pages), delete any `./pages/_app.tsx` and `./pages/index.tsx` files and replace with `./app/layout.tsx` and `./app/page.tsx`:\n\n```typescript\n// ./app/layout.tsx\nimport '../styles/globals.css';\nimport { FC } from 'react';\n\nconst RootLayout: FC<{\n\tchildren: React.ReactNode;\n}> = ({\n\t// Layouts must accept a children prop.\n\t// This will be populated with nested layouts or pages\n\tchildren,\n}) => {\n\treturn (\n\t\t<html lang=\"en\">\n\t\t\t<body>{children}</body>\n\t\t</html>\n\t);\n};\n\nexport default RootLayout;\n```\n\n```typescript\n// ./app/page.tsx\nimport { FC } from 'react';\nimport styles from '../styles/Home.module.css';\n\nconst Home = async (): Promise<ReturnType<FC>> => {\n\tconst uuid = await fetch('https://uuid.rocks/plain').then(\n\t\tasync response => await response.text()\n\t);\n\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<main className={styles.main}>\n\t\t\t\t<h1 className={styles.title}>\n\t\t\t\t\tWelcome to <a href=\"https://nextjs.org\">Next.js!</a>\n\t\t\t\t</h1>\n\n\t\t\t\t<p className={styles.description}>\n\t\t\t\t\tGet started by editing{' '}\n\t\t\t\t\t<code className={styles.code}>pages/index.tsx</code>\n\t\t\t\t</p>\n\n\t\t\t\t<p className={styles.description}>\n\t\t\t\t\tHere&apos;s a server-side UUID:\n\t\t\t\t\t<code className={styles.code}>{uuid}</code>\n\t\t\t\t</p>\n\t\t\t</main>\n\t\t</div>\n\t);\n};\n\nexport default Home;\n```\n\n### [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes)\n\n```typescript\n// ./pages/api/some_route.ts\n\nimport type { NextRequest } from 'next/server';\n\nexport const config = {\n\truntime: 'experimental-edge',\n};\n\nexport default async function handler(req: NextRequest) {\n\treturn new Response(\n\t\tJSON.stringify({\n\t\t\tname: process.env.NEXT_RUNTIME,\n\t\t}),\n\t\t{\n\t\t\tstatus: 200,\n\t\t\theaders: {\n\t\t\t\t'content-type': 'application/json',\n\t\t\t},\n\t\t}\n\t);\n}\n```\n\n### Server-side rendering (SSR) pages with [`getServerSideProps()`](https://nextjs.org/docs/basic-features/data-fetching/get-server-side-props)\n\n```typescript\n// ./pages/ssr.tsx\n\nimport type { NextPage } from 'next';\nimport Head from 'next/head';\nimport styles from '../styles/Home.module.css';\n\nexport const config = {\n\truntime: 'experimental-edge',\n};\n\nexport const getServerSideProps = async () => {\n\treturn {\n\t\tprops: {\n\t\t\truntime: process.env.NEXT_RUNTIME,\n\t\t\tuuid: await fetch('https://uuid.rocks/plain').then(response =>\n\t\t\t\tresponse.text()\n\t\t\t),\n\t\t},\n\t};\n};\n\nconst Home: NextPage<{ runtime: string; uuid: string }> = ({\n\truntime,\n\tuuid,\n}) => {\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<Head>\n\t\t\t\t<title>Create Next App</title>\n\t\t\t\t<meta name=\"description\" content=\"Generated by create next app\" />\n\t\t\t\t<link rel=\"icon\" href=\"/favicon.ico\" />\n\t\t\t</Head>\n\n\t\t\t<main className={styles.main}>\n\t\t\t\t<h1 className={styles.title}>\n\t\t\t\t\tWelcome to{' '}\n\t\t\t\t\t<a href=\"https://nextjs.org\">Next.js, running at the {runtime}!</a>\n\t\t\t\t</h1>\n\n\t\t\t\t<p className={styles.description}>\n\t\t\t\t\tGet started by editing{' '}\n\t\t\t\t\t<code className={styles.code}>pages/index.tsx</code>\n\t\t\t\t</p>\n\n\t\t\t\t<p className={styles.description}>\n\t\t\t\t\tHere&apos;s a server-side UUID:\n\t\t\t\t\t<code className={styles.code}>{uuid}</code>\n\t\t\t\t</p>\n\t\t\t</main>\n\t\t</div>\n\t);\n};\n\nexport default Home;\n```\n\n### [Middleware](https://nextjs.org/docs/advanced-features/middleware)\n\n```typescript\nimport { NextResponse } from 'next/server';\nimport type { NextRequest } from 'next/server';\n\n// This function can be marked `async` if using `await` inside\nexport function middleware(request: NextRequest) {\n\treturn NextResponse.redirect(new URL('/about-2', request.url));\n}\n\nexport const config = {\n\tmatcher: '/about/:path*',\n};\n```\n","readmeFilename":"README.md","gitHead":"cc91567c460e6fdc6915448245876bb5744f34d9","description":"Reference:","_id":"@cloudflare/next-on-pages@0.0.0-cc91567","_nodeVersion":"16.19.1","_npmVersion":"8.19.3","dist":{"integrity":"sha512-XFzJ9VCtrvmRPVpH1NZd6GMrDngBMFiF3neG72y5ooEKXkxWE7GB5c7CxYfOmjb7+dkDOHpzYqTieticMubf8g==","shasum":"32632e7844b5e141c937a18d47af71d71e6a0c8d","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-cc91567.tgz","fileCount":9,"unpackedSize":244443,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQC5Xd08TcyzmQ61Ihv6a8tUTmf2Qj2leX1LtSVYc9vs6AIgNOq02tg1iZQzAMH49r+72X+iw7MAtVzMBUUzwei0q6Y="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkGM1LACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2Vmp1/hAAn2NcpjMSTbZXupcSm8OJHkKfq/1pfXOI3EYQALRqG+zLs+P5\r\nDLppvUlzuK8Laey2lb0svtkHjGQZavm8J4gHPN/R6JoKBZANW4DHfsjSv/nN\r\nsJX1YukqyFTtn9N/WF9EGkdAenrsY31WAsqyucnHNTw/JCJWNIZen1jXFige\r\nB+KKtGR9MOgaiETnhU7pWTGYL8yU2xb/f6IPiqZvu9HxNavmRvcROYv3aIBl\r\nIYXkSfU6LwEGshrUo54eXcOqPbYmNVVes5bN8uuQY00ZeWu8JHs1AFc5SpzR\r\nIjXfRS8uI8NMzjWa8FqGQxm5GbAFQLg7juUsCx5I1IMRGhlogXOn+3+MbSux\r\nh/MGu9f4b6NgDiy5di0QEXUqQNt2Hv7iNOwZyAQ2QIwIbfQIiyngbJdBFLse\r\njD/aO8tJFYGl6/EV99fLSHvqnSbCLy/9d6xfXxkYlA2FOifpcMilaGnwO44k\r\nkHl/X7Wyw9f2vLdaGoeBL45Gt5aCqnWPV7EJ03mJb7Wf5eF1I0U1Cbx8s49x\r\nUGXfZJqcEamd0GJKEySOPN9qrwpZ09AekObUQG6DZUt80aVh9Lxbe49qO4/g\r\nnhy+eBbSPrYJxyi7FHIIVDdo8LT+eoLvWwfxstquG2l4k1ogs7XeL/ctnVyq\r\nP5Otjk5Nnyuvz6NC78MFtq0MjhYTJBltNt4=\r\n=X3Su\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"gregbrimble","email":"developer@gregbrimble.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-cc91567_1679347018781_0.6929860442052542"},"_hasShrinkwrap":false},"0.5.0":{"name":"@cloudflare/next-on-pages","version":"0.5.0","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","prepare":"npm run build","publish":"npm run build && npx changeset publish"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.24.3"},"gitHead":"cc91567c460e6fdc6915448245876bb5744f34d9","description":"Reference:","_id":"@cloudflare/next-on-pages@0.5.0","_nodeVersion":"16.19.1","_npmVersion":"8.19.3","dist":{"integrity":"sha512-xr1JrBF9yYmxQF7ry62Jov075X8k8cVgHXI1ZCxU3opln+ETAUnc7ALC047XJeXw0VNw5OLdUQYzshTU7KG8IA==","shasum":"f2dc756448f2fd4166e3e057daf3fcb7e63933be","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.5.0.tgz","fileCount":9,"unpackedSize":244427,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCH9xXx2j/kMtqzkaNuFO2Mqz9PcKpeLKbMIbVlcIBldQIgQaTNNAtB4DnN2BM+MK547odsvtCrGhQb+AncOug4odg="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkGM1WACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmoHvxAAoPlUQTR8MISXYAdIHJ0Q90IsmEdjRSVQx83mzYMCW/fFnSUH\r\nOQORMZsPZbF2AhNykfmmnWUnqkfAHXSFvJk7UxuwSNnx4HnQxon1sccEeyjS\r\nOJSJ8xeBIX8xqrBsupsNvwTrn980fOhZgR0IUS3frMhGpC7KMuvoeakzONDb\r\nUAbuxmKUXEtcyPfoaAcH/Rg70KVIzrXQn9arSEKN54ZVaFH5FiH5xg9GkABa\r\nDEKD+kvG9jxHB7Qk4n/LInE4XlTu3eZ0DG8B/Q1DZV/+lVRXpWk7xtHSyDfQ\r\n+kTF8UhCPsJo4uIMpz92hFXRadUunDHi4IKpVaXHhYwwIdgxLbrmXwMDQ5nE\r\nCd5b9V9ViIx3KKoGhqWr1PsF8157UtrRCx/Mzwd2TtVKhB5fgK0+7/np1Ast\r\n3Jm837XS1CqUbRzI9B5uwSgKcZXkRBAy87zr1IFGFDhN7/m9cQnjLcaCwv9+\r\ndVEHfKANaaCKUnwrfGhxg6sc32ZDXykZ2gCnS0gYbZeyoRrQa38d1FuJLzdT\r\nNKN81/1u8C4Q1m/E4bmdk+pdveZj0DdQtGnvdk7drgFrJXI5UGf0tnP76wZP\r\neYYPRWOtAGN3HWDhY5OMvw4xJYb4psnCCHyjfpqPw1r3eLLit6gT5Rz9vNpe\r\nRGkiD2hgpM+ryQn5mgW30geTWwrMfAk1wfY=\r\n=s9aw\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"gregbrimble","email":"developer@gregbrimble.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.5.0_1679347030286_0.5816625028716802"},"_hasShrinkwrap":false},"0.0.0-824944e":{"name":"@cloudflare/next-on-pages","version":"0.0.0-824944e","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.24.3"},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"824944eef1779d83bf0717b00d330cc154c9d522","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-824944e","_nodeVersion":"16.19.1","_npmVersion":"8.19.3","dist":{"integrity":"sha512-NsVAKmFhtUV8YQ+2ejQeiC/0p+DjAM2a2YO6nJmZAVB52LqTeVWcs6TsFP7ndoGybNC9UjCROZT1+MAGfoC77g==","shasum":"ddeae50f8202b964ae2e1f643f438b2260795a12","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-824944e.tgz","fileCount":9,"unpackedSize":240443,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIBA1mPhaAe2Akvk1py30jzxpVAY58pConjA6AKcSMbHoAiBAcmY/CvUSdFLKXLtGWvWxLGmmdFjqoM9HBFHjxqXFwg=="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkIgHJACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2Vmr5rg//clPabizs8XDA0XykZWnKroj9QV5b3QX/vx9I5h5+o4zRO+Ir\r\nYzpwiJoTlr2fi5lVP89Yd62j3sD4H27Nf4V6TLEFU6lPkBQiOXvD4exgq6/T\r\nNjY4hqDyWEGpukN8JcwPBQbFAR+kffQPM1O2wSzHrsBECZzB7EekFb1GEVHr\r\nEiKYL8qt/aGYtiIZUPNEUtRzQRAJf1uV0jYX5jm/TjeKqBQe2dWx1RQNlLbl\r\nJPCRnJNt/5HzGQTFQlwXEczsF9M+FAnFYO/t2eEwtr/g0KMXWBZvvtD/kLEM\r\ngr7bAlf4tac3YTjRcYye2HL7CXfQxbrQySpr9ASHQzp6+Sisgrez9m/eiZqc\r\nbLwi1CuU6e1R9Gf0Kl/52rlIR8nqZa4zK5mmSJ5lgsl5GGPIGIMisfLCWk+z\r\nJXEEX0e87wO85ug6LQR5YM9RICtQr+Fh/6hGm30yM/YRu4FMRHk6ZuaT1FPr\r\n0iNJ4PDwA3l5NKazmyxy+TQ/OBxZlSfkgv8+Lim72wTm1GF2TwoQQVNB1Y8Y\r\n49V3x3uhxDaIPezgLl/ze8/vB3sCD0xq/FHzKH6S908LqQoPNLwHy+xWGb0Z\r\nSufIy3aJNmqHNwv2a4VSxyYAwrqSoq+1yeOFnMiI0YLmgLD/vHdT7E5AS19Q\r\nJe5ExupzqzkFALzIwPTLevz2uf2a1qYrmjQ=\r\n=Qeo2\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"gregbrimble","email":"developer@gregbrimble.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-824944e_1679950281019_0.879224042593703"},"_hasShrinkwrap":false},"0.0.0-b87c51e":{"name":"@cloudflare/next-on-pages","version":"0.0.0-b87c51e","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.24.5"},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"b87c51e69d3f919d4f5baf0ae900786418449fa7","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-b87c51e","_nodeVersion":"16.19.1","_npmVersion":"8.19.3","dist":{"integrity":"sha512-zLgIJm09UWoLlnA8dLLDu/CA3e0xqayGlf9z5+4Jcvbu/1vgEauaxDn+KnFG1fW9ghH9s662MSXSQ7i2jWaGxQ==","shasum":"2dd94f748c04d98ab65cc2391f858239b678e561","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-b87c51e.tgz","fileCount":9,"unpackedSize":244212,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCtY7wTqQbjwCpn1R0tLL7+OFlUZ9/oZVnBGpoDwhUHtgIgco8Jb91jpmemN7qvsQYf/7lzr1ObqFNDz1iqF7Wnl8I="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkIsVJACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2Vmr7mw//b3mQOKSVMo3M3qVc3HU9cHsllvYhdDsPjf25ZT/IIBd8L5SZ\r\nS6O67hDVwa0qB9vC448xk4KdcHc4mxADAk8KexTNT+nqyN7BoMRNFXZ3RXv1\r\nO34aP1zR59+9xSx5ncIf6VV2WxYAX6G8dOiVKfIvs2CFTYANqjKeqKYHgYh4\r\nBcl9UZXjGjTa17+XJbY0FgZ55hIkk6umgH3jrUvOF6reOTVuiM8aG9gVJ6/2\r\n++5kO1t/lCoWRrjM4lMtA0Pkb41wPepeQUcWNsS4d5Glzz/uGNgdgofsRM9u\r\ncZwy3/dATmsckun1KameKiXYsaqmHhdIYVG3fu23XiSB2fNy95hz2MX9Sz/h\r\nffaNqo2ZaZXQe79bXMogx6rMugVEoBMpgGbhoRfowthdz8a3OPCilBw3oMNp\r\nuXK8vUvpktQpKnfWVNrYS9lEEKKQ1cTurJ5ccuI4AG7r3ZS2OHDy4Ywv8kF1\r\neFQfSE0SUDZ+kdbA8d2XUrk/DxbzS6MliUrns5nFNP6WtvWGa6LhvUDUXlcc\r\n71TfyjDD2VXQ7LRAL4gAaT3+YNE9MbwlTfFmW8OIdYXJjhvE6R3na+YgsYEL\r\napx5RusW3rrJXw8vaJOGfbZMbAmjSKBLaFaLRvt/4UpGo5jR47ztqUFacKEM\r\nSDnwRWHqEfOkXxqjGWCbCGDHHTj6WL8RYWk=\r\n=OpVL\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"gregbrimble","email":"developer@gregbrimble.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-b87c51e_1680000329577_0.7028559200341098"},"_hasShrinkwrap":false},"0.0.0-bdbf909":{"name":"@cloudflare/next-on-pages","version":"0.0.0-bdbf909","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.24.5"},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"bdbf9095104c61e927d1dfc05030469fec59c157","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-bdbf909","_nodeVersion":"16.19.1","_npmVersion":"8.19.3","dist":{"integrity":"sha512-zvELTA8cHoCLERC/SrHxmWS2Gm2lZREaKyn8xGB+yltfKxEpaXl+chMH8lT38dUKb/CLX+dfSDE6qI6g2tWSGg==","shasum":"a43b0cadd72881b95dd4c84aa208edf698c8f9bd","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-bdbf909.tgz","fileCount":9,"unpackedSize":243977,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCSTn+Wxf+zSnJtgG8DMjc1RrSeUXE5FseEbhBGf+sKbwIhAKdbvmtG1EPwovya/yUoz4tdm8xNJBj2DqH25gwnBemd"}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkJeC/ACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmqFSw//Tt6AAyU9y7xpPBBSxZd3id74PQyTVEBFr6oIg8iWEinRjKJa\r\namJJz7bdjXC0+7GURNYdfOSiLJ+gzFK3Tu+Wkp8z4hhAYGoeUwTu+HATpBF7\r\noWyGDQlNrwH0E9A6GA8B+g3Mi26O8YeMXcxMNqHrlyUSdmly/2TQ01hKDZLj\r\nA01Yxp04gZRiM1BCAg2G28B1H4Yd/J5glZKIZPVbI//kRd3d4iCHWkNY4Cvv\r\nGcR300FKq6FJV6Pn2PV2TRIInuwEbmUa44sGQJfRVT/44KrsdPxA58CZv4SN\r\nJYce9/PfFi2gtpbWhhUAIS1cWCxlRcthkSrd4FOdJlZi3VNTlonsLzb4wueS\r\nCZT6nDO25q/zWoSycwZmNf2wUP0IscoWiIZV9wxCkZinRKQRGcyioI3q43NW\r\nCWR12Jf2EUOrK+SCsGjnSqjxULjWcqH+3ptkB/wee4rtHjushwXfcm9jkrO4\r\n4k5roXirXcNBgY6D5q1kxF+ZA5U5ZZcCaNWoJFjl7ry22TPmnz+uplP7CB5P\r\n2lcGEjw9kPXbZoHIbQ2uQymyOdphF6o6A/niyKUJQlKz1TIBg3jHx8tNq5nI\r\nW8AcySTOIdpzKYVZ7ikhCOAwJWq0xxJqsv+H9eQVHyT3+6GnDibbbLuLvQ14\r\nyB2vjQG3F6Iaf+yp4Kbf3iGtOrjla79RqWg=\r\n=Nkm6\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"gregbrimble","email":"developer@gregbrimble.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-bdbf909_1680203967646_0.18801945452467828"},"_hasShrinkwrap":false},"0.0.0-f6c1d34":{"name":"@cloudflare/next-on-pages","version":"0.0.0-f6c1d34","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.24.5"},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"f6c1d346286784712b376a23e0ea6728f7a3b9f6","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-f6c1d34","_nodeVersion":"16.19.1","_npmVersion":"8.19.3","dist":{"integrity":"sha512-30MbLfD8t7WuXeOKOuMK0GCzXVOhz2BirrOSEnR7pyXMl38qkBWGyofpd7SGn8Mg+hB5Ottq14v+JGQAQPrUZw==","shasum":"88642f8f4b49ddb97501b10f423152a76847d824","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-f6c1d34.tgz","fileCount":7,"unpackedSize":242254,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQD9eq3hEyYvCJAd65wZSyTWDllfwJmOxWmWRqkf8EwLxwIhAIqNfu/nImbqyVl3rDLU1abCMSgTurQ9fuA42m5BmtV6"}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkJyFbACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2Vmp6pg//TN5qkgXy6wRQqEpJRRWPi6Mdt33nhraAubMFoyWtogXTSK/x\r\naXoarWeYtY9bOyWiVurclJFKXJp9xL60gVaUEndPP0jXO9OhySAH2kneQeCU\r\ne4n/zizwMrApLxuo8NJxbimG9aNAtXNmmt+QxsYxZEW7y/nKI+FXUP8zarb4\r\nNCbsWa0S9pbTvPZ/yRmXuSZ/ztTiHx7/PSbgPyj5kmdmNC1wiCPjMa5Skv/K\r\nNrwkrbD4skVUeqXLfxNy4dHfqYX1ba9ih4QpoLBF5UEz6v7WhNoPXx4iU/0R\r\nYtYuo85ZHzYCWXEDJiQ5haCrLhbzTj9PKjSFPBf8fQqqdDatOBKdAYciSi54\r\nu/aJyIvZhfOuXkgjWlqI1GwaWyYeSqPJJeQcS8AkdOH78nYQqpLQTNOYJXP9\r\nLeUsqGdn34xnd/NPq8+YEljoD9wiyA2CpD4XGIZg931ZAJj1fGkbL42SlRst\r\nZ4N88M6sOyo4m5sv4EormtEmbnM1oT4MZQ2e9fkx+v5vVvOms57U2CT9bdp1\r\nZgnL6W6280y0Ve0vMO38N0RMk42uiRI+c96eGg+lWuPs3+bSNjZiV/Cc4Zbc\r\n68BvrFY80xdo2JTDfN9w7wlIyNM576KeDJ/NIWaSXwvWZw51BapjiasO5POS\r\nHgoqlZlSLpHk2zh0LSyczEvMbemA55RMhBw=\r\n=X3IC\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"gregbrimble","email":"developer@gregbrimble.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-f6c1d34_1680286043206_0.22787842219771526"},"_hasShrinkwrap":false},"0.0.0-057baa0":{"name":"@cloudflare/next-on-pages","version":"0.0.0-057baa0","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.24.5"},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"057baa0908b7045abe9dc48e26f5511645353933","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-057baa0","_nodeVersion":"16.19.1","_npmVersion":"8.19.3","dist":{"integrity":"sha512-IByTyn+kdMlVlsAZ0r8Q1YuqifJeTgDlLbg8xrHhYqk8pgCvDyOr2VXw4R8+kgFBvP67IYCcaxT8hKUY6CjU+Q==","shasum":"37f8cc898fe49f8b382b32588f765542191f4f1e","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-057baa0.tgz","fileCount":7,"unpackedSize":242724,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCSh83EHATE8iBmnJNWFc2eyGD5FhdzdbExFyithQiQZwIhALUaHAHwVfbiazBEu1hCvk8/8sta78nlA+HEBqM810tR"}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkKaq6ACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmpQ6g/+Kg6M4Lm9Z6BVLiJ8H2H5RjaosEh3eVEB7gdG912x3rijyhSU\r\nMPH7J4qtUW53OKT6yskJPYFTAzvrOutUMDQPCp3lpfUOH93mwvK7/W+Eff1Y\r\nVxVDERJVPOuCm2XqcfiFXe5vMhE1Z7mZM9f4ThwrqMfC4N6a8zWUS5u9xtrn\r\n9Z5LwCAUpCb2AUm68jgQRKIFhqRx6mzhzJjkO4FIQ44OvzP0t4S1TURD9zXu\r\nZh2ozsyLKcPcwXW3EFTqSzW3ymWfLldY/7QqPfg73GuyoCut8JmKM/iEZIlW\r\nQbOP4Mse+EbuCMTSLngvB4q7RQrIADxpScCxduC3of/OmLAc9/XHY8AsNyEo\r\nTj7q0XFXuBOz9ZeEA4M5l8dm9xwz9XY06cm/hRR+JKDRTLdK1yhhe8RAKvdq\r\n3RVaz8SRZKOpz6MbxqxQe+V7VUEE6+MhjqnWXXfSUlRmPNVGn11DZ13bFFTb\r\nzR8OlaP+rZ0DBj7mCBPm/pDxEyhuGQsNfzrwE/ISw+2ZUPCWsbPcekWrJTCo\r\nEYXjSnPE2vM0fVII6ei/ztUxxSbqTMkZ24WZHM2km1DPY6sKAVL7oWSYzys4\r\nIW+Me6C5As1STyM5cF58BdhtKOlweXrJefEi6wl0zYhkipnLWNmydt9knLzy\r\n5ZLDiTTyLqMZqzAw3hyN23x6gjSft9IyBA4=\r\n=Skub\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"gregbrimble","email":"developer@gregbrimble.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-057baa0_1680452282043_0.9865197671651227"},"_hasShrinkwrap":false},"0.0.0-8b4f6d5":{"name":"@cloudflare/next-on-pages","version":"0.0.0-8b4f6d5","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.24.5"},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"8b4f6d5e52640b5dcb7d2e36bf0109f25cdf708a","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-8b4f6d5","_nodeVersion":"16.19.1","_npmVersion":"8.19.3","dist":{"integrity":"sha512-AKgLfb/ZNGXjj4MT9hqfe3OzXSXliuXC+pANNhXCWZx7lWqb54zkw4D4r/pr3NKHgChN31zUf2/D+I3+z5VclA==","shasum":"6ad8bc84e61a15ea44d25d902b19f3e6f93846bd","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-8b4f6d5.tgz","fileCount":6,"unpackedSize":243685,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIC1n0Vl6+NLQXKcqS0k7U85gxpXn9UR/aud+9zfIpMVUAiB0Z6Lr04lBGFWr10lXEWrYa5zYq320eCJ1RyMgd9Sy/g=="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkKsXTACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmrCthAAgNUtIjeFkUAJKxNJ3ngC82uGESgAq1N2ytVHl3idUIw8J58n\r\nK1YcifBfYsB6KzxvIs26NdErujgFTcchqSWYmJ3eCdcxrp1ASvogqSWLXTvT\r\n+z8f3v99O19M6PBym+OiL3f1GDjYbzO+Z0NLnAZsIPwn27vwiXTAohvSDCxC\r\n9HjS8r4Q2qGjtLv2YpgiBbopWfoI5S9wWgCzOAVmmVP/wJPGzfgCY4eQO7DB\r\ngfsn126W3VGWw3uwhCS5S43ybJXFzF8jnNyV/t0CgxDQP8juIuFgVI3pFCAP\r\nFjpiVob5bfsRb5zUdRZ6VGry8scukqLd0DmXbk31is7H/W4BH39vF6bc5nFs\r\n2holf9quJEmM/g8RSyT/E/VzBV3SyQOxFX+oiTvnaYI44dNQpo5JtIDcdEJ5\r\nVnpL2Ad4v+dAC5RlL0/RUX9dP75qr6l25g5IVQoatvn4VH6mFHuXZKgDpzjx\r\nogDtQb7HJE6BBGunROFnFtBeL2GEeOMYa5BCsaLJQxAZGJ74dRD7LJy2OL6c\r\nYMMOm7Z9rHwJtH0lFygIC3zTtc6qwdTSJqTg6l1U57UA16DULC2XRtYmwMWG\r\nldhkjXiXvlIfNTM9Ks/fZQ5wf8C/sbgh3GMv4JwBT+JgWG+Y+tXzm/chgKoW\r\nd4c56rjga0aLiEmznZMN+HuvTt43wE4gy6c=\r\n=U9W6\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"gregbrimble","email":"developer@gregbrimble.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-8b4f6d5_1680524755102_0.5912380890996134"},"_hasShrinkwrap":false},"0.0.0-e0c53fe":{"name":"@cloudflare/next-on-pages","version":"0.0.0-e0c53fe","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.24.5"},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"e0c53fe2bf734b28a4aea280eb9a163d255227c1","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-e0c53fe","_nodeVersion":"16.19.1","_npmVersion":"8.19.3","dist":{"integrity":"sha512-1pNf5Jzsf5opTuGY91PBJmW5S3OB8pCvFogRRUa5xtN++KIatgOCPn5K/gMSHAI2YivUPWwbq0LLapMIIoyRtQ==","shasum":"8b405544fcf9ec915485d5c129755a19ab1389c3","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-e0c53fe.tgz","fileCount":6,"unpackedSize":243702,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCGk1Fym3xzbUSmrg3bLPclWClpQ80AYuR2zUmpRhcuDwIgEviWrERKdawMKszH5RmhlfbVQAzVYjnpUp4VuBE3HW0="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkKslGACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2Vmretw//SlckoRm5EoooHyZ+OzhIf57hCG6EppROpq/n9Wb4F+7p+TCZ\r\nS1Z/iGNy8gt6goUgHkqV5TZ/LYyckAzkdB68s62L0v1XLBpWUWJll4XVCqcF\r\nG/hQQqmIpIDQp36/t3rffx6ay/jR3pHzvHty04SQPkf770aCu6Cbs0dNDCaR\r\nOtW7j5lLduYwgu2hgPEhZ8bs62Ie12qahXGg6ePkOcT96RVwVjcIdzKLJ2oM\r\nmljRRv7TD/PHHqnAau9EtQVEs5S8mTDKi6PjLI0bHhI4qQQYaq+15i2Xxkih\r\nxkVEoH8AX4gilDeXIn3GUc688qKBPR7xTqHskm/mKQhFzZXGMNxH82pl2qRd\r\nu+UpkiL8xYcMecRm7dVUSE0PKiW6oFTsxHnuF5kOo/MkotplHYTvgLlgUofk\r\nVS+0yGcsOW3FiEn9xIUxKiMByQwl3QG+5Cg8VUFlxq04bRP4RXHK2yzVxiHN\r\nJX2vXTHC0HR3NB6iA2BpcobzsJeQ2yH3qvvOx63dDFBig2xIWOjlBjMBEfP+\r\nNWWvcxCE8Fk/SPhTFWVbsJhqVHR/stRPmxqZZbSuRnjY1afFp6epINu4Miu3\r\nGPo9VuH7I0IJqOhveWv3HPkhwYz7dyejChJp1lq/2JRtqQF0z5L5dqAbVr6Z\r\nZ+AmQL7Bex2W/G/0mcL6uoSq5IjpmIHx2a0=\r\n=ejF9\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"gregbrimble","email":"developer@gregbrimble.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-e0c53fe_1680525638112_0.015256913402196481"},"_hasShrinkwrap":false},"0.0.0-70b2e80":{"name":"@cloudflare/next-on-pages","version":"0.0.0-70b2e80","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.24.5"},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"70b2e802ce32aa3843a01a7f92ad6d75ee9c2a41","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-70b2e80","_nodeVersion":"16.19.1","_npmVersion":"8.19.3","dist":{"integrity":"sha512-7uqXsJDA8CAk+1UNmOFXgwuU4Q8dv9aj25qbf/UtwlPiDA1yiJU4Nfn5y5bVU8XEW8oy/6+WWhQMom40lEc20Q==","shasum":"f9b5d1408330cb284088b199636fba0c7cfd6e93","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-70b2e80.tgz","fileCount":6,"unpackedSize":243923,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCLx3Lq+0j8QSWfSQJDqE/O17YE0wVzRdLo71OP06BPUwIhAKbNHq+aitX3+XWIMIe82CvWOCCjxerpuXvK8/ArwAQQ"}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkKxF1ACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmrHsQ//RvMXkEw+7NUw4lVh7fbCMV4I/Ogbj3nMVLNPcTeYpErK8ei6\r\n7mdXnO1Ejg4rTsjID8DazlzpDbdeYvgp/Vn11hNeolcDnu8jAZi0UD4JHQQ+\r\nUWyVJ5vmTaEpyf9Kg5AjvuzTVunbF2y3GeT/rPl8bAt+o2v9Q5VONuW2Xaaw\r\npwihs2jCbzCH6S841N/8HtQK3EnU3c93yUzG6EINmTHUMBuSjZVILQFt+6WS\r\nEhdkci1HiDla0+6mJ0RrIrVFbt+3UdoZZ/xTESp4MVFmD5fx0rm6kZoNB0mL\r\ndIEsp2cIvaDPhtmEhUA+KgdUOUavv+DOMXL5eRmFiFfi4k8zWU0o/PTNwm+p\r\n5BBRXyDK3nJ0IU0K7HuKmIZ13XOQLYF3nOdGNF+0Agm5tQNJJ99O5ntlLZH4\r\nInwXfD+VjLpLaJ7VX/8NmaRPXjrcCQ13ElZ04qP4f+QTApi0gnXXzQNvHLQB\r\njbQxDyAnSnz+C/ioCA2cxNlm7AKwidZT3XZg2MrReBAxiYO4qUhVTyCLbGV8\r\nloeLZfzExUwYA2Pe8RJw68HeMkIvcA36BM0Dyd/0ZDOuIaHEQ8IL5uuO8FNC\r\n5Pi1dmojjuyRH8KC+w+OONm8lJdyEtaniS1A6+DEK7xLqzJZUL5WTAsurtLb\r\nmn5aXhWlEJnniDQtp8XEnbGlts9ZxPn2YPA=\r\n=V5cU\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"gregbrimble","email":"developer@gregbrimble.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-70b2e80_1680544117610_0.04962525765871861"},"_hasShrinkwrap":false},"0.0.0-dcbbb9a":{"name":"@cloudflare/next-on-pages","version":"0.0.0-dcbbb9a","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.24.5"},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"dcbbb9ad5e17b7cc6d229e2d2ce195fd5af37d77","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-dcbbb9a","_nodeVersion":"16.19.1","_npmVersion":"8.19.3","dist":{"integrity":"sha512-hBQGQMbxkhTA+k+iWy8VFI1kusA5+r2agiGpElypOjRH7SgP+qeKUPF2el8yoSU1DpgL+Un7imAwI8jsYQLsPw==","shasum":"389227401a8163bd8524f564008864883e518ef4","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-dcbbb9a.tgz","fileCount":6,"unpackedSize":352830,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIBLxFRA4UPnL0cDSb5fqMb44frHdy7ipnP3Vj+J5aWJoAiB6N6paWHoNPnggNIzCzi8QLdWATSvVRLRsFUZVCtVOnQ=="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkK02fACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2Vmra8A//Xz+x39LCHXX58Wo5/7XTAQ6MejDqZvh1kwMQ+8LhsVjF98AT\r\nL4awW7HYTcTxqtYS7hFd1Md6QYNzFJtcabxKpT4GQmSl9nwNglqFWR5wPhig\r\nb+Ww+S5cpePnKMU/wqDyteHYPu7D6HrmuFholkIWamrh80oUtkBqxD1hqUL+\r\n+37/X6U34B8LybBorOCpUKIjoyjlTemZQi99ytPlyoulf0tecSHYYOopXl09\r\nf9gOsN4BQBtdcpeTuTOboDi9wuvIn2hVj4HTpVUiLJw+qVy2wVHCPnvi0sWq\r\n2unqLJChEvFwDNS7NUw/WFbnIeToj+p0bT8u6fk5q1950+jsQkbzXGpHK7cQ\r\n9n61KeoSc9Xw1wALFum/VPFE990VAd/dQs/QUeEpWxOSEIS+Zi1tqNp9vl1K\r\nwoR2bG189YmBt+oGA5Lf2w0WfA7Iy2JVEG7W8p7thPrwEdonZWIsFiToVTfm\r\nuE4sOgjHDGkMDQ3qpXWBEpq71WQdJAheZMGfOSpqrfnk1CHAPsBDMh+B7QMf\r\nVrzhjETSM8aN52kDKWDWXXWOCyHR2NkiiIBONeGXiWfdgKto96hKK4I245SG\r\nDDnaQMU5y1hdoOFtDWLWEtQPhr0ThkrXErXKWaEeUZJontaMePMUEcw1IHJX\r\nF8JnJAQuJlMpOCoNz3MT+Am5tSkVhV4Oy2I=\r\n=YYRZ\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"gregbrimble","email":"developer@gregbrimble.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-dcbbb9a_1680559519164_0.13180892240952335"},"_hasShrinkwrap":false},"0.6.0":{"name":"@cloudflare/next-on-pages","version":"0.6.0","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.24.5"},"gitHead":"04da2c9563ac71dc0f06570eb477c06350997d94","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.6.0","_nodeVersion":"16.19.1","_npmVersion":"8.19.3","dist":{"integrity":"sha512-wOajx4vusQVEvT5wbhFSlOWF6KGa3uExourXU47grSH73DU54/nDn/xX8yK6Lq0Hz9Y0EnnqvdRZGlXNXGchoQ==","shasum":"6cabd4acdb18a6cd3198e41dd9ded4c3bfe698fb","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.6.0.tgz","fileCount":6,"unpackedSize":352814,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQC7TwnzQy6kbmaxcEbUIbZLoqeIIVsHt0w1uLhHc3ggbgIgYruRQ8OfMrrS2dZ7blxgWy/nrRNi91XswHAN/PTpa9Q="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkK05wACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2Vmp0WA/5ABuO7DhuxqRjAue0bUc13LGn2rOojALqGhmW1hAkgbkelzbD\r\nS2Tm86/jdLgGnLqgx8LOjaRJBaoBT6eAfxa2h2MBEA8cJb49BzYmPUsMA+Tn\r\n73EMW5Fmgb8Ye97XIYAGmyEbW4SPc6mQsp1A4c6hjOG/ZbyW8Bonjnq7BW/O\r\nhcd1mMjYQg1L59iP5uzRfXvzbIf0tXfZ0sa03pZbgFbOEIbT0f8VU+k427Wv\r\n6pj1slNMLOtbKX/N4WrqW0ifFGAkow96iEdW4WVZ9pfxtwmws9e31YQi/zkt\r\n38Fr5G/ttPu7cA7LTULFNoBxkVCJdG/BNej+T47aqcOjxwAOpAVY3iNmX4iH\r\n5hKv3BIVERSjPjl0OST0iItGT5K6f33sdGINmPZFwQUUTz1vsJjaPDK3EdxV\r\n0LuscgU/CJ0Ud3JX5TJhB9D3FUhB7oJIhmiJ88yvEB92//WsF13qvMBKhuZH\r\nGTi+f92TCdQt3AMc674l4eQTzfX7Tz4GEydypfxzAHwOCsX3jXM7A0WN1UoV\r\ndg8Vo/epNGB4iGJj3QLvm8q/GJxlMa8UZgrI7TakOjYLoLR9xJm/qbXwO7PZ\r\nr0PJvBhF1U2pk97fKgJRBub09In9ThOi5RtepB6pnjnUHbsZEzZFVrHbNhXM\r\nNbTERCzv0myAK6gvvPtKOOpPpjagyczL3dw=\r\n=ExY5\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"gregbrimble","email":"developer@gregbrimble.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.6.0_1680559728546_0.4196090992754049"},"_hasShrinkwrap":false},"0.0.0-04da2c9":{"name":"@cloudflare/next-on-pages","version":"0.0.0-04da2c9","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.24.5"},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"04da2c9563ac71dc0f06570eb477c06350997d94","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-04da2c9","_nodeVersion":"16.19.1","_npmVersion":"8.19.3","dist":{"integrity":"sha512-RU+/G7H6Syi1aaa3NODckpLq9XtlIaW2xGA+QzUbmodcYNTXVwVP0OECYJIrJf2qKA140ZtH/pEFDLHnUBZGkA==","shasum":"55c830d2a27d943f8caeefd7f0d0c8a4094c3c08","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-04da2c9.tgz","fileCount":6,"unpackedSize":352830,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCZxyaT0JafwQ6LNTV0FMlTI3Lz/AfJdJGvKQ1jv37wRQIgB8uATMowHygDyn+eePbI5qvy/0FPfZdFK0MR3hkr1Ls="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkK05yACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmrMyxAAh/PJcws0JWJi43QG38dqy0GDkZ1+dMSF+y/Tw0xyIsMozkeO\r\nNDmzOmlP/4OC4BUL3AOfN3SmcqhSrau/YxjeJTvSBB9qMRmR5FSSosI/N2j4\r\nq6lAdS0Ov/CSFjRP5Ml7k2r+rUlDqipsI3sGbyJSTcJPc4CMh1HQ7UpO+DRI\r\nWpJ4FAOsqPh/rZVC7ybLDQnj8g0u9iW7RhAwI2BpsdrtMIegtiS4QChgJYqu\r\ngRZcspAesr/3fCvgm4JBUuwzMPaTmm4sS9ZLYwqQFRzyhYUb3zoPeS9Xqahc\r\n39wQPDzDMCnyY5OnTwdLSCJnerTWnD+xfKnDp5/TMHb5lxbiQVhcXSVJyiSn\r\ni8MbOlfa16Qqfd2yRVs38Mtj6x3OeGLy1tYlt5VR7HZnzvPh+QIZeuq4qc4G\r\nbZrk2TaZH2HG0eWf39JkYYQRs5GBEtFRdsLopP3PnQz5Vqado1MvaoT/UQww\r\nIDnGLjGsc0/bJj86MKJQ1/OBuSgmDtpsihADRqmYQc7g8dEgnmpvZtON5LU+\r\nIN8salsSHnwcRbkZWWP7SW1Hs+vZo9hmsyQ3xNHAsc3zPr9WeXiKKb3eSaYS\r\nq11fV6W2qFAemdnLMPAiDfnimaKjHASGK1xUH8c8B213zGEXeyoY24A3WIEw\r\nrBphIwoFsD27o4WVgqxlDf49HtlPzo+e+E8=\r\n=61UX\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"gregbrimble","email":"developer@gregbrimble.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-04da2c9_1680559730723_0.5877414040015059"},"_hasShrinkwrap":false},"0.0.0-2d72906":{"name":"@cloudflare/next-on-pages","version":"0.0.0-2d72906","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.26.3"},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"2d72906c52e5c3a4cebd92a6311be5ba98b4cb98","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-2d72906","_nodeVersion":"16.19.1","_npmVersion":"8.19.3","dist":{"integrity":"sha512-a0Pha9wm3va0CBwoREi8t9/z6vl2wdX+Dr2NJ57lbvxrBfnAD0uic4P7evXnIToIOGN/30JGEc38UNkPYNOtwA==","shasum":"74872b3e37adba80c268d589c56ce9544425f363","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-2d72906.tgz","fileCount":6,"unpackedSize":444477,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIGghtMXB/0rVhLW5Gfn4Du8Hol7YUgBV6mpQ4FGywTuwAiEA8aNV90yj/p+yc3YMA39KePFRyEIDdUzhQ/8xNCOeyHI="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkLY7NACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmrbjA/6A6c3Y71Kfy2kLaHaZK6CVXDRtGJ5wEI4ySpSu7Y7PJr7Qa24\r\nMA/KAZaCbRpIbPzOuA+HGbCUIMZn8x4uubyY6lES44mMMMkkBZWOa9eLr2/u\r\njVHx5OoqlM7JZ8Xg3s+jdnB9+R+YnjIJBi/XuwehAnwblFeXGwdkrRHtQXug\r\n5G+lixLUiLeiUx8mtLKfeFfX3tlIm5gKZrBElc6svelwjaRUKAXFGSV7ouGs\r\nYuUkRamRTbspEINQbG9ZiNJXysI4cg75NJrQREPjF6oNwA03afCQz7c3DIpA\r\n+p+nz97h2gQA+WF3Z7H1ChgA7bZBG48F7IEkzakmc8Mg5jzF97K90JRLCAzw\r\ndXpAX7Ku0wpEPTF4uZp7AMi5qel7o/YAxXJkoVe79F2vZMa/bTsFNsLKDcTA\r\n6/LqbLbSTtYXbn3IB92nnRNxm49c/RuywHEvgARlzX3QEl5QcALT8OlxyPG1\r\n6db4VxxnHk6QMVnQibkBcvbA4eIg+Or3Q46e+qX7XPK0q/nUuSDWfbUY661o\r\n+aOeMmOkA9j7pn7MAEDhljOl/Hu9J0mz06dFpLKXh74w72dHSVySW/xl6QjI\r\nVB6PsC4wUu2ekgRg69sCTpJMRm+CFVJNYYrGLq2Wc6gJiRb34FhItCcFRUcZ\r\nPkJPWJWdgn98wWIPuAfM+WIHVQRoYHcsoPM=\r\n=IdpG\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"gregbrimble","email":"developer@gregbrimble.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-2d72906_1680707277125_0.38345040299531674"},"_hasShrinkwrap":false},"0.0.0-7266442":{"name":"@cloudflare/next-on-pages","version":"0.0.0-7266442","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.26.3"},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"726644295d0415e2ad62e8ab835c3e460f0c77f4","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-7266442","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-q4EUSeaS3cjZuudytcUAwZ2lOF/QNGkhCE3pScrXiBy41YNwDSEIkEnNutWUfofxr2g4vZn37lMN9xoAACMtlw==","shasum":"74f1b18bd26b79887875254c734b9fd7d257afbe","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-7266442.tgz","fileCount":6,"unpackedSize":444477,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDdN8C0adUl1xgtp9n6eQNcsAzsQmc8d/mIDqH+eI1ARgIgDQxEByOSNckHiYTirDcpJ6wH5qlqRgoBkHnDXe1EqHo="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkLxMgACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmqQFA//c2TX6G38ssKuKXeQtHxI/WjjidkVJlsvDCsjLPnFx4OawUYG\r\naLCRx/kSwLd6WV0RdS7SGW8r7COBZ+F9tNUraajazz7RrKryp8CbXnPjoBpA\r\nGfDZ4i1bSSljjBev4cnSEU9LwyIkbl44syYN8/FLV2fafj8TG8Rp9hDQQEys\r\nwMo9xRhwvF4W8eYai3d40tRR+AJeJpl9ZLymEcm4jb1m8WCVte8IJ8leSK+Z\r\nKrX1E3cEnDHr3Vu5Jju/IRdvXnfuxUTUodRAZkRZaEZP9aZcPkfcYiHUqSup\r\nva7b/8TnbOvjT/PlXWElgSQVWxjvR0xzn2EqDbnrNwrDFACyrmMNXYOmA7+r\r\nDjC9pBcwhHErzjnGwYlXW0oGYMZ49QecbQm6usv84iIxa2ZrcgKzBF5LP/hz\r\ne6Zg8DoPxui0RKZW0tS9BNNaw3NZN/ZkxrCj0F8W176iFrKV6/mj32M7CTnO\r\nU8sEq9JXYayAYDWN4RTv4eNUeGXcCEbZBXXA75+bwwyTEE4NCu+d///IzYOX\r\nM/oD5EziEhWO8vmc5t6jd8gJYiWgr9Zt8UYzCx96z3OdI1tOtLYUF0BFuOM3\r\nIQXLVCSxzIWQcghfPHxAECnlOcqmLOEHUzjTR1XEHy/BeTqVtdQE+tuyIRR6\r\n5ezL00Z6rJV/BqgU/DVzAHRfJn3W0uugQfM=\r\n=Hc5X\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-7266442_1680806688581_0.624902524226234"},"_hasShrinkwrap":false},"0.0.0-8d4aaae":{"name":"@cloudflare/next-on-pages","version":"0.0.0-8d4aaae","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.26.3"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"8d4aaae66d1082c16ea1646ce57bfc7d68c2afa8","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-8d4aaae","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-g+6MR4oL6pKGc19LaufJ8OayYYFpQnGcj4C/by5UQJ6z/v7CaoKYTCysUA9Cnd/P6LrWnIYN+ygoN4SfbRG1bQ==","shasum":"d3c5e2ba33b8dbcc20eb1ec3607ed5bc07228166","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-8d4aaae.tgz","fileCount":6,"unpackedSize":446351,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIEn248OAz/7nYd1c3XUvInKLCkdItayjEgfD7MJhcuUAAiEAoa10gKko3ZUVAww1AeALkUR6mKFVfcGNWCHWPc45wbA="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkLxNCACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmqvEQ/9GIz4AxQ4ZNPIi0OiAeCxx/HBntF4HGSf8HNWlnimc96w6OaV\r\n+tbHvedMD9Xtb+xkHbx0PUW0x64FB3u4oUIzgcrJq+4u/OvznNWrbs+zqdM3\r\nvn1MiHcQdNmbQVxR3zvra9ub8g8REfsvYYxYcPWuAAMOdp0F5GhsaKjonxqz\r\nuhcYdtramHrsIpaVn6p40SQIxNGj8FVPjJC1kFj5b+XkYPSZUVBtHUgn2hYt\r\nFomJt2DOhk4wHvKp5A6t/cCK2ElaoOjgXoUHBEF0FfCCyU1l3qBfG4pvIofR\r\nbc1+U6J0BnsOFxZrqwDHBmh70hutAOkcRPCJmzvBxCiGBRQwJJmgEfVek0OE\r\nt6wUS0hh7XOAeDqVCRBJr2KOivZjC9Ztq7SmOpnlJct5gDO8a63ut6VcLP3n\r\naLs0UqBG/XO88lM6i2JWiAUyUWcgF2HEaRaPrt6+v+Ir6gXFu6Uk16ANqDZn\r\nwqltLQsjz3awygdO0UJUI3CQJ3tl02pSnRhH+dQVKAfrUTjgextH5eraOric\r\nkatv4QaAlzmxIFSD92m51VSxhOwIkxtTOGYbho1/WcAa2gG3GueaBG1vyHnq\r\nnQpRWfmo6Fg+nBtT8T2DBWslkzWMi9gu2LfLIU12uZ1Y667st7zgAg/ceQtF\r\nraBdshP2/g0GaLaN0BzqGLj6QhEOj24LX88=\r\n=b0K3\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-8d4aaae_1680806722217_0.27462088210416025"},"_hasShrinkwrap":false},"0.0.0-9834066":{"name":"@cloudflare/next-on-pages","version":"0.0.0-9834066","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.26.3"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"9834066c889453bd1d3feb620892209c45a3482a","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-9834066","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-0SYuieWSQ4xA6bTeApih1Zcva745PnmHr1jp7yqONx7z0nHM5NGWr3fCtatN3O4WY14kHXFQFd/anGTkLnn0lg==","shasum":"7c3535e42e702187c9931870d8dd20bb537d8981","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-9834066.tgz","fileCount":6,"unpackedSize":446351,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCzLy96CG9zrl+ur6UovXOG/QZdmj5ZyzpVTp3+km+SIQIgRQHyhXNHkb/EnkYtZREVLLsoR2I9a3fOBVYgqPgWQ/U="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkLxOcACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2Vmo8EBAAhLLJld10tq/owxUK0ZHpK2t+Oab4FJ0OYge3lGAOzwxpgnc6\r\nHX29uHoJ1CtX2syymG8lxKohy7uj6n1tpAvw1M0x9JGVBXIOkpglGiGRZQSD\r\nyRvIcChB0Y699gnSzFDO6eOP0o6WdpZbDms/dVVaUTRn7MXFNiM0ND6n0Xvf\r\nFYIuUGF5V33jt4qy0agLUsnJbtc1uwk/WDhQVTptytO+6YqAK/B1WTDGh1bM\r\n85HVM3LSD8S5WSKA6HidhKBvqZ3did+PS5h4JuW4FIQdbab2h89Jwq/8O/Nn\r\nhlFbGRpeyh+5Bmtw4dqJ3iUoAaYGq3lD8b+g75MAiF6QQrNI3Cq1ZM6q9TXL\r\nCz0lAeJcFT6JtUv4vpjfk8XhkoN+nHpUWgz3B/Jwcw5jrfpsUgaogjcbjo2F\r\nzrlttg1w3CeCFYMatWBi7DBlVpXDbmSwaEcYwTZvqiDTciTHIRDyUOvB5b0R\r\nglsQT/YP5NCSIZnBk9IqSyaV2+er7mrt1n2MAKRrwfcSvCCa4SoU/QevTMnk\r\n97S4vCwkO9/jbJK8uMmOJ5KQkuEYt7ycI1ONk9HMH5xLxDe6KjzU1R6rJrbA\r\nYB2yNMK6RTmjefr+kARXq76W9j6YS286yERbpnUgruJXyH82OsPFK5RDIAbZ\r\n9bn0qXmVKA1YMW/US3SZoNM78JrWZi07TPg=\r\n=db/i\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-9834066_1680806812141_0.9632501338677422"},"_hasShrinkwrap":false},"0.7.0":{"name":"@cloudflare/next-on-pages","version":"0.7.0","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.26.3"},"gitHead":"9834066c889453bd1d3feb620892209c45a3482a","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.7.0","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-AhsBexY9+UjoJDa6XxFjxdSEbPUAl8yXbRWJUc8+KTZBo2kd4ti4aJ50H+Zl1XF9JOjHPwdPYnnxHBF2zXLhww==","shasum":"0a57253f7713b6be7d53001ac662d35b231bc532","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.7.0.tgz","fileCount":6,"unpackedSize":446245,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCWKi084LWmPMlVGdB1TCQ2imRPd6d2gml+ahz/h5I1pAIhAOwB2Tcxb40l3C6IBKfseFTOKr7N1asqrwFe46FZVsqi"}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkLxOfACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2Vmpm8A/+O+580MCffkdWEN4i1omwrcmEWNL+TKaIkygJEyX0IOGILppP\r\nboa1BXXRU01AIoyppbMYG+yT2EMIt2hwo6bhYPIykLvCUVDuBW+2mW+cW7Oc\r\nwLDRJCumK6ZqqFij8YOS3OhfWGeAL87GeA0kirOlhEbhyk/dvmxCK/oxx/Pd\r\nXxMvNW+HHAVxpfXlubntS76GIsvpEcAvgasExP3xY16b+NbsbfDh6lGa9K08\r\n7gms6P6LBpU0aFemoMtk/29N5pCKJl5rgbCb4K+C9oFQH8PLue58UqO9gYAZ\r\nfJTvVN2nH2oO+/HDUpIm7lvDlurHPdzw9nabBxQXkisYOqLl4rbdeX6QvT6j\r\nTfDhj4G/hpkuh8eKFgPCC2zFWuKpURYPkMMbKyIRfdB7ccZ/gIqMw+kPM+py\r\nBNFaMrE0BdGWZUYXydcy2XUgJMexdK8+EB4E3bice+5ABbwY8Hc6QaaGloam\r\nHsquiVhw1K46uDHqSDjCuDMCgDe/wBXoTw40gFu4uz2pl5z959C11PRxu+j0\r\nnBALT8nRaLo626X/wjNPFowOmCJFLE9uQ1lUvLln0AJBsr6hDVW58KVU1gUc\r\nmmQwNbbe4mEVcU14Vduo9keeEgaDMtQoJs9QZ7qgE+l5BDW7jbq/fzpHday5\r\nm0KY/eVOeE6iVHhnsbI+KyTNxY/FsNnti7A=\r\n=5nOK\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.7.0_1680806815106_0.7049007526352171"},"_hasShrinkwrap":false},"0.0.0-3387ac9":{"name":"@cloudflare/next-on-pages","version":"0.0.0-3387ac9","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.26.3"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"3387ac96c30c7ae9243bb2c5789ba482040cd5f9","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-3387ac9","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Jp09mQOPefyDE2h+8dnRTvMDix91njKrK3T14dtv9a4t+EDy5wWm2lCZHSa+8eVpWPvb56UJu1ZNJxOFujmLkQ==","shasum":"bf6cfaac54c5ae87205164fc1961fb08c4a4cad4","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-3387ac9.tgz","fileCount":9,"unpackedSize":452806,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQC3eGCVedY1nqRG1nJAVal2e4hlrhN1YcgwvucDh2DrCgIgeW74aus82mbDAezAhfinMpYJf1jwEfYB8V+6FMJrpe0="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkNvkWACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmpHbg//WGpo+rYoxuJPdn5JaHcnpw65IxKBv+210/h36iYDiKYexsZM\r\nwXon5+EzFAMYiA0KQOjTq1SQ1dZe8dTxPCkyElUO18sohr7jreGjggAnui7m\r\nZy+dOG54WrZcPqmA/RRJwDPJ0pCNV7kVG4jVx2EGZEysWbaLi1KI/cEFfIa8\r\namUr51K7JEI82xV983KcNvlFwwGBnZn7eQTy7X05kUzN2X6IeqVVT3KGzJLw\r\n0X/XfECBXtwrWgw+eyUxHS8PmHYpp9LAgF7/bgIuHeR7YbiNs9Sg/ZVnijHv\r\njHu1D54sk4NMsH0y4rlerIa0s5cd75eXqfC0BF6EglErclif0NI8RmqxYqNB\r\nvcqc3l5xRdWaK2Gi8cxfUT+InSggtJH/NKBxvGL0JxrnDpmJlavpEobBCv/r\r\n43ZnvTwWI7dDrOx5rKeMCmzkZjYEePAjJmjr5phd0ujBBhGcYmMqRxhTvZHM\r\nOPGlEmu/k9GlqpIuUXFtOYCRYIfuXfmoIGJ19RusuWF6iXus4mW3nKcGF5+p\r\nFU2ydk86O3MC9MuxnuyXL3JhGZydZ9vyVn2ESdyq2TVGBMwTI810syjZ9a74\r\ncFleEUuIFe7NVt3NxdPhcqC9mMmpVLfoKWiraaM1HqfTkr4SIU/qVnW/hmwn\r\nuiuenwMizHTmCebs5VAqTwxJblSseICUisI=\r\n=97Ic\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-3387ac9_1681324310329_0.5888271831320335"},"_hasShrinkwrap":false},"0.0.0-119b55e":{"name":"@cloudflare/next-on-pages","version":"0.0.0-119b55e","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.26.3"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"119b55eac1e592d07546541d50c00dde2f293ba4","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-119b55e","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-JH/2zbLmQsLyjvV8UZe9VB77g2w8pBeqxqEyiwS3+mOBLImFbq4zpYO3PVvtbsxHn9lg9fEoFarVQw6DOMLngw==","shasum":"530479250c15a93e4787ec04c87ec4e220b09ae8","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-119b55e.tgz","fileCount":9,"unpackedSize":452806,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCo045xfPMXoPGJsv1RGfa9D42XKHZESjxwWJgxCh/N+gIgALk5zOaQ9UTZfzF6MMF/wngJyR9EiGVjXcTdZYGnnKg="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkNvuGACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmorDw//U0GCQoY549o2sR8cLOkQrYbw7k2p3TcGC+K49QUtFccPPxfJ\r\n7tS3lxPjKtL34rkmStOBxCe9gVAr5KGrOvx75Xh71xVL0NcbsyP5w69Hl6/B\r\ntoPP4r0ZaRGC9E3MObwk0SLUVzhcjsco+KCkmBVae8W+MZ1WC6B1yXROYvrA\r\n3p4O/jCQzn1/M58/AFEcHjlbCsJfZdOlnoKeEeDu0e3Lj8Xck3H9fSrWmyoN\r\nMySAbu0Kp/QB8pVjs2lGDoe/WwPqPYhOVvu22zop/LDygNxngtqRXb/0BeuG\r\nMLCwMMxda9N1GVQ01qR9PDhjT2ivh5bpukgstP9W1VzU/3z4iHtQWWstdA+X\r\nadZoGFHh+tW2wmiXpeWtkbT47rzDs+fB42sIcDlkMc7FU0u0kUXFy62DRUvI\r\nhA96aUrs6U+qNrfoza6Eb0d/L7kYmCd2HrPG5iKWu/OXp3lg2nVrIoa63Am3\r\ne5tidyJGfqaKmscE40s2khpGjWhqQXPRxEnePzehnP0pYWgPSAEDlwRwYEN3\r\nnq02EDg2QLnXe0e1Ncmse0PWsVBqrFCZPDG/4+sApjDdLkx6mLMoQCXafg5U\r\n4Fz/rgyg2rvQkuYNhI4k887gy3MH0jwVWhJ8t7xtEXCedJTYAwBhDAn2lWLn\r\nQwZkwck3hkq8Uxb8r3/NtdzTkwzIKTKxTrU=\r\n=o8E2\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-119b55e_1681324934518_0.1373868002034606"},"_hasShrinkwrap":false},"0.8.0":{"name":"@cloudflare/next-on-pages","version":"0.8.0","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.26.3"},"gitHead":"119b55eac1e592d07546541d50c00dde2f293ba4","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.8.0","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-louT+EtC8i+x0F+iGk7BYm7GIWerqf4f3Uq9QHkH16TivY+07YYXa/4gidUmnSUxmoM3NZbRFPrmu/YGzdpRiw==","shasum":"b6ceae6a9466822a96636d08dd953353e44ae04d","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.8.0.tgz","fileCount":9,"unpackedSize":452700,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIEhNc9HwMahFgfP0acZT6EAKBunyoNPqKSsT7Dxe49zMAiEA7oCGZApbZax98aY6Dkvfsk6aKx8pJlvy53CwovjLwyk="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkNvuIACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmrysxAAg2kX6p7u1t+VogAI3PaxtMGMSikerrJd8xsR1wkMZ4vxOZh/\r\nb4RS8KkyAkn2xMX1mWy/+b/Gsca9/swwFrhG8NSoTiJeg+ls1QSkDUPEQjrd\r\nqLw2ajGeE6TkzrCtWsPEF7YQUR4HVWVSo/3iXrQHPo5w31mVORwxvxAQEH5+\r\nOFHKBqsAfbcUluNi3pG7uHsvbo+J9gi/xHHkip+hNtJDDYkAtyORavWkp5Xc\r\nPTzoDG09p2oFA11nIY00CVAvYquaQIIdj70rJUptx/iRAdZEXDikd/icbmb6\r\nAAI3EY/966GOOxQuTMM4shZVoire67jYa9YEmpeVkt2X2KUZF+A/lloZmQXw\r\nWHd7jMLfu1jOXUUELlycgTWH9lAtVYc4AtMdNIKSYWoJtMMAF3MFaP2/gbLM\r\n35Sgt6AVF46M7tDrPUSMaZWSe4rEnB9NsACwm7aBNM8L/4g0Oo61/+Md53TW\r\nLTxD4kqg668A7XF8nx3GtMR0zEFxV2CFONbx8hY7+6JVdEyxiLV86TtlIWdH\r\nHgO6x++OFP6CsuoUxVBVZlN9Z9aZdIlVwpqEf38XfFk080EtHgUufpbjqQaF\r\nbXERQqy+PRPhys0osFec6Qqm2neefOn/vXMNaVur3ugvq/l6J26+ZLAvMgrA\r\nqqVZmPusANF4L6JMBHGinVKvueuntywS46c=\r\n=Ob+S\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.8.0_1681324935836_0.4460000253636278"},"_hasShrinkwrap":false},"0.0.0-91f766f":{"name":"@cloudflare/next-on-pages","version":"0.0.0-91f766f","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.26.3"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"91f766f8d0a62b41c4745565527acdf77de6d456","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-91f766f","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-wJjMJN5K31UCskRcxsMWtD0750cVbkAjcrWFyaqv2Zr+wPNGM1yGDE2WgKCUv5l+j+NLGy5FsBnzYbI16PMANQ==","shasum":"ff400edfc3b5bb9bae3eaaaead9200f5b0e439d6","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-91f766f.tgz","fileCount":9,"unpackedSize":452806,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIGhHSc5yJaOEYe1lSx7bkivVvsPDd2g7cKbuzZvyCkasAiEAnnl1ivdjrFo70LlL87CCRxkZ/KLhgsd3ih76BTe9zIA="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkOEzJACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2Vmp4HhAAnghDEE2glh375XXiyCQckqRRZ/OCV6BCOdDMC24u+l6nwnIC\r\nb+UG2dvmEuD4vDhns1YU56/rIfie23L0HM1Wp0bU7o0rBTX5mxJyWTLfCjfb\r\nv1hWqHu1jt9NomIg8pZAtSpSS47dt7+zYsXYAGLKFq30WHGFnVLv2qnS4J8A\r\nFEKVoI0tI2jWTsdI5hXoeOzpEuzBBYo8WKGuS/pVTATQOFekKcyRYFBs2Rom\r\n5XzInen6KYrrfPK1LsrtWaBg1BlSDSEMpBxQmQHbZDXXdUYLeZ6o7xGq1wWH\r\n3FftBPuySBeEfX216QH1yJlqaidZsvUWEWsP1kRXJsIr2MPt8P8u+M0Z/5mN\r\nzEPG7aW9h9zrxNa+gtLghHn+ch/SgwdBezsYsa+Aqs98tWEiqja1ZhtyOhwI\r\nWNo8NT/mf/zrOjcM+ow259Y2cO7nIf1XG7pxGfsO7dwKI6YG4pMtcBnsbF6+\r\njTkQ/WEyqvO4SE1BsQ2x0owxaXZsAu9lnAw1zfAc/0+zBH5dOpGpIsVzDZaI\r\n5327zIZfFPfr39NnxTAqFhGNFxVDEOXBNaRTS0RqeiwlYfGGWYuIH6/hiV+l\r\nWQIOMPY6cQaxn03lxN1S4gISqMrnfGhVgIKRgqmpE10H6J1PoFtSIjnB+9Yd\r\nvkyNBK+BnIzPOcshs5GoXfMZzcwAvMGVv2E=\r\n=vOfQ\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-91f766f_1681411273648_0.6333859870541056"},"_hasShrinkwrap":false},"0.0.0-752ae09":{"name":"@cloudflare/next-on-pages","version":"0.0.0-752ae09","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.26.3"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"752ae09a19e753e4935898984db747daf8b5518e","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-752ae09","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-rFKTtySYPJ+SQMR+S+7AM7tDWgQOQbuOEpX+KIcsyjFegNvzDnbeR/7uzdE23+PUX7aW7IIePoXL9KsX6R7tVg==","shasum":"358419c89c5388ac30588e0db35bad244f17eae6","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-752ae09.tgz","fileCount":9,"unpackedSize":452904,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDdBocbptnlC1v2pT5J317Vg9Iqo3lTb+uckoEbl5EMOQIgGMeJR8x7OanTbpNDUSnn638Ibjcs1/M0M2tsLCUXeDE="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkOIU1ACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2Vmo6rA/+Ob3IGmIzedpG6Y5gkoIwtYb45L5rT8pPZbMx5C0pTsrhjifc\r\nJa62LiJHuHurcmjrAu2oiIhJPNI32Xx7hB/om1PFDVTJVbsaR5lBOe7Kz0bD\r\n5EJUzVVG4oWqXjTroSNXIV7elhyizI/2rEV5Kr6cFny2qwpXTMEk+J0kB7EI\r\nGo8Q+wC1jSH36cVF2HmWEuZNRgFo7nUa6FKoTj1vAIYfekCzEdtcDc7rfcQG\r\n4yDe7UeHiGSy2Jc1E803eNlB9TawffySqmnKHvnkNE0tya2ZFqbMsTvcmIIm\r\nQoDIkAl0yHbgx12imESTwsliI+URNW7YI6kvr3KDv8+ZX7rg9ogoRhEu09gL\r\nPXL2H6eWsF0fTBEPQUAM/OJszLwcMIaBXXu9ZShfV28ULSB4DJsdS1R5ZrRh\r\nqCBwmLWkjmCByWXuwcnl6AGITTDie4vWILcwbOqCe24sKpyU2rwF7a7KxxSB\r\nMLUL6uRJx8niqpbpEd2ak0s3BbZ/+VIls5xjhpjyJvEd0kuYxJisj+zEidI8\r\nwEfPJXkMcW6Xi2iYFeo++KuknBbJEEjbOgGz99DKJfRYoLlThh2ae7e3fHJy\r\nsQcBaM2Sq0PDW4C3jydoH+KqJhqqkqQuiwnaiMG6K4Mxh4ox1cb4uPROv5u9\r\nkQA7v18bvj4Z03BjToNq+1LuHxI+z2r6Z48=\r\n=CuJt\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-752ae09_1681425717528_0.9736447708002487"},"_hasShrinkwrap":false},"0.0.0-b8b0bde":{"name":"@cloudflare/next-on-pages","version":"0.0.0-b8b0bde","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"b8b0bdedec9f439679aa76dea4b4085e48518df4","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-b8b0bde","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-zt+T9q5+EFYnGWuExgcDTbHrFubLaED+i6fZs3xN6dVFIDf0H5p7QPjNbc/kv6r0ngTcypW+aL6ANO0GDAHXhw==","shasum":"8112b7d631da0a0e800290e4d3d2af111ac3ea2a","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-b8b0bde.tgz","fileCount":9,"unpackedSize":452996,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQD4Ys+SIYga/diHg4HIupOon4aPcC5zfV1xohm1nPWwpAIgJaUCfVqZCjb4zsuvaDrFlS/NIX5XEq5DAT/4GBlCB0M="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkPQsHACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmplBQ//Rt/L6e91+lrovfp0Upy+zpECr/1feIPZv9siqH+/zdVCpPXV\r\na+AbA7g3WrYffBCIMjFXW/Gpsg3jmurRIQG54YPY2RTN0TXMxt69Xf9VMfrj\r\ntJgTnJb8uzMQkRLDHH+U2HochjYVydzXXvD3punaSo3KzXkEFFXJ5DEwGJUK\r\ny1ezmTUtNG8EX69SyOV7H49ruRnLea9qBNHnMX+FGpJb9sUal6zmR8E2M3Pk\r\nfzz8hip2+w02rTMISM7avFFtTqItCB9e8OW1MNDtluMrJP/BjhPyVhOKUknp\r\nD1nNfFiFOlQF7CDsR1SXWg++WFaklufEQscZ742KXOI3AFW9mCbfMUUSqBbm\r\nAe8cPHzD14k8PSP8Mg6xeoZy6ph4xaVXnoTaEkCnDJVcAl5BTkZSBeb+no/D\r\nxo75ZntxQyO3pPgDKvxaqr0up26UrpLo+sFKuuxRadQd/j7GfTWbmnkwUBS9\r\nSp1ZWFRQl4zTUkw0GVe8bbvMhj9shwiswjVaVqsN9G+5wA46e//zlv88f2sC\r\nAQ3EumAVmtIWRb819qpYP4p7dJmQO9Xd9lvKWQpmxhJwDrG/f8DExc5r12+P\r\nJDjChR5ZS6WjmTG38XqT66vbKGUHTRb3v3+zAdE1ZwHXmTRjfysSWHyXaE0P\r\nmtKLQJMccQkCfLDKNZAn1zKW4WS66kuWI0A=\r\n=BiSv\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-b8b0bde_1681722119575_0.8440625622017979"},"_hasShrinkwrap":false},"0.0.0-3fa5b0e":{"name":"@cloudflare/next-on-pages","version":"0.0.0-3fa5b0e","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^3.14.1","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@typescript-eslint/eslint-plugin":"^5.54.1","@typescript-eslint/parser":"^5.54.1","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^4.7.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"3fa5b0e9d4609393ec056df6f1073993807cba6c","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-3fa5b0e","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-tQKRISqhYRPleRIezS3A9nniCKk43znL6fxeMbRdxPbTAzC2LEmfleKnkCEbPV54nOUpRuU0ogNFjaDXMu+EDw==","shasum":"168a04c12b7961b6f91a321c31ccff9caff46bc1","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-3fa5b0e.tgz","fileCount":9,"unpackedSize":468406,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIB6pMcNYJtx4gOgWjFsloPs33bOd1qaXFjMUIdHHVGWuAiEA9D7l572whZxJvcSioo36g1e6YBNBUpDEZBPCxW7R7Sk="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkPa8UACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmpRuw/+JyGMVimLc3pvmnXALQSSwaXreec1yI9kEWH3eqGsFne5YwdC\r\nxx0e4kKTiBm6W2O84LBOsPU2jHkbHvkC/v9Q1Grm++oFV7R3LAZVVdzJ76y/\r\nXMRg+orz5/CcKdXR7bquRfCme86Y2KAACxhR2FfD4C6FV1y42hfV0MTfTBGF\r\nv7ZyixGfNFrr/oUnw17wQ/xTdWI8ExwawD6kDlBA8kCTBOz8ZHTDOyLxJWnk\r\nAu/JGi+1e2XngSG4lCissXaZSfh8hoR3mg3erdjZwZEf8jb/0d9gt4jLSr9c\r\nxzlYEj+Z6I3oh6VQZDexpRO8RihrCha2/WCJAEjR/O0J5KuTAChdiZ9/ae1B\r\nmOq4wNLXIYa151xz1rs/WzEN3sm2rZkXH9TGK2euXitDzZrX6GottEVyEsB7\r\nAnPx5/nmAC25gj0JDw0oXucbt69vtGZ9Eh1+sj11mRtSVay8aocQo7BB0DNd\r\nG20u264y6DsOBujFgbUACL0vMr6FeNn8H6D5dLrbBDwfRbcNSutwjkW2a7mk\r\nlRv/0TaqfmKgOjKXy/bUW08ihzbKy/K3vAQOhUW8xA6SPNiToXAzr0gzI87F\r\nJzCSZMPuE/kAf/mdiXuOsPv2RG6x/Hk3Y3gygzASgWex8wGf4cDQ7ngIWZeL\r\nlSSOgq27zFK2yfaIFPWDZPsAg29didsiCI0=\r\n=4gFE\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-3fa5b0e_1681764116197_0.6800442897004118"},"_hasShrinkwrap":false},"0.0.0-84d9d5c":{"name":"@cloudflare/next-on-pages","version":"0.0.0-84d9d5c","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"84d9d5c098dad8a9d1a80562de8373180ef11131","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-84d9d5c","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-DAHVZgYOieqVIF4ZuyTYtbzHBOcItWfQzlZ6oKUyN7KDsMtHGJ5qnuushHK8gNYbkE6ks2JDAqFzQIISB4lfOg==","shasum":"becef40f00fc5cea94e7e4054ac7e91fa5737a76","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-84d9d5c.tgz","fileCount":9,"unpackedSize":468530,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIG7pVSePm9yyaBR4+ITri8Pdwasct4/6SVBsfg6hD7tlAiEAgT4ZaLTiHKGpWZAsQZSPMruwhbC2kWs3kp+C/8GKPnk="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkPpo/ACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2Vmo0Jw/7BOrlX2OrDdjPGSVFufGO/Q7BcIMfdihIQ8ftFA1ULrYClVGu\r\nvD5vI6jfpZkhbonJw0x5OUYtxCg3S7Q0Po45MdlQlcNAUxDKon0HAuMrinrh\r\nDT4SR0Dl6G8T5gkyDI2aaIJNJY3AEmH7x8Bvwmb74pAKVEsClrlqLcoVBnBc\r\nxfXUVi0nocWrhw3uekeb3l5Jq46unTHWHx6tmULE2dEnWxKAPi7I3oYvtR/x\r\nj7zZwRwBf+eobvI+UsloMcTHM01wcOTDE5i18MEgEF3YXkwDXPaYxlBX59cD\r\n1FgIDRQO/HN9NLJHyazOjoUkgxBcllrpbTHHUJEt3PBdsAILFuHI6toftMwk\r\nMUl8bRVgSJwwp+rg1z9LPu/rD9gOyD2K2DZz1zeQsfwRu3XhEDJTZdZw2wBd\r\nCEusuoq8BH76G2HMtzKs2DLB2DiX33gXIJswnuYG7XJe+PBJHLrhUJU/YKHW\r\niryUZYKBjg04TRujqh9+VgA5epkrFzTGLyoE/2zp59GHhbz9tW7Ow8aklGf/\r\nr7LMujxzIXwHOeTFqop0ANQ+wjy1DuktuBiKthqw21/MvSEt8esOfYKmmGJ6\r\nt3O2ZSYiIIEiJVstQkacbKgYbFnqqq1/BPG88EFGOxHmqzYgJVqSFnAxJ25Y\r\n259hJRGQd6XKQWW8qU9jSS1Pfkpk8OUOUp4=\r\n=C0GH\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-84d9d5c_1681824319554_0.5542007064930583"},"_hasShrinkwrap":false},"0.0.0-4258489":{"name":"@cloudflare/next-on-pages","version":"0.0.0-4258489","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"425848959900f527420016502a44d7a0c0397031","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-4258489","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-D1cF6jli/DH1yTIAQnfekbd8ADxla4mtAGxRBV70G9D1HkqhBCFIW7nk1HXjlGwAROfZj7auEqIoyJeo7n0FeA==","shasum":"42332f03cee72565508be3899a29e241f4fd4b45","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-4258489.tgz","fileCount":9,"unpackedSize":469094,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCICYC7/QAhzPW6qdtrX8xgm/lOzsT5/sHA4Jw5PJWCaZpAiEA32TMBsCK9dX+80jrJhKBe+offiTH9kWwc1ZSWRXC5zM="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkPp2GACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmrrNA//RqisNsP/+694bKKYLz/yjIeKWISGCgp0EVjoOlhq8iEH42Dr\r\nO6HIDj5jKtJD51ql3bX92l3htrHixz+oYlJPWG0EGU7rLb+xireDEdsISGP9\r\n9IGR50wnwPDig3FA9Z5touX0LqaQnrpeXRK+dKiAy2P/xWL2opcdOZMbctsJ\r\neXtjd8HwAl4Yaf3Ov5SE/9AWHAJQq8VzwkZXXP3bZ9lrBSfL1WuBRK9KAigv\r\n3bXV4IbbJstG23LMdo5NYQx9xm580z7a8GFHfTpH9pCuU0H37leiXdVtCKYZ\r\nVKVrBN8jo1GfIYu7wJ0Dye9Y3TzPa3xwumCjmMcQqcVRRDFMRpjhX+as6pL1\r\nkc6JNSPBXeJ1wSiq3T0np1kllwhkg2IoWDgG60BjlzrvquOr2zzXKQr5ewD6\r\nVGOyvJXMQqeMC7gw8OoSo4oq2Du2S+CojsLQEKCIPAr4SbxqGLwKp/MVGmog\r\nFhQ+RO/EsH/pcFr8KR+UQeQW3Vr57SSZAJ3fvA90LgXg4tbLLAjbRDwiMKz1\r\nduB8hlDr8kXKrRvpbrDeWQ4mSsGHGdfiNefLcF2E3U0XzBB+nNi89bS+AbKd\r\nMAaruVV7rLpv7rFcW2f6RaELg6B/26U1uxOXe1Yn62beZCfWzoCt08iz9Bac\r\nHA2XoREHuJFw+/hwSYK8T46TU8bSQnnmkGg=\r\n=r/hS\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-4258489_1681825158428_0.2763165737222395"},"_hasShrinkwrap":false},"0.0.0-15f7ff5":{"name":"@cloudflare/next-on-pages","version":"0.0.0-15f7ff5","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"15f7ff5e91a0fc30b5c2b92ecb235bc195ea6c7b","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-15f7ff5","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-ReurQ4D/3mepuP5xCnHkgffVFPuIIy2xytg0l1eXkTnLBXuvNcSYJA9XAnnzbIfdk7FKmev1LaJ3o31uBtmx1g==","shasum":"9027f0b651d94f9923e1f97be81d9c2b10ebfa03","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-15f7ff5.tgz","fileCount":9,"unpackedSize":469637,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIC5tRNWA7Th2/8dEgBKeTgKHq32zrMP+nkN+tmO0A+nvAiBjhnnSreNW7gqci7oChFAeIKriUA6CbpFGjOTYfP58VQ=="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkPrulACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmqexQ/+OgC2INF/WV7wst4zhzy/XgvpUIVjsjmMoB89AOp7MxPtAjkC\r\n1K2zoC0Mq9orjYzwTE0gH+3OWdyovLW+KByIAAdhPTejiT7bLVySVNkgNjkW\r\nt/tL7EWOaBWf4HRGwjpEa6NrBA/ffxAjgyOg7F/uxX1vt3ufNndI7ZCG2MH+\r\neqQG6ck6Kp+BVz6zQsH5gHu2nc9miSmLlA5V+yzcbNiROWfD5DXnVIb7WHeR\r\n0AzCiBRUWF82DeydEvWgwe9ym7tuAjDXA4Bb4koR0+YWM5uyXL9keBi7jaBq\r\nQEUUI02cTmwUrSqWj5ohACbS8uewBzh89P1jOnN5Q6ptX+/8GOarGMS18tR2\r\n6qy47kZqi6wdlgtbKy3xoguN+1XidNjxuIAWv44Cv4AUtcP0gXkQ44suTC3s\r\nOa+ITxycBKDeOp/Y1NDT90Kt7/MLQ1ypuPgh7/v5WXbdqYx1ThOtR3938zP2\r\nik9njSG3K7QUbsJ9LY6kwMQ/lIncP0UaO0lhv13ceZIpn35JhvMwi+B+otbt\r\nuxOQymSJE6UqW65wmHDHfgTaca8w97hc3Jqgiq+4Z9BUOeD/r3AtYXuQFCmu\r\nvL+iA1AMfQV9CVK77+Hs6EUZ6+3k0zTKewllrWupYEkkitSTF+YQe7ABxiAe\r\n3X2q2CkfmnRsvXmZRQg0LcZ1IxfkPzSOFKk=\r\n=FjWl\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-15f7ff5_1681832869478_0.626860993587776"},"_hasShrinkwrap":false},"0.0.0-3fe3a7d":{"name":"@cloudflare/next-on-pages","version":"0.0.0-3fe3a7d","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"3fe3a7d19d9c01cc9de071e70b83ab5613d60ba0","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-3fe3a7d","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-AU9k5Zrf1yciR1UqB0JpPM+CRaVjBpNe5ZcVgNEuDzjMaXeaY0f9jBaMLcAjl3Gsxx1bquNof+B800ok8bPXmQ==","shasum":"85172c6ab37eb4d41d852af3d7a943a71231f543","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-3fe3a7d.tgz","fileCount":9,"unpackedSize":469636,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCFuru5QiLTa2E037D0UOxyPgRbYU4Hk9ierJMEUC7VIwIgA5Jt6MVlWtuLHduavSrPAt4ESA6SVprEV8hLuD/2esM="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkPsQHACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2Vmqmkw/+Iitt/sXAflYbjxY+95A0SNnyjb+11T4f/z0LZsZ0Rj68IPjX\r\nV6hEbXXWZ9VxFWQovW6/Mw+8AAA1dnnX5RYnLaeoZMLu0e/VAAE1iXjp1fnR\r\nsa/utwPSj/m8U3fjtkR1Lg5yYKStK4noNv84HpcLsF/RBcb+RR1XKwvL7MIQ\r\nabaE2Legvi+Ewj0/GscGALD3shGeEQ2DBNlpYGHWe6XjGfvQdkjP1qVyfBaQ\r\nKMC4tQsFnewp/AAoGVqM4EizlFi5ByCzFObjdFEHWM0PPf0ErBD/VZFV3/8F\r\n6j+awBx646t3Asyi0VeakbibAFLUoBmI2cdDnA4lCkz2VWkkFh1lZ+39tc7M\r\nfStzol6WoJVRf7++vId7/xyTd8y7uGMKsp0cXCAul4xqTU9D9G2Y/9eqE8hr\r\nw/aKwjyZIKZVzt6JViATIqQSRHr/R2KOjNvz1R94/qxNzSUhVvMkHNp1ISZo\r\nK/H6nk2k16sE4ub/O7WqaASFdf4qcaI1pEYsIQCYzKsgM28yU7p+5YqP2snc\r\n0YNYMjQgbKEsR07cRAwFcGE/ovGm5AROWwPwxM38zmd8k6f28kC0BoOQ1mIh\r\nCOd9EDvJjO1ohJKzc915F+ZeGadVHqrWwNNxMeUKnX83bWRGIBc1mb7kc7t/\r\nYeloNHLBTizYVM47fCQubMAqNRa68xjsNeI=\r\n=CLyL\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-3fe3a7d_1681835015185_0.610817356450226"},"_hasShrinkwrap":false},"0.0.0-6bb5dea":{"name":"@cloudflare/next-on-pages","version":"0.0.0-6bb5dea","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"6bb5deac5b4b9c54199d6a7f40c3694f6750c5d6","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-6bb5dea","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-1uuNqqCslVhTOvUH6kdswyw3Oad5D54avTrRAAR7k9ekQvwia18nxlMTqgmkQcjC4FC+MBfJCJ+Eh7NnwTqbyw==","shasum":"c181ced4b220a0ea9b17fee012a67fcf397945cb","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-6bb5dea.tgz","fileCount":9,"unpackedSize":470703,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDxONIXca6LdBLTLg9UoQS5fTE1NIYUUtrdaiv0S9qlWAIgDj5ZtP+COLxL0/S71ivFRKb1g1XkphpxTOS/bKbSUOU="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkP7qSACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmqQDQ/7BLcfr4VjeAxgoUKWX8VwccU+XkylIQGF/qNv7vReeknBFulM\r\ne2Z6RPcm5NBfgKKvtif5JyYxWgmtWvwI2nbhqa1tNlqbSixsbtznh4BK4Pre\r\ndvBRNWrjzrGk3A7qEkdHC/fVtPzPxZn0DwsgtOO8ccpjnnkUawC5YAli7PTM\r\nR1Dk2mQGJqZtZQyCAdM1KUo49SbJjxTIaHsajUoh/eAiQObl3SQ7uSUja94/\r\nuvM0Z5BDPDHuCzTbAXJLI1CMTb+DWIOkEKoYMVhHwpp6O9GSjFP7MwRmyohk\r\nBLY1sLUd5OLXZ4UUMPgUWKv6YOhtqQ9scmc4SYDB++TWS+DQvM0b5UElbuwl\r\n8CHolZwqf7NatRWbwVWwYQXqzxdNxz9ZHbjGFHET9AkWjfL+8Mq1UbyUbkBK\r\nKoPglyiDioEfUI77kqE5L2H73NKJfZhyTWnocqIkQhw6KCrW8Wr4vINmkICz\r\nZEnwweYTs3EGb/cs8dKcvKe7KUPmv9FibceoxkAb5vheSYArScU3Q6e1m8JR\r\n7/i2xNs4oRikl0Kj+eJOBpMjHBvXLtTrQB6Y6eaLmKJztuG1XP+piY814cVk\r\nrEisFuFwlTA3+Gzv7cEXH09UMhRgNKtFwyJvnF4Lv9f4y/ucVbjREjC/L6M4\r\nqHWrslN+ENFiNK0ac3OgAD77XoxGl63fsvk=\r\n=pItS\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-6bb5dea_1681898130341_0.4391982679957118"},"_hasShrinkwrap":false},"0.0.0-4dfd789":{"name":"@cloudflare/next-on-pages","version":"0.0.0-4dfd789","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"4dfd7896b0f8ad229b2cdc1deb291f2945229060","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-4dfd789","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-RrnAVrTGgV+y7tOWoHRyrKeezcNTOIFNOEXWJGnPqcoKGNXGnr4yXcJ/DkRj0pEdLEAoKRleDn/Fat5wit/Sjg==","shasum":"6e1fd6867bdb7da7257c892095d41de4ad00ddfb","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-4dfd789.tgz","fileCount":9,"unpackedSize":471172,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIDcvfO377axTqJ2v0TQZGTgiPc7ExwFoA/dduzZTMhSEAiEAlaeav7wGxMpqAkJt45o6xNHbGr5nmbiAHaR/DsJLcas="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkQTJoACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmofYg//bDlah1aawHNQJICAadtlP5vXvf2wUKVvfhHbFv/pWGdBf/Rq\r\nlN7LgeDR+gEumg3wfxJZ/6GcVqFq4w7BQiPG2Cx0ivjhU9SSy6APgkBNET0u\r\ne7uCGejgLi/XeYktVVYrzIdbT356IVwIW7pMo17+b7ALNElEr8/xsEBQFxER\r\n5UL/xCkzFEt55nzbl2MGpJpdJXalBMYlx2F1k6CekbbTfA+sZdcbwxfhZkLF\r\n0M2MaS1gGGDyUJoVY75Hvfv0v5WtovAMi0KVfXCMhM52k7bAfhaNVDPXZQcC\r\nWDfxnerizNELnHQr6aO+5E8XocuSh68QDfgoRBCdToPGk4cX600VLsaEqktY\r\n5XN2MRtOg9IR3i9UG85h5PiPXDBswgYSYKE72x5kQ3qM68OCwG+f2qeXoeV0\r\no8UGr6Bm9hNqrPdAFN76Ko1thXoFoj7I+lBpaPRTvMLyvQ8Q54PPxZDwIMxl\r\n7P2kLrMApXUJPhA9+Pk6f7KoVH/gyifCqBP2lxiJrukyaO+kbgICVd2RPcL6\r\naRkOpNC/1vfXreZ+5/l8gK3jo704YQmek8HXtA9+h70Iwns8HP2unepZVaov\r\nqJY6X09uXLVHWleCdO56nbQ6Mp6IK1y1ESelK4CrZJ+fhnP0Y93IKoqY+kkR\r\nap2VXXdLpnvVGdMxGGi0qExUU1lf9Ij8+r4=\r\n=HWBN\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-4dfd789_1681994343992_0.3147368910235391"},"_hasShrinkwrap":false},"0.0.0-dc88b27":{"name":"@cloudflare/next-on-pages","version":"0.0.0-dc88b27","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"dc88b27a141a0b3c3c4ade7b2de1efedb25c3225","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-dc88b27","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-S/cmbO14UGkzLkLiqMHVY8352VxqfgQ5cfwyQbkm90wgeXiea0cLsTxsv+YX/mU6GeSAspfGDEnIUcHnqn7wPg==","shasum":"dc0393b8e19fcbfe65638f56b3a347b2f6932368","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-dc88b27.tgz","fileCount":9,"unpackedSize":471178,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDvNEpycOycEbOOh5WW5McMER31ahkfzi7HJazNw8F3XwIhAJFaUom9tOfDSpW92ejxE/hecNWVGs9Sdb7dD+C7izU7"}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkQZ7SACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2Vmo7YxAAmfHpqOiLWLzOOxFrgzkC/EsmCCTOWx7s2dt+1BBELljQGmll\r\n0gpmvDX84tR8O5ZUrW/GDDwEJOA5Bra5bv7MvLGAAREj90R7b39jsR87Bu3g\r\nVIfd1GTy3MV+vsH8O8ij7qbaJPlNClZ06kL99IaOq0xuTPDc9iIHjHLGuakP\r\nar7Zsvn6SNH3sbKF2YQM/ZoD84WQ7eSnuhEZDBG9evIfyieYsDf+GudX0vd5\r\nUfycsl91zHNlTb6lF8nzGKs0ZuVc7j+rnT7ENPYg/TuwCmF3GXVDzMSO4a6e\r\n4SjCk2qOeSE4jhc/gt6WEdpjG99tvQf/CHJQdgpUnHSq1qtOqvwxXuiXlC3c\r\nTdChuzGKhCECyWV+JBstyGKErey/t9VY/Ycl+kquuL2cbeMsHGBOrob2LdL3\r\n43EsdjOfhy3nN1116NRUfNYMMpBtQAyG9vX8FisUi9J1RWYG66sxTAMzFv6t\r\neJpDlhrjWlNHp8XOmHEyLKFy5ydEt5vRQLms70vbyPEEkShm7Oanp9H4YOzk\r\n+laht8oL1Cy2jyPXkvW7JeZgEV4zOETHupwInEbgsSpg0vzeK6MfvoNuWCHE\r\n+e4F6tEakFTU2oU/ndxOpA/bm6Wx0ldHUMZsMSHGrjd+An7KMm8JBr4m5v33\r\n5O8IY6BkWtwWS6GdEhTt5eJwdYLeEOfIrx4=\r\n=wyvC\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-dc88b27_1682022098668_0.8847288744981692"},"_hasShrinkwrap":false},"0.9.0":{"name":"@cloudflare/next-on-pages","version":"0.9.0","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","astring":"^1.8.4","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"gitHead":"c1998a6e1c4f564ad1437ff14e88874496aa2cdd","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.9.0","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-douwSs7rfGFRtt8qeeEJ1gXy2d8BP/LxCz3t2ZHhprlCTcg9tnBxOq308KNiVXphMQyJewUTCK+05+qpVWizLQ==","shasum":"ee79da820a82196fd6c9a386b88caf3e88413797","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.9.0.tgz","fileCount":9,"unpackedSize":471072,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCEF2JtToxP/l53DPxAqVp/La8BgMbpt3dOFcSl4G6IVQIgc64VIQ+0Qo1nXI7UVyJ3jz/R4Bv6BetKiuvRryJQ/2o="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkQaZFACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2Vmrk1g//RqwLbh1r7eOZA/KF5L09WzcM4cuHylGkvWSBExR3bfqc83KH\r\nWrVPXULJ27rLzxKaz3u+9HFYkZU+IgcQu82FblilWTR55Dc2BqcU2qiIVqLk\r\nvLApEhfTaqW8BkI/Lmo9doRYblSSEo2vnbuyhG4KK3+HRfNFNGEEipKB8rTX\r\nHBY9BZU7oof9x22XJH3/PTwGqCpIClHxE3wtHMs2a9fR20bqYUzjNHLcGPo2\r\n7KJNS0dz+aJVPAjp2233UBSQF/GJm0zOnGCprgxZb+14/lGK3t5rBn0nBY8q\r\nd84G0p8S8tY9x7D2lLWsgLOEvVtny0H/zcJ0eiBEjp4h1eDxaqLDt1a6kCfS\r\nwwgWTATQHiswAhm6k0+knAxXI5/OeVmw1vNOChM5sF6Gqz1bVlDFB2Jem9dr\r\n8yTv4bMFgclBYvOG8R6mrvELGbtTiQrcBuj5YN74gXDIjeClQsbOdOscrpj+\r\n/rUcHQ1VdO1ESMTIkrRPfqUj8y6yYDMGzQE8P0maAGPdl79me3DGClUFT2ew\r\nBLFbK5Ov36tAELkvGQcAoE0mzwEx0oJpbYhiY+s1ZSzITSt9q/cio4FgsjNQ\r\nIyXvh7LhGy25BCeYiN9+v+Qc0JT6JHjLyAPxJU+VKlpp5f1eyvIFvdMiqWdT\r\nRNKzE5ttuJsRt5WlOyUWlFIuSf//CjhHus8=\r\n=To+t\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.9.0_1682024005322_0.9544690911846523"},"_hasShrinkwrap":false},"0.0.0-758f588":{"name":"@cloudflare/next-on-pages","version":"0.0.0-758f588","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","astring":"^1.8.4","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"758f5885567c76ca78a37a97328df85ac49fc5c4","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-758f588","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-giKsLM+aEzwfZ82rJv4ZywKiaWfv8ZW3Pg/jIySvpE1X2/GtQr4rLmHY0RZGKU79QJ87cv1F+6X6GZh4N5ns2w==","shasum":"28999846f93bd3a984bb5b9a3e77748b0f4e6e24","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-758f588.tgz","fileCount":9,"unpackedSize":472513,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCO8T6ZZrYLXixWielON2P2974J3aNeivzgS9n3C7TDNgIhAINk/KTkexYHgHh3CASGgXdtDhn/0kyFxn2HRo3eNaRz"}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkQuQaACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmqnSA//QmJRrDO4AYr931QV4tljkujrs92SvDVn+kEiRsLRxWibY0c5\r\nLDZCsgVfnXroJSzd/+Hys0Mib+u4N0PzztRrNyRGNSxa/893ACx7IbC/4pOR\r\naNOtQQtObOKS5eH+LFgm9u0jnoyjLqr8KGfRtqMTeEdaE1D9AIqk3Ipg/z5n\r\n3mhjnEQuhKTo7zZKc1/0Biy6osHCg1YCUStuWdj57U6IBPWyHXO5OH0tQ9py\r\n+zcPUB8VhHcej+HkYS5G+/S70fcnpjcyGdV2wQQxhnND4S7KBWPy6L5Bz+zo\r\nsr5kin/YLUirghRM1dWix4qFzsAZTFenK7gA8Uev6g4HMlZ9yBqx0dVUPOnf\r\nbBUMZvp+cNFERaC9m8A6bpiXBJZRf9M2xfCAmd6ZXqhlvzI9Jpu9PyVUQBYn\r\nUbZeawfBaYcBxkAz8u98IwKqxcUyk1yyx+b5gV+3Abq53Kies0xwRZLtqcqt\r\n6Vwb+V5Iz3lOveiyP+L/sqkdkRkar/SabinCpAyIlVhP1VfLtMIKXWWd7tnR\r\nKaS17TlkKyN++lRfNrlHuczPsUlYeYJjI5yxb3slOaczbnShBVpDvDh2G8mf\r\n8QRUOPVZ7OwapqE7nZe/oW1aIsjMhmannPAnkmcXJgTj10Xg5GoH0jKj7+/O\r\ndbLxKItXLdSWxK2y7qE1be2llEg2HAa5LOI=\r\n=1TAr\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-758f588_1682105370425_0.18751674599779"},"_hasShrinkwrap":false},"0.0.0-e3b92c3":{"name":"@cloudflare/next-on-pages","version":"0.0.0-e3b92c3","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","astring":"^1.8.4","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"e3b92c30693b5fc22298c16df129efff8840fa2a","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-e3b92c3","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-pnP/cytbtDQ805JP/CzdXiMdfYZ55HO3WGNkx7jfpFVx3ff/hRnke3P8aLBiinA5f/1ouvApWGhF/pWkW3bDLA==","shasum":"64249a5778f61e26037ff75553172d3dc5f21945","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-e3b92c3.tgz","fileCount":9,"unpackedSize":472532,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQC3QZSDDCJLnIMf3aD396kPmetf0yn10gnIpVRSbIee5AIhAImK/72oYAUnmahfM20zFuPOzyZnIi7MuY0KeAr9+vFm"}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkRCBfACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmoOLA/9HIEs/oYt8rEWVwzjnLyUR887+cVs9WA53rcsoGDu0tYOFEqY\r\nzguC7c+hfCsrK3vkM6xwPliwulazaMccsJmeqlS6t1DwlVlKOA+EvDqa66bP\r\nBdBdAjV7BD837IjAidRUmhFUu3izAJyiaBdaiAXpc6M7LrvK4GAuOMXxg/TZ\r\nSQS1K2iZhDxzomCJo1p2LXSQ4mrSdwy86eFdocKWJ5hqTgz6pCqsscOkxPtU\r\n9OdYuLTsVXKDkB9zPCgacCGFhdwqRjTP+Gbhz5RmdFVSb6wLl1HzT32cGM6Y\r\nzRY0NQJ4art0sTORqIPtaZVrf2wZPfQWRQzAaMHjw+b0MH5lqVOBctgCJ3TR\r\n/e+oeuJtPV8vKfKtFGDtgNUp3vbg3LIYg3UBnMl42mxnvgQvrN/U8f091Xce\r\nT476wBCuuj/zzdq5qwkedb9icfV5IaQPleZ1GfSVAWabh9XbT7CVwNtk10qf\r\nAX91Aeq80BkdHR6mkMbZt3R3qaDIm9zN6Ck9U2a6u3Gt2hzQVKh+Me6hxy+r\r\nLKxSIlGIHxC9qVk5HTUJRgMAdFNHuL1cJnvjiDvxuKFeqv/xHw7EC5/JMaIA\r\nIl1FhvnKzWvVsvjTA7gDs1TXoz8UpxOdQL6KjIFxIIZU58fNE/Qnu4EznfWN\r\nZCDmS5W0/5yPBpeGoV+3nbF76ywJXWk3PTA=\r\n=l7nL\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-e3b92c3_1682186335516_0.4046423208768517"},"_hasShrinkwrap":false},"0.0.0-4afad15":{"name":"@cloudflare/next-on-pages","version":"0.0.0-4afad15","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","astring":"^1.8.4","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"4afad154350b8c225c4c71a3644ca9b1672daf7c","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-4afad15","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-f9+Khsk4G6j+X86n2+DSAnYKKeZeSN/xlr4uKtmU6vfO8Ahx6FGWU19ut+DRfFfW7GMSxS+qoXIO5N0pk4Vn1g==","shasum":"e0510dfe724f868d536053badaf29c10fe0ee9b0","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-4afad15.tgz","fileCount":9,"unpackedSize":472699,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCh9v1gD++X2jzK7noT6p1QHd/k8M6pbO1ppxWjsTXhVgIgZJSZqhYUcvPm4m2urbZWIXH0rlnG6cZdrebUhZtcCIc="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkRblTACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmpGDw//YTSiJN9itPTgdiVk5+GC9i0IcBRnUfv6NXOAr7a9oHoPEb1m\r\n5ZMJejdk7OYBtDQgOn2Abbdjn1ebYRY9rgoBlsH+VKqsYWzKnjXe+ufkoXnD\r\nvTfsEBrQBoXgdNtgYOgMNkTf7EJ1i4pr5pzLPj1d3TXE9Zu1FbCKDrgt6UC+\r\nfDZPIdXqfN7PcHELPPuKOgBjx79O8gKnCXjIbpHaJAoXSRbN42u1eJK8pAw1\r\nL1VjnNrdGqohmeyiQcOYZMGxf2ic1gytn3SK8KuHxizumcPBWfS8ds6OC6oH\r\nUI3lw3ZVCTt5JXdYb5+oJRKBjCS0xys/W7oNfVjB6uO4IDimxOzl0f8nH5Tq\r\nsF510Xokmr20L4Hghx6MQEAXiUwZNCy3LL1Dx/cZBpJP0MuZpC3YC06mxuqU\r\nSU1FNPH91BaUV/i9qrR5wRTV0FH/tlftTvXPSxaPWBeAJW5agJ6IEv2Io++I\r\nCV+N4vDmfs0a4cS0+MHWWNJBG/9bwSh22iA1HT31qu11arm/4ZrmdcRB0gpH\r\nwr8JnqXrDaYly8SQFyDrIvTvsopHH1xxTBE+01Iw0zHSITt+OYQdneHiWpe4\r\n5HJ6VR1QtXPO+pxuouhc0w6y0U3ARF4yo4QG9Fq3W1wd425Z86Nwy8CukSQm\r\n6Q4gNESW/RSW4SqMYrMwAnQJs6fqd47oJEw=\r\n=uTAZ\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-4afad15_1682291027571_0.1049492541330117"},"_hasShrinkwrap":false},"0.0.0-2a159ed":{"name":"@cloudflare/next-on-pages","version":"0.0.0-2a159ed","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","astring":"^1.8.4","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"2a159edba33c274cd2ab8fec7675c80fd3003062","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-2a159ed","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-484zmeGriOCdUzlJA1rn10vyyGVdiuLH+cwPne3Oft6ZveM9CAVOUCybehcXJmtR8kEwDfNF7QPKxfAeyk4tBQ==","shasum":"f95bf20592ea91fcea66646915a05cae50ee3943","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-2a159ed.tgz","fileCount":9,"unpackedSize":474552,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCxPclhtA7qsMylQt3d6CbMSHPdM1zmScbJZ59rPmNkYQIhAP0983QOf/TYiw/+nP79tORgUplSd5Qf65Q8HD/zOOwb"}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkRnS6ACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmqGEQ/9H835K8dMZ6bokGxI4ArY4RjD/xPT9T9VQ/WBv9wSmKugWAuG\r\nikVTaeQCwmdMF1q88v3/Q7pF8w8MN3PSL3pUdFvDq7oz6E2LL9hCd27c+OZt\r\nkVNDiYJBna7S/ByKe2N7H1SI/7M24fwa4sduAkw5X6CqlctFc4dpEpUkpIbk\r\nz+Tq7OLz1Kmbv3O6SWqTZycNRcSJgo2Bn/mcxBe9Ff/ueefr4suwUQqhfQm8\r\nqhXHgiG1eYBnteTlm82BESQGI+ov/3hLCRDsJuzVlBXqStibqRy8SCpuO0sl\r\nVoNtTA+AAUK1/bl1lEEVfgkv4vou6WO7Lki0xFX5fJi5dX+jEdRqJSFVQq1V\r\ncGi8Gi5GcG1hjTjjl36WC58/Hp4REf/8MUhgItPj4k4Czec+Unj6pvSCOmhK\r\n6TQ/dcDNxyveIlncQt19R0YB1FZsBr0+tuihMFJZNLU92gBG9iVND9cZVQBM\r\nuL9XaNJaFNAmZzKQTFlLy2dxmR39GbwzdTwJ38zD57RfduRoKBiD239+BZ2h\r\nurZkZcP94ymxvZ4+hsUjYoXZbnZqvOQFxyuqanTjJlTijAetjsMswtMZIHn5\r\naa0g2x7n63UhMlOm1MNqdkGi8Cqu5i2XlFuf0A/0YCQQci0tW5DdANY5hUE1\r\nkq/WeaVSWqnjMts3MI0GkgZA8ja71OdFCGg=\r\n=+wgA\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-2a159ed_1682339001857_0.8889089027151083"},"_hasShrinkwrap":false},"0.0.0-dc74ffe":{"name":"@cloudflare/next-on-pages","version":"0.0.0-dc74ffe","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","astring":"^1.8.4","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"dc74ffe6d87274e6c8fe8257dad21c2cd5ac95a6","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-dc74ffe","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-uXpBAHB8LmuGk/+dcs7AAs0uQQcjWHB0oKW+62JR6LdgO99EB7VqUNYW+Cj62+mlYbP400UH2f/6wbcDVzaJlw==","shasum":"7135aa5d60aee031067fc9577630440e2401d260","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-dc74ffe.tgz","fileCount":9,"unpackedSize":474580,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQD7/Ck9cH5rGxnIQzMTucTuGcn9tIFtoUkccIpMyJ56yAIgOZjlVjCVUO5gffvrQbF98HdZgJhEJoNh3GPjFd6AHTk="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkRp23ACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2Vmo8+g//eZ+kMeKm2CxstyFTEWRoBv4sfeiVWY4SIXDw1Qdyz26gaxfA\r\np08j7E10WgjkEE3yB08fiIGhAKGNNHWXVZvxkHVD+K6jcoxhO4cv6beBI41v\r\nDhqeaNoiSvph2aQXLCBd1hK890Cv7VHPUtalcUd8IIOQVrwAFsZF02aEDPUe\r\n5a9g9V6O4pBGlZkKpMjrqqxvXRWxej1bA0lfgy3CJjjU4W56wV7dYt+WLl1c\r\nm0xtuhoGKki/x7ZERYatkNi3Wj4daE9QR5reWTua4xpG/v2/FTwHFia/7STI\r\nUhsYdkrtiLE7VLl0J47t4hA/U5QZ7jLG1oDP1xTC8zFr0Qe7/7cRfxjDnDA0\r\nhtlrSnOUsWM2fLbk2KgD+IWfnpKvmG7Y41xpCMSjfGlK8CfUH8TEzGHwujhw\r\nO+xaa24gKjc7sgk0KzCIpeXCc2bgPhvF3js0lRxFHGBM1AuzN6W6pDCUl4Yz\r\nf+EfFag56qf/Og7gyvow96oDN5QauMUmNCZW4gGx2Z8VNg6NT4Z45dMssQHU\r\nanNAPrpY+fDLmCScGRLlZ4Ztk+I2onY8y8J4xxURzNrc6ZlzuT6j23DNjjt0\r\nkvahCjzDox8Co2d8HDLpFI1YwE7/PY2iH3bZyILlLOnt3Kqa5QiJ9Clp+03n\r\nDlL64ghZk7HqIxwvc+vJnYs3x7sx1UX/y1A=\r\n=S/MF\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-dc74ffe_1682349495276_0.9953396368314076"},"_hasShrinkwrap":false},"0.0.0-cf43f44":{"name":"@cloudflare/next-on-pages","version":"0.0.0-cf43f44","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","astring":"^1.8.4","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"cf43f445f345aeb0f3be24f591d2a0a418ceba22","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-cf43f44","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-LTJQu9RIlL23WOT9kbapQWUpManVd+3HWNiNyaNVyYHaFXQLoej5hXLhuNFEE/HVjyso6IaP3zZ7YHziysJ8hg==","shasum":"8a857c2df87ca3919cf08604d08c03605bd2f202","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-cf43f44.tgz","fileCount":9,"unpackedSize":474580,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDFN5GOCbmiJ7CYEg+h9mazpnNMOF/CETVEaDfUAluWjwIhAIVGm8WdaFK462E86artdzST+7FTEKrdlVLMo4sWDgia"}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkRp3WACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2Vmrvew//U8VD6rLvKcSEk+6H8frVPPjA6B5PotLUnUqhd1rW5J2hbTcZ\r\nvNqSNvDKj4PF+golp3cb91YiVxf2pzAWevZLRpEBHMCBH2/KTyFP1LAmDIu5\r\nxBHXX5F71FOwTdwWArEGpkeXPzzKnwWAExWBNZ9DTiVqd1ia6Zv7aE1kgE/N\r\nmKHHV25+YQ8xSiuiCmxafZn4QWIriTjIGxsHDvqk5ol0RduzI7w04VxtXCI8\r\nUi7qHBb8JY2nEL40di/I9lRq3DKwjqLkkgx/49TQ0Kt0XzOxufJANQ8XBLwz\r\n9jzSaBpe5rIZQN7ldrWGlOgcE91hDKc1L0Qmp9Jv645eU7SDT8Q8xbcibUFo\r\nQldejq/W+6M4x0S+PDObl0jzgu9gxMRO1nHvjelzx0XLCL8AisTlsr9y4YiV\r\n2kXvSBDFthdldTMyyDNLQPyYqqxUrcPckMPOjXhowiJPCztvZqAb+a3reUN3\r\naChbqEkvGYbT5fQhY5kc8skKdsO7mkQx3wnFtpnTwxT0tMt4SmK7efebkAsj\r\nsJv0RhvzB1U3Vbuf75YawCVVJpKZPTEEzfNcPfCGyF1W8B/HH/za0vEDe1Y2\r\nmFkngiujukFzZRE/ie3uivvx68amO3oi4WTMmdsC+8jYz6SIUpuPqTkWgGqY\r\njjXU3Oyrlj76u3pkVfjvVkxBJ4yUymNaGEs=\r\n=Zur2\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-cf43f44_1682349526482_0.00928244272880896"},"_hasShrinkwrap":false},"0.0.0-60e375f":{"name":"@cloudflare/next-on-pages","version":"0.0.0-60e375f","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","astring":"^1.8.4","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"60e375fc00bcefce6f4af630ed9ae7046b6ee179","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-60e375f","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-78gF5WCdbzC6xgZlEpXxEWynUEu5pCZZhvfJJMbI0LJIPdandmz9zoaCv8yiM9XNVQUu443ETmFxQWexnNLr3w==","shasum":"f277312e28ed64a42ead454c73af436a3d9dd330","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-60e375f.tgz","fileCount":9,"unpackedSize":474580,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQD2jpHEcSCDew8SwZoCC0pZwmQO/1/LYwmj9J690zO8FQIhAKkhGB/tqu2ytt697k5tkRsuE1xiHiWNGUK55TrlUaO0"}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkRsVQACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmoT1w//eLIOpkc+ZiDmKFQI7rlLSAQlTm0//yU2o8JVT2zz/9/DwSdE\r\nnpjcTxsOxfjfXlfZjHBbE5/z51G29zEAcKXtuS1fxfDfmFsnbvvp+xTQpyzv\r\nIC7rsm9vJ2lISeU49QaSX3hgSaoynNLSZQVTpHMSB4XYh+PyElKdgKT+rxMB\r\nt3W4B7xQifnDV5JLcPCvCUAojQPr2hdKJZ1dY8dIyUABjpPDZn1IbnYX7q8f\r\n6RMCGihAPkIubJnKNGC9rjoItMbChFWT3yq1tg3NEyOqVwMhibDzvoVezCWj\r\n6lln8HprLPxUpOrBEbwSs3H442GxhOKcL/n3FCiugsCk1zJCrHy3iJtr2574\r\nXKtM+fdWP6b06liRPXFOvJBBpnETbbNMEF79NS8NFH79s+emlj+TUnjs8ZkB\r\nnzSASAyTK0KlhVVO6xDe7nzfE9LjOBIBQKXZfy2FRO5XxsPN9cx0JiVXXCd1\r\nMOov0d1Wyle7gmR7PV0JpEr02P1fgCYLwbwhyVgVboHxTAwC6taqFd489zD5\r\npHba/YAmMJ/BFAiaxsT9Iu00lRgEt09vxMsKj/i2t1Y292BXkd/0j5ooYuYW\r\n/W8rh9hZbOiFGXQHXyBpGT51jEURk2rjkMlQfvwJWbHRlzJtsIET6nlZkh48\r\n1j+FXmOXNnwWiHn9IbRzbfQpPG7tBkYIECg=\r\n=O+we\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-60e375f_1682359631823_0.6093396904032087"},"_hasShrinkwrap":false},"0.10.0":{"name":"@cloudflare/next-on-pages","version":"0.10.0","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","astring":"^1.8.4","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"gitHead":"60e375fc00bcefce6f4af630ed9ae7046b6ee179","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.10.0","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-RWpJAom1XbBOcFSykwNyyoHYLJQYuRqa2nLP8T3DS3hZxc5efD1HEDTydNnzz2mkLzc/cfnV/UaniefxUbSwGQ==","shasum":"35dcc4228e58b71658b6495ea12edd144a716a87","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.10.0.tgz","fileCount":9,"unpackedSize":474476,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCVxhg4G3nS4RO++M9nx7fyUEla335Y0tt+zhWjd8PT2wIhAPFCX9yiZWtABXIY3ZjdJ0gtr6gzgaapj1NcaYKyOwAU"}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkRsVVACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmoYMA//fvMVBy/uyyHRgbxZR2E/vc7p94JVj8vxDCtvpevTlb1GlmAn\r\nszk26pCj1lA4Gf6O8oGD49A0/covajPiJLT5xvCJ0LMoS5dsWPSiFTtVY8FL\r\nDcD8NfcgF9GQq82+BK/cGDuMNzZL38Co+pnQSsJBp+lgUaFMdxZKoMcEUBGl\r\n8QF9KZ1GDnu5/WDKwpUcOO/fbEu2pOjSGcwO2Ox/Jv3DNj9c11t+4IMBJUy0\r\nMb8pFN9h9Lt+vFArhZxd8BF+Vg6yMYFYruJCG9ITbmc0yzf1HMIlJ7+vlACC\r\nrKaLyNa3Zu4/U/aA8zAGVsFmje5kysHidBNuapTQJMNhUUPsggREMt0krt+6\r\nejIQEZ2ZXnApMewaXtFAUPKtdsNzcV7Vb1KXEyK3xw5AMsccvQWdVxPVCcx4\r\nLjtR8JLXya7yIRWM8+nEO1/EQcGayr/Gi0Ek30x0V6XPYP/Q1vWh+o55tK0d\r\n743DbN7qpBmuqiRPp1MwHutP8by3u70NEMx2ejYbB3dBM4/P5eztahQJZy9V\r\nxyaFnxYHUjA2FJEbBnq74UUb4msDGvJpOojBmRHzkHNAE/72bO7ky1IHIQU+\r\norMGHxtF9QYN895MdONd5bl/6GOLAGZtfSRiC4/ZDw/FEIIYmqxXomfsT91o\r\nzQ0oliZ/pKeS3Rqc1aHJrHrVlswcJmZfYiI=\r\n=4+E/\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.10.0_1682359636834_0.35886192728846655"},"_hasShrinkwrap":false},"0.0.0-b07e3bc":{"name":"@cloudflare/next-on-pages","version":"0.0.0-b07e3bc","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","astring":"^1.8.4","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"b07e3bc5e0e88a07372748dba144c19604f69cd7","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-b07e3bc","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-TgexAm9h3BwzID/RnbRjixwLOg2S8u1QHz3QX1JF+bbbDrgeKTMsIf6B3kf9RQb+uy61LKoMYjyinmvg+PQBlA==","shasum":"a3d071de7770d9082cb169c096b9235a9946d23e","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-b07e3bc.tgz","fileCount":9,"unpackedSize":479108,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIB+qwBi8DY3IBr6oAxg6yOCAYUwZqCg57oU8NO70eQkHAiAM0G1mpbuVvZ9quDbV0GkSkz6IEzYmJBzLGWJwKoFRCw=="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkRv3cACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2Vmoz4g/9ELM4ZNPfQYB8FvREWGWA8rjMSFSnmlUcjtDK5JUubsV7Iz5a\r\nf1LJPvSYdpJJp9rCZDPe9HDIzxWu/JSfEX0wmLVUta3NmrwO5q/bejUqzkJ8\r\n555ITjDaA2hx1aO88BJRc3LPfS9qGQPaTBEbWlfCOOXlXKxmI4CkbJo2e5Iy\r\nf018q8/qJ2p6CkuRQj3IJKi9tL7fkC2QnzfTyCViivM/GUAhJz+1BXWGzaST\r\n4ydKqI5CDHSw5hYb3YWiaJgGGsaQN1x624yybN1SnVPl2hwH0PBGZ1AbVmwp\r\n5mRXxylU7s05phnkA2Z8mvhjYab7quT3OqOpfeDCg2fTPMIVkKtv7+0EuI48\r\nIvrPRs6O8FjFFRd721Px24YWh8yuAQsRk6dbP5W+Jh9RcHI2zczBqRgG2+OU\r\ntEawg4sKpkD+gokjCselPEAZOSHPPl70WQSj+EuDssQaLVIIuGfvQ66ORGWW\r\nMOVQqUlrEn7hu+0KlvUUZvpRIFXKQvs+4U0NDqhVzsp4D1FbTQH5lF70lnKa\r\nChFLDnJaDMyD5WfvVOXX3sjHAcv8qn0HocvHQmAOu+7vFrDWz1bGwmZ190j9\r\nLL9PRRY0ULyuOgNwUFMxSsmy15qzbRzeMYJJ8H9fu+NT1ZmQgsqmBYfGaE85\r\nFTUZkkgH0b/STXYgUh1qIJURbRjfY7N20hg=\r\n=E0vh\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-b07e3bc_1682374107721_0.1381082892008516"},"_hasShrinkwrap":false},"0.0.0-bddbe04":{"name":"@cloudflare/next-on-pages","version":"0.0.0-bddbe04","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"bddbe04bc1d63b93cf88886a4565cc24ae8805f2","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-bddbe04","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-RlZoSj/Kw9NWiBH+Hn5rjlFLoVZlds2jR5YkTVToQquFb1Sh16N8jcKvug2yz/U+AstEzs8r18hUGOzI/FxDmQ==","shasum":"ce9255c3e10344aa1b9cdddea4c50912434ce4cd","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-bddbe04.tgz","fileCount":9,"unpackedSize":448690,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCxwV8yKvK6nWa/0HXCAbtpFk4S1O9OjfWknK5cDGyFrQIgXlLO9/sqcBdqsHNcb/dh+QJ/stduBJU5ZAHKH0VSY8E="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkR6HCACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2Vmo+KQ//ZCJlqwv6arH3kg1ME2nyOYaxlYhrPdXgpc6/1+zvK7n6KMLr\r\nyScTKZn66GvUBdpwYWQd/LwGdpaCwZGV+ng/P/yhoBHGotxZvSZWdBFz8AM6\r\n28wa3CF2QpCwmmwc2biMgOuSLS4Bp1akPym1++frXIKL1DPxepx7FaG+NZI6\r\nWSmE5cMfJYwNy4sWi2vYhWdXRJt+Fu7VNPNxDtL89oCbSiLYzpaJxQN4eC9j\r\nbNeM1bhyxLv4AMppJ26CTyKMT5KSKDYZcpAi8tAtUa3+2tMcytre+XnpkksM\r\n0aKrU9HpLV4G3gfYrtT5oBTnsG+FOOgLj6rczc0VtogxG2AFihYWzwfaLiSY\r\nE6krfi5G52/kdEdSGJsYbXSiFz6hAA7zrrvzkM78cfjL8g7kkyPv40YaYe4t\r\n7O0cOfp630FA//AmF9wACaqSUg9/emdqYnC5IaxiZC03hBSRwxG8Td2T1lC7\r\ngP7Pft80QPg80OpzNR/MQaRzbUcLECs5tMvhJr/GxOAmO0l/DYhGTqDJG6Y7\r\nzcbg7Ed3AlzqpsGK79IbxJVQ47POPcKGXmEiiwrSrPFMxnmsucc+eCVlEvdT\r\ndNWi2tkjtHWLCd23fL+VD20JG4E+5470u9bboLnMqqGJF06WJLduK/nBlRju\r\n/zMKC4eEH5rUnjg1HGDbb0lkhxaZI0AqUTA=\r\n=Tzi0\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-bddbe04_1682416066467_0.8320030410708812"},"_hasShrinkwrap":false},"0.0.0-9f5b83c":{"name":"@cloudflare/next-on-pages","version":"0.0.0-9f5b83c","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"9f5b83c31a9434f6a689ec83565d3ccfdb151c68","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-9f5b83c","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-BOfrW67mf1heE1GFd30LaGxShp6yxoL4/noyBcR3TJvBSJWV7o1+ElWjquofrA+VUMQSgPthSNypae1rBiwbTQ==","shasum":"08d087adb06736082bd845133b172b22070e8054","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-9f5b83c.tgz","fileCount":9,"unpackedSize":448674,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCE5dP5NCfFdxlYGn0SIydAK7YjRL5J8SV8PW4grGTKVQIgRelVO0yzJLUAinzuEGL/znkvTepWMUU7TqQCGLwt3pQ="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkR6c6ACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmpsEg/+KWBF8ZfYe572lYae7gXOwDilpN3nGx5Jk00Q6TY94++RjAyF\r\nUxzwhlMA8Rl/82flkM5Z70BXlBMEUd2t3Q7phUmpy5GVsSIDVn+/w/jRB+FR\r\nKjoF/amDBEK35XE2JhAgYfpDlPhNsc2l/wOO3hxKN5KY5Tuu3lG+4+E1TnIp\r\nKwsWgaz7xamOPesf/qWpgHaucpNJGcWx+PiNcBirL7WO3ul5dK+FCs5Ene3x\r\n9FfeQTg8nQgw3KtI01yo0pt5HI998LZUb/RkrnDzWg9lJ5zJDuEyeD5jR99K\r\n5/tG/CgehFSyPxtLMQg18Z2v6wA/2j2z9E3LvjohF9zmzpzeADaAySCl0tNg\r\n2nyLyNNcfdFNC2D3pR7wM+4MbMacP1qVgWW/wVBtCiaQ0BPv/Ns/htzBecQZ\r\nRS3ddivIs1VNxWaBLolaEwEalcGuVq/EjjbiXQcteEHqUpaICBsbuZQl/JDn\r\nOxv2W2eSTN6nsuC51HNXfKH9L3weoOxwM8Mj9MXGs2N3Eg+QRteV3rnaV0by\r\nhN3usoH1i00hVEJRZXFt++hd41iQcAf0vTX60gpdgE4x+xcYRwDQqYC5gYyF\r\nbYtZGLb75IPJ7In/bHtOX4lwfe7+EPpUyBsmupkQbk0mjWnY+BeeS0sGk5cu\r\nnS1Z9oTOzzNSnlvN/B+8UZVdrtVBtsuOQSI=\r\n=kxgF\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-9f5b83c_1682417465843_0.5419137625345587"},"_hasShrinkwrap":false},"0.0.0-087d393":{"name":"@cloudflare/next-on-pages","version":"0.0.0-087d393","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater (`18` is not supported yet, See [Build Image Update Discussion](https://github.com/cloudflare/pages-build-image/discussions/1)).\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"087d393a9e4480054333181b1b8bd4beae4b19f9","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-087d393","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-vskUGtXX/mmk3fZNN/Maj3v8t9wdpPDIw5iV5/7ya0WmbeB9fh9aOhAkFhpUaiGiG/txA7jj26unvhW+uJ+x1A==","shasum":"01c116fdc42f519e988a0f6d63d531e10e23455c","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-087d393.tgz","fileCount":9,"unpackedSize":448674,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIBCbj+iWztTFXc4YodvV8fTNehk/7PAGKOpBvbzxrLtTAiBJk2srVK42Op4C3vhLhdbMZSRQbKQzw0v9dCoAyAKdnA=="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkSOREACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmrTuw/+KMfBsR4aTe5bfPMvYJZh1UIADRy2bSWxb8MoA9GTZGVwUUEw\r\nHEoiJ5YG2THB7+pbu4QgIOJcJt+xbAujjl73MHZDAfWpwpKG7YuseGEby4K6\r\njyMSzso5yTm8FIv3dgLzs3Mmc37DwO6blB8umJZ/zoeJl8aYoQ5kz4S47D3e\r\n06/c1jleR2zNr2COk4Lg8rZQSz/379jt/sakgs9/OILQsaPloCk34t+Za8QB\r\n/zkw7KFiBdVlQycmOubAcNLtPZHT5GxWNkFSepGRTQzJquLW8f4jq4H5wLpb\r\n7vYu4sj8KNXwmH7v+UGOyrnIIH+khRtNrZ0QUZNnDJvN6G8G5XGDU+KfS184\r\npw3GRDE3TYhc9kFt8PsJAWHT7M2TzGUIvw4+hEKJeolwzAsxuzBFeadABaRq\r\nh35tVA02fNajquKwltvd7Xx2yXx2cXBFB/SUD4339E069W7vba4SiWYuzbRL\r\nGX/Nltsl/EM5nLvK7aXlCFrDoMk8KTGavl+es3sBxuKP+BYJJaTJli+JPxqA\r\nloKrlCjsYR+3EQrK5wMqR9frb17FzuV1fYAFwvLQ8g2ZXx13jMW4xcxhgI5o\r\nt7X0YRERw0nr0W0D051+D6sbOLf2Hdo4liell/4oLh7IPDsk7hybv2/cApKj\r\nFxqEJNc/tsEQuneIoJ7L5sVgf97SHtSMyTY=\r\n=q9hF\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-087d393_1682498627980_0.457533175190189"},"_hasShrinkwrap":false},"0.0.0-23aa2df":{"name":"@cloudflare/next-on-pages","version":"0.0.0-23aa2df","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"23aa2df7bda7769340acb55fe823413b3db9ce75","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-23aa2df","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Qa/2aR27G+dYzfGvWqS5K6oIYnleSSYZY4JIZ+w33lOybSPtAGOoL5W24QG6dF7wep8c7V4xxM96wEQeoLxtJg==","shasum":"57a2ed89ed095c20531ec323c692e773297e9a33","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-23aa2df.tgz","fileCount":9,"unpackedSize":448545,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDMURob3QzrZtVKCw+RVbXCY9mVhZNuCMNXQ8PH8K6luQIgSgEY0Z3Ql0aTrkkGiG5AJRpYMi4gAlRbGm7BZGyMOTw="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkSOo9ACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmrKhQ//WqZoS6+4j6JEnAB7gTgvNGeb6lItwyY1rkmlZ2tadgS5RWM+\r\nXzo29J90G/uRivE1IKNsM7nvymxXLxmmNuK7XfT8xQ/w8rbhkh52uw8IPdKy\r\nbrc2eGXTTvfTWJysCX6Cr5fDPs+h+NomlQHt1Y3Tfiy1NVfg0lyTtlQd4AkP\r\npIo2IUNwiT2m3NFTyQBZ8nSvtBcbtPK39l7owyf5IpSwP4xo8WbymSlH51kl\r\nvjFV3Ihs1ZU9b9Wc+85Rcr3DtpnmnSj1xYVpHd0Q3OlJo0Yxqc4KJNXSgdPj\r\nS85a91gT3a6MOpnCj4FUGoTrDs8ermpU4apSnRIn517mjff1jfRXFEBJHrU4\r\nWw5bsPsP7+GO1IBDOrDB/7u/qhIfFmQS9vApBpFGiMmNdlDFIEP1Mlmh6v1C\r\n6aOPm4Vg84wJS8UMMYAWVnh+ZX2PdMRJbsNl/ekm5SyqjOjE9cxU8jm4rnLu\r\nprNp3gO+vSVJJljnJU15bl/jjqhWm80eWV9yZTq9WFZM5RC8slu8a98Xm0Gi\r\ncRl9tZujLu9hLGwUyLONeEOidxanNlpdnUMwTvsV14h2UiHhOWW0umIIs1GJ\r\n48/77mxH+r/rifXUCOUzv+0wIMlMdGDL7/lK8M3TXlJzFgdsGdsW+dBOYKOr\r\nzWOmpctIvxN8FBFKaIpBrmR6RG+74CnHhdc=\r\n=OPt/\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-23aa2df_1682500156967_0.10141505195566713"},"_hasShrinkwrap":false},"0.0.0-a680db6":{"name":"@cloudflare/next-on-pages","version":"0.0.0-a680db6","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"a680db60c182b6096657c5a381545e4a0c19995f","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-a680db6","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-L0jbhdvgSzptTIEr59+aOt4e3elrVc60ETF/lIYD+0GObQN+shixPx9wPjuda8JSdC6kws+coCNtodl9DLn1ug==","shasum":"b5f48c4c56c5397ff19ebb1727ed15c0f9078c47","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-a680db6.tgz","fileCount":9,"unpackedSize":449173,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCKzC/v8U1gpW1zXNhTLzTGLd+wQpELKvT563+J+hBpEwIgY2+1Lp1IMhlFSG3MmkY+rNkKj7oLmTgye9IpWyn8E9o="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkSqffACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmqdEA//XAQgVnegXnkcavwaJ8WQhaehJ+g+8BlYfSRGZLl2hIBOJskf\r\ney9n3S6WgO2possNb7rR9yS5eUjESSFIsbywiADqavX7lZgK4SNTUHrlaoyR\r\nXa7B3FxOlV9hS7QrlXejk8hQMWYURmLJTXiBkLTFtjvqgERi2i5xrvdxC6ZY\r\nNjVipLeqQzm/DZiUIh//DokPGzNsu9L4fjlpxiXWJHusmALMH8bW52eU890r\r\nKfTHJO6wgxH5Wj48pl4oUt8JNZzXVuifAUnK0BcppdD0ivT7xDsr6GG9E1oY\r\nycp5LF1okDbEhvaN6uPvTJA4sxXNDX3jQoNCXzqJTWEWc0YFtUOv1E1/FM93\r\nuG2Qtlw7HdzFI7nrFK2sNYK4TWce6rZ9720nwmcSl2V2WfCjxx0wiBeihNg1\r\nNS2uGduNRvaAEJAE0xVXdDDyPO/4dcvn+mLBaygrMiWdk9GD5THylkQSnJGA\r\n98L1bSjvLAyMs7jCs42R+RzeLwNksD2c/osfSsbW11X2lYb8RptucvdFETB+\r\nLAcYtmwVrmTU4DrL0UVluF6Zow10333kqMXXPOWhf2Jg+oCMW8K3CoU6tYGd\r\nwsC3B5ilYre2vfL0CFRD+TKcLKg5QTRgyoGezkoCOlutc1IfyOHh0UJ6J9/+\r\nNhOehQ5sDXuq704qgAe4BoHLYzwUvbivIe0=\r\n=yTDO\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-a680db6_1682614239580_0.6963588674448924"},"_hasShrinkwrap":false},"0.0.0-d7e62c7":{"name":"@cloudflare/next-on-pages","version":"0.0.0-d7e62c7","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"d7e62c7fb99241565b41a664abfde29bbac99755","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-d7e62c7","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-jrKCi5KP0aS3W8Q6RxyGjmn3FRTHLaU04MQ25GOk8EnQTk/zjBYgbsgqctcJCiFokxiscbf8XFaF2lQ9Em0X2w==","shasum":"f2e94b5f4cde0f49b75be503036563e6751dc283","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-d7e62c7.tgz","fileCount":9,"unpackedSize":449173,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIEfW7rQvTvGY2LtdIML+GpeYPXN3kYxQkE3amEAB5yBtAiBa5cjjNvN9sRU7x/78oxzs9NQymODLjv+5tdCgWm+aqQ=="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkTaW9ACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmpxqxAAotJP63vTpXmHAVh8axhbb0ZvY1LiseNYo4tsyPJ/yFcq7efr\r\nb6wJZuIHwwy9/A4rwGRE3w3Zr3BXS3n6q9nfKhxAGTWekt7IkIZejO/AgC+4\r\nm8VKqDYwm6Z7y0evJvswQR0p8vgV2bDdEs8kEeeBoU8Y1XZGP2c9ZNt7BQZE\r\nP+8vjy//35QpBlbQTDMYiTaPSxHKKph9I7rw+AwM93xFpQQ5TZ3SVY/x2aEv\r\nIqJRWPVUfjgXqfaJVU/s+LW8Qff63flINV4b/w8eB1+peHmCn8SD72VlpqOv\r\nnaxPAcZHPaX7DXCWLe1Y45gGH9JsWN3buVMmsmJ8qWwZx4Q3UpNWwqD+vKx7\r\n0TDn0vHtFlf8wkaDUDLwjBWQqKos619Fc6E/21u8IlgX/+YLvXaZEgfQ43v1\r\nH0/PCQniLG6rmtwbFyLAvnDjKGW0HRrwsDU0S/9XSvM8U16ed2GbqIzLA9eN\r\nIbSpQHfK3raIT6x/Ug+QWITrPqt9mzPug3ErtugjTBSEdEmvgfBflT10dY1B\r\nDNuvfQ1kKZpXo7NTWb+O/gBOow4RHMe2Wv/dvgYs68Ku0+fPi0nWA9kUFyWT\r\nqE0Gt4rvSshMuG6qgGJtJElqZ7fP31nbls26bGJz+jXGTOioJFXhd/zbge+6\r\n99rzu+CDlKH8vr/pUX08aa+pDjlsa2LqGyE=\r\n=GOQD\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-d7e62c7_1682810301348_0.023778839025158538"},"_hasShrinkwrap":false},"0.10.1":{"name":"@cloudflare/next-on-pages","version":"0.10.1","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"gitHead":"d7e62c7fb99241565b41a664abfde29bbac99755","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.10.1","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-7VDxKHoW358CXa6LVdUg5+r8tghn9xpRYu1btfFcxEiQHRVjaKB8YJA3c2Brdvu2lZrh2yRHLSoGkrp0ezgbvA==","shasum":"d17633afda71e7bd8bd7e3e22416f90ca99f8c5d","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.10.1.tgz","fileCount":9,"unpackedSize":449069,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCKwlc47LaJq5M1DoXIipGP1NBmCrYuDjMBYklpCxa0RAIgUKS1+FN4CxOtQ/FoUq4dG0lkkGsfnfYU84NEsXQ11wE="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkTaXCACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmpggQ//VkOgf69JTo0hc+97MBXFk7InYsa4mi94Gc8+Fpu2G82hU8Kt\r\nyBmvvJL2H4isPOwRodvsL7rPGSvTNS0D/R4EWW/8KKPWy4GIbjMIxxoYw7TQ\r\nhr2EkgnSuAhMOgt5c0XmqaDrc7Um99xz3Fqtp5apooE1CaZ8AcRgMED/hXxc\r\nbgkUev5djbmhMAc1hdsm20ywxQcdN46zGTH+Mi0rkhtnuURCfY23P55t1vPd\r\nsvjtGBD1ITTUl4BPM2CVqngsbY7OQqGlBQCMu1gi7gZcoRIMyrzlzem2ZfT4\r\n4fOWJykVFTS9qX8D47VL2/QKoF9IwqyEfaalK5Dv3bKj/oC5euxqzYRZRiPm\r\nKCidSHNmAEqiKdZjLz1kzl3yrv7mHLdkMvZ8bQo745w4zv9uGrGirfjgrHd5\r\n8dhq1T2vULxgPvOueJwgPseOZ9DNImlBZZpsXlcb4pLG6cGcgP4ZrxgXSR4k\r\nhfswxgu7oovQTzBg0MPcD/7NS4fj++XvT2khwIqJa/Fk0fxVHrZSa2WUHuiZ\r\njZXpOsrQz/HEmghhxUAk435F6aKG6Jt2edX7QsqYh/oQrn/vSiLx2vWhI93Z\r\n2yZv3AxitEwI5hnsBupsIhszAI9Ny89pSn6A1CArG2fjGqL4kwuCyAXlG9GR\r\nsRULsI1inbBr7EPFGugHgT8Qj/nG3hPsgJM=\r\n=Pqx5\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.10.1_1682810305948_0.3235370535339055"},"_hasShrinkwrap":false},"0.0.0-7817ecd":{"name":"@cloudflare/next-on-pages","version":"0.0.0-7817ecd","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages --experimental-minify` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"7817ecd80b925d1904cfdf507ef7227c227af476","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-7817ecd","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-47Hr/hm5ndaZVIMYYee5Yq2C0m/4UdH89gYZ85FRV4VekgZwvZ4RVpogbxS4zkuNacH1nqGQj+J0gw8PpMST5Q==","shasum":"f669465b3498d5c4f053653b236cdeb48585da52","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-7817ecd.tgz","fileCount":9,"unpackedSize":449173,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIHVYgXYfrZdUqJrzgeOwpQ/YxT8/lwHcDC4WG4lkGbYKAiEAlYOGyAl2yX/J27T7S8QglZrBqcPd07PFcN8pzAikqds="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-7817ecd_1683043693995_0.16105621475131238"},"_hasShrinkwrap":false},"0.0.0-6fcb58b":{"name":"@cloudflare/next-on-pages","version":"0.0.0-6fcb58b","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"6fcb58b99aefd046e8dae67638b98cd61f86b9ab","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-6fcb58b","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-oOIiPsw2YRnNn3LzLD1ryWRCdltWXPzD8bEAP9gL88BD4KJSWjlCnOSjHFIs/F+9Qwk+hEwvm5uvIudNNLymXw==","shasum":"22cba22a7d70c58cbff11ae39727ec0de17fc20b","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-6fcb58b.tgz","fileCount":9,"unpackedSize":450636,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIEmN1lmfBJcFPorran2PAzriZOGYM3p0rjfzUP6m0xDPAiEA9SQ5H5hvwKHrH91xesY7Sjm8CgTIZ0LydKppGgMeYeQ="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-6fcb58b_1683043722120_0.2840375781881739"},"_hasShrinkwrap":false},"0.0.0-89924e0":{"name":"@cloudflare/next-on-pages","version":"0.0.0-89924e0","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"89924e065f482c14571eb4e9e73866ff9be00de0","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-89924e0","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-6H9/M/IzPXhF63ivPmyTVgr4jglsbrIphwBKkRWifX24f6n4aUfHNznM3r/5tcpzPzs8XhgTRSIQSOu0cQJffA==","shasum":"c2d5ef73f6047711efb3025c14a81457a54e00a6","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-89924e0.tgz","fileCount":9,"unpackedSize":450636,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIFRbfA6BXDkbdz8/vjtVyC5hHjfvTTBm3jzmN0jSDTlRAiEA4irt6YbbwxEzCetq7MG+ubbDaMU0AVj52oY0nhW8H8I="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-89924e0_1683044362720_0.8545270223484738"},"_hasShrinkwrap":false},"0.0.0-bb23b60":{"name":"@cloudflare/next-on-pages","version":"0.0.0-bb23b60","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"bb23b607f9bea0ac196131ed2ef6948e6d14e3e2","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-bb23b60","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-XtS2QfTmd9ArHB63c996rga+Q2LTqJHbBMRsP2SsFo1C9LuXQ7I/OKfyJXtzUdZddP+zvL4t/l0TQrTSRQcV1Q==","shasum":"b6cc1f0737c99c20bba903979133adb9238c8478","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-bb23b60.tgz","fileCount":9,"unpackedSize":450712,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDD9PkJ/lrheJU31WB6N6H5w0d1AZs6Lt5Q69pWtjvtZQIhAMNH6pay9suaNJcBRy+zPHARy2igML9k1Z23hJ5Ou5HU"}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkUua2ACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmqIBxAAjp2F/AvGrZBWTYGzvn5dZ75AfV2vQnX8VWLHr9a+c0RF34bh\r\nynzsec7fofUMuwyk0aSfuHeQ/wS/AShG89lhbNjL/CW0UzG7FwpKyMCezMCc\r\n4jyFoyfuz4Ny9MGzqGLiSKYiu1DNNPv/ZJdKL0vcFcWnJyEkzcIF8y0J8cGv\r\nna+xcBBDwFZO2XRHVfuTkMfnRrY3w/52LNHoQeOIvhS8khtx9lVfblkjtToV\r\nfLu34rhlNPtkZJzwV/8oITB3jfhxx6Oo9yUe2LLX72iY9Hx/worO9WmSeaSB\r\nQWG8PZARoIMO9IrIoEtZOeChY6bne77qVBvhKeqLg/qvYKSq0t1riUYKiinq\r\nxJy1udKmU4Wdh67pA1gxoo8Hu/Jcgpb7SUTSFAriT5pua8Nv1VYbCh10yR33\r\nCRvHcVjJfK1GPr797tjTFIa67jQbQ5tPO1pDJX8fYy3m/xL2Ag2NlLdU2fRH\r\n//yDt4cZFTb+E/BqMVMx/3Ci9ef63shT03xUu5B6rBVjmFR6F7j4IC3E7aap\r\nbIVw71SbEeY6M7tA9A94ocAkLi0nMB3jqTI5t1QovZ3tTO369QmiseSDnCtC\r\ne/SnIgh2zJEp/eg1/AlAlk/bzITBzo/4IebpGRdQp3AS5kL2whcJOFmkVatv\r\nspDPi4a/b3FB4IY8Goi+A32Gn4jpuIpCaCk=\r\n=hHan\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-bb23b60_1683154613916_0.6202961193849805"},"_hasShrinkwrap":false},"0.0.0-87e183b":{"name":"@cloudflare/next-on-pages","version":"0.0.0-87e183b","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"87e183b2ccc6a8f11639d1ad49f46db0888c47ec","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-87e183b","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-eRNvOo1u2Gp2/ppitau/9vqjWvb+tV+KkncpxYdsvzn4Q1OnZS3eDjRkGsyGu89J+9lOInBwExiyqVZlSrNkLQ==","shasum":"c5edebbbba564adcb643472f7c2971a2d74d2072","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-87e183b.tgz","fileCount":14,"unpackedSize":467198,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCmSVLm76dbBOvcZUclFNsk78GZgjlWW7ajlnXwvgz1sQIgcVdo5Bxcs/t5dnLv3d08NCpia+660hnDqc+BaLsaRmw="}],"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJkU4kFACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmqT2Q/6A5dHwAIH1BvAZAuLL9wFe6XXDSaZD3OXeZ1HlMO2GC3pj21i\r\nobJHUhnwDOijNNGSCCNyNmkL7/+qkWk8HgT2kG9L1yPmRB08EdpT7OnuwYh7\r\nLGPJ2WfXFmozUdTOJeQ+Y4pYv5HwPwjUVJQS0qu8epHE66dsp74CM2YSpOli\r\nyOfhrILBaUg4qx38LOseZUlVJ8Cnq5+4tGjhtmYGOBiaSNniX5nKlrnyo2Dc\r\nBi7ljjMSfgvD2j77g22TTL5EapNNtOZXWMlA5deJJDh8WBDMlddUso6KKdtL\r\n/B2FgdBj1k3vXbCU9cshYHznPVahhuooEfZP3Vb/W9lORtHWqdcffMja/Kir\r\npSPjU1gN2oFXZ/5kvZ3T78lGQGFYhs1t50TjOJlgo+Mk4oA5UGg317er98jK\r\nkMGpgc9QVarjhkQF3hazNSOImvLd6x/iWDn3/9q/SPlqPVtBaB8JaHFGXTF7\r\noQrQlRB0g9fpPqeAowYhQt9hyi+5+alhWJnBjQ9g9FvfLUwWAWf5I5Aqg/fW\r\n+RCYCnzdAlNZh0vsx7/G/5OzaZaRhnmZay0rOKe6Kr5RGgnk9Ldr8yQZo/z3\r\nc1OrYxaxGL+MZw1b/vwq1Nnk6F3j/nesTE5V8G1s7fr2FFv0474Urq+9Chtz\r\ncqqIrWtMXmRamH4p2BrGB1Y5q0AIDsry/UM=\r\n=UIU7\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-87e183b_1683196165776_0.5341782034837648"},"_hasShrinkwrap":false},"0.0.0-1a68931":{"name":"@cloudflare/next-on-pages","version":"0.0.0-1a68931","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"1a689316449a46c69a1bf746bdb3d28c217c45df","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-1a68931","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-okAqMBYgT7eO/QYCrc2aF8WjKhJlTYeNSPtu1TZkLk1BgRebE9LsJx8wX7k1G0jjlH7SU94LOed5MQHwkK8kZQ==","shasum":"b47c170616d7fb5d90bc0400db0711ad200292cb","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-1a68931.tgz","fileCount":14,"unpackedSize":466454,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDphXxwYOCzu8TzfCtWp7MhIkKfd7JvV3+JuB/6SwZqZwIhAKU2Xk9cg8UbsWXpninmqXmCiUua6UfDQ474Oxnohm8o"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-1a68931_1683309140759_0.5004897688982088"},"_hasShrinkwrap":false},"0.0.0-701f0c2":{"name":"@cloudflare/next-on-pages","version":"0.0.0-701f0c2","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"701f0c257ceed22c19ff85fce8597351a47ef69f","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-701f0c2","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-KLzqQOLVm7Rn+6Qgem7LcCsEkOuDWmzgxw6embuSWzmV7BX8ZFOQi+MmfULEAgUYn9phLN+YTaDit0Heh84OiA==","shasum":"e2bea7511b287b0ebfc3276ffcb6060412626bb1","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-701f0c2.tgz","fileCount":14,"unpackedSize":467539,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDd9m7AjAo68Th+11zvGmiHopjQStb++Q3+WrswNsDm1AIhAMAIs3KnGl97Q4TDKA49zQShBImx47aGJOubRL8tpmE9"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-701f0c2_1683410832152_0.16642376025143069"},"_hasShrinkwrap":false},"0.0.0-86df485":{"name":"@cloudflare/next-on-pages","version":"0.0.0-86df485","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"86df4854b214ce03d81715257a50b6bbab54fec9","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-86df485","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-P38ZWBALuU/CU/d6PrXgOrfvkzd13p0jdeuW3C/QLAJo6z9gfX+7XDDThXmpxQUccO+ApqiGVaqkfkElECIlww==","shasum":"8fc30a1b2060f398e6be7763b63df22faf3aba8a","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-86df485.tgz","fileCount":14,"unpackedSize":471101,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDi8kHF/R8+hSV9bBm1B0+xHpXDaQLaVwzMhzVaPIlhGgIhAMCN3okqdigjRb1U9l8+P+tIYnTr418NyByl+KQMu67E"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-86df485_1683587892553_0.5208494546520053"},"_hasShrinkwrap":false},"0.0.0-b33639f":{"name":"@cloudflare/next-on-pages","version":"0.0.0-b33639f","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"b33639f6cf3d753a75ce65de8ce46c4ff1e20f9c","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-b33639f","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-XXhVx+yn2HatyVEAGABDzWL1dt5KbyY6xKHWmTy9A1OGbAQp4L9J3aWs0qSCpLa+IYkTfnFeiJp6aswnN9BVag==","shasum":"6d337532b87860e3c8dbd7cbba1be9da0505a04e","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-b33639f.tgz","fileCount":14,"unpackedSize":472444,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIA3fzXy6veWSiYOI4Zak8qT72ckITj118jZESwx5JUbkAiAT1N4hMJuMMjS8WTAe2+jzCYS+KDsjdo4zdIGLl9xfgQ=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-b33639f_1683623639283_0.07270210451699155"},"_hasShrinkwrap":false},"0.0.0-3e2dad8":{"name":"@cloudflare/next-on-pages","version":"0.0.0-3e2dad8","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"3e2dad8de5f3c10ad7841fda031ca3cc3c98e996","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-3e2dad8","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-dravpDxeaqiBTfTevoVOr0V8J3DFfNzNdCT2oj/hyQ7YLYgWhhPOIbasYRGrJRVGXJj3zLVsQBRIc5CWNiqgPQ==","shasum":"8012e7dd82f138f635b2f7805be529b4be8c6204","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-3e2dad8.tgz","fileCount":14,"unpackedSize":472767,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIFkQW3l7bU7dbLS4HIFAWSsuteXbCfxOje3asWUQTIYgAiAqsbsaElypH5VLcaS06vdyz95Y9NPO4HtJCYvA2vMTyA=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-3e2dad8_1683638102515_0.29298487852662114"},"_hasShrinkwrap":false},"0.0.0-336f3a7":{"name":"@cloudflare/next-on-pages","version":"0.0.0-336f3a7","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"336f3a7f730b78e3dd06338425c2a321e06b590a","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-336f3a7","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-zOkdLFpzR254GyoJRGYzaqeYrynktTtN+8VyhEiEk/fXAH+GWQo99qIcAbGU6r2MO1/MCqrvNkaPsHmrpIlgEA==","shasum":"dc4796605dc81ae979dece8aa506684b8ed869d7","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-336f3a7.tgz","fileCount":14,"unpackedSize":473422,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIF5bfVhzaGRD9ANsn+7uslJK8PkowpBcGcJupub9qK4RAiAZDRTS/VPg5Oj/dIxVxC+Sk7JpRdfOsrSQ70YKHZ6gTQ=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-336f3a7_1683665686523_0.7185382270129315"},"_hasShrinkwrap":false},"0.0.0-4740c02":{"name":"@cloudflare/next-on-pages","version":"0.0.0-4740c02","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"4740c02a6c47e4db52f47224490d042cecf5b53a","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-4740c02","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-3w5Sb3zTyIB0JaLeBHt8u+JRn1CJe8T+clkdT8t5P2gVzDRAuqeAx5uxKr+LWzmg8eyigPr1OmwVxefheq8wmg==","shasum":"3351e54bff6e517d73b1801d85f0ec0dd71ec535","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-4740c02.tgz","fileCount":14,"unpackedSize":474533,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIAsmRKsD2VFxW8mmX1SiF4IRq42nq7fnpOCVNJ2T++tBAiANhmQjxWhvnG2KAS8loaARuGdX7c0D6yGJxyVdyQ1Odg=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-4740c02_1683670179090_0.03787182567582392"},"_hasShrinkwrap":false},"0.0.0-d81c2e3":{"name":"@cloudflare/next-on-pages","version":"0.0.0-d81c2e3","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"d81c2e3419d30ab2ecf3badbd45bd4970ec6b69d","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-d81c2e3","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-5Oonp6j/BKFbRbb0YPC6YFbg8LO95lgKMJ9oAYPFDeY4q1kzHWpH63Kb4fAuli1H0yXXadeBfscfOfkvzra3gQ==","shasum":"84b4a43c2f1a1c52547d778d053c0ad4a09bd664","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-d81c2e3.tgz","fileCount":14,"unpackedSize":474594,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQD5f4UiPmqcaDVqxllM5JPmZGpaawi4VzgeWdKw4NnSTwIgSLFIuThUHAFZju0Df880AH+EOUWuAPGFLL2Bs0juqJY="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-d81c2e3_1683752305088_0.9573530544514262"},"_hasShrinkwrap":false},"0.0.0-360d9f0":{"name":"@cloudflare/next-on-pages","version":"0.0.0-360d9f0","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"360d9f07dd38d434bf035d8f784962a00f02fb5d","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-360d9f0","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Z7gwBGOdeXXXC8FqLN4ITqX2gR7h+wuGGrQ5WhhCyE6joxpvGULIKzp5707MufK40iwQxvJ3aKG393akSFyanw==","shasum":"3511fc1dba506cc27afd5614bf9b915ab9fb4026","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-360d9f0.tgz","fileCount":14,"unpackedSize":474594,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIGc8FSyGm/Sr9rszELCDRLksqjQ1fAqF0c7lnRQ5VxZ6AiBxz0LVa3P45/KUhYZE66kfZbmw+AtScIU8K5W62e6TOw=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-360d9f0_1683752333600_0.09145923754677932"},"_hasShrinkwrap":false},"0.0.0-3447a97":{"name":"@cloudflare/next-on-pages","version":"0.0.0-3447a97","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"3447a97fae3d70f3a9c70757bbedb6019d829a02","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-3447a97","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-VC1qB1S5xCVfjeVRhnMHKYFzDB80CgJd8a8k04OBEO3EtTajC+bNBJsLSua9bNcxaX1YdxtF8YdCz+2eY3Ff6w==","shasum":"22bd676805d2495ceda2d1651ed9d21ec80ad0b9","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-3447a97.tgz","fileCount":14,"unpackedSize":474594,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIFg5mzLEfGaOtnVeuVfTRghT0Y/8tjaQNKey72mpWJg6AiBdwoaZezC2jhyLo1qua/2YGfHiVS0qj2SGaprmoW1IXA=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-3447a97_1683892443307_0.7744156804754319"},"_hasShrinkwrap":false},"0.0.0-ea761b8":{"name":"@cloudflare/next-on-pages","version":"0.0.0-ea761b8","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"ea761b8fc9917ea539cc5f932f0a4a57aef2df55","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-ea761b8","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Mc1uovWy6BTdZa0MA4x/Z66Pjr9b5Ztc5clBlSRKy6op3t2I0/I9u8RwdTHX/REeGV041ToNPSx6V7A6R7vHew==","shasum":"5fceaf6814b78d20b535937bb9a8e503da16a5e7","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-ea761b8.tgz","fileCount":14,"unpackedSize":473984,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCtnc1xlJON9GAOVT8kOo6TdJKemi4sut8YWmPnRFwC0gIhAJOd8LoYCvY/wMsAV2YFI/IXG3A5fym3CwyW4QhVy1ZY"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-ea761b8_1683908705751_0.5498055232781378"},"_hasShrinkwrap":false},"0.0.0-c70151d":{"name":"@cloudflare/next-on-pages","version":"0.0.0-c70151d","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"c70151dcbfa4bb7886884364fc98e4d696285278","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-c70151d","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-79hKYQBzuP6NUQ5geGk89rOBT8BkV6wM8oj6RbAHG9OV3trEcC9wlBknUOR1e/dTz3+teAgJSxMvUerOpD4SKQ==","shasum":"8dc25600f2c40e33d92252132a54b0fd7241e50c","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-c70151d.tgz","fileCount":14,"unpackedSize":474088,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQD2477l3gCDL+BbA+KowgrI4uN3g0WtfENdr5E6dGHtAwIhAL80Fs1+Uvg28Rzw2VS7oRqFNRfXKUN3jjJgFBmCd8Gm"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-c70151d_1683910766683_0.4081930330870136"},"_hasShrinkwrap":false},"0.0.0-e2d2046":{"name":"@cloudflare/next-on-pages","version":"0.0.0-e2d2046","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"e2d2046870031f0e6938f5563eebc010edf0820a","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-e2d2046","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-zDVD16/FL1izfArKeqZiQGUThBrZSg5r1dAe7zMNGpPLcBPgTzXx26mL1v07V/vsJJNH/sgIhOh8IuHUW5cLfQ==","shasum":"f2cedfa58541ec6d5c7d51aa2012d6e65148af8f","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-e2d2046.tgz","fileCount":14,"unpackedSize":473014,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIBkl+cONYbI4KJc6sYWrDFAiy2wiyv7OIyDZPApoaLw5AiEAgHgvEz7GaZPcoXhD+VJE0rqXTE7trrkR5H+8q9LPzdE="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-e2d2046_1683934365961_0.046136275393516835"},"_hasShrinkwrap":false},"0.0.0-f1d76cd":{"name":"@cloudflare/next-on-pages","version":"0.0.0-f1d76cd","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"f1d76cd9822e05fbde9f9636edb29d1679d1e627","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-f1d76cd","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-f8M1cSOF9b1w5SmAohakz1+IncYFWGL8OSOnqd9jVF5nNxhPPW7ciIor6V1AO2Xacn1ZoavHpgD1UVm/p113NA==","shasum":"ae4070412e290e81631c56ec48e6281b18a9359f","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-f1d76cd.tgz","fileCount":14,"unpackedSize":473041,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDr8sPKKN9MjRFkJlj0en71bEw+CjV308ChRO6x7PwE4AIgMndpsZT1XzDha76eK1YK6SnBJsO0XUyAn5i0jLwlfKg="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-f1d76cd_1684016134261_0.03174767746935436"},"_hasShrinkwrap":false},"0.0.0-8a46b36":{"name":"@cloudflare/next-on-pages","version":"0.0.0-8a46b36","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# ⚡▲ `@cloudflare/next-on-pages` ▲⚡\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other product offerings such as KV, D1, R2 and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application and using `@cloudflare/next-on-pages`.\n\n### 1. Create Next App\n\nTo start using `@cloudflare/next-on-pages`, you must first have a Next.js project you wish to deploy. If you don't already have a project, you can use the `create-next-app` command:\n\n```sh\nnpx create-next-app@latest my-next-app\n```\n\n<details>\n\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for to the current version of Next.js, at the time of writing, `13.2.4`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.2.4` while we work on supporting any recent breaking changes.\n\n</details>\n\n&NewLine;\n\nChange your current directory to the newly created one:\n\n```sh\ncd my-next-app\n```\n\n### 2. Configure the application to use the Edge Runtime\n\nIn order for your application to run on Cloudflare Pages, it needs to be set to use the Edge Runtime. Make sure that all the files in your application containing server-side code (e.g. any API Routes and any pages which use `getServerSideProps`) export a `config` object specifying the use of the Edge Runtime:\n\n```ts\nexport const config = {\n\truntime: 'edge',\n};\n```\n\nAdditionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/api-reference/edge-runtime#unsupported-apis) and that its API routes are defined as [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes).\n\nFor example, if you've created a Next.js application with `create-next-app` and opted out of both the `src` and `app` directory options, the only file you need to modify is `pages/api/hello.ts`.\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_)\n- Select the GitHub/GitLab repository you pushed your code to\n- Choose a project name and your production branch\n- Select _Next.js_ as the _Framework preset_\n- Provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section add a new variable named `NODE_VERSION` set to `16` or greater\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary)\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), add the `nodejs_compat` for both the production and preview and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your `_worker.js` file (as indicated in [Local Development](#local-development)) and publish your application manually via the [wrangler's pages publish command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (but you'll still need to set the `nodejs_compat` flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo locally run the CLI simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages` see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n","readmeFilename":"README.md","gitHead":"8a46b36316441d2558e06871c9a474f51898210b","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-8a46b36","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-5/rZZF+U0vCCA9COQjKGEbaGbOwOru/STWGUG6evHfBznMPB5wUSF+9uFqwI0sHjma5I7undOR1OMFGVOUwJFw==","shasum":"e9c623424845442c3d32a417c2bc7cb19a261470","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-8a46b36.tgz","fileCount":14,"unpackedSize":473041,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCICkDXpghgTMUuWzvz0GTa+3exgSLihH/lZUvU4B2K8hoAiEAkStNp2pxqkFELRrm3v9gbiM5QeVxXkgFcCeoZAWFJ4w="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-8a46b36_1684021202658_0.8743257960523356"},"_hasShrinkwrap":false},"0.0.0-0d9e155":{"name":"@cloudflare/next-on-pages","version":"0.0.0-0d9e155","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"0d9e155710fb2dea31c6692ef2bebbc54f5a879e","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-0d9e155","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-6TwAJiGCoLc6AaobAdnxBodaUKfU7t4/uZLimtf7P+LKi41+YXhq6esyTUCigu+X3yYTtmQj1hOhy7aL78zdNw==","shasum":"4de348da09da60c929a2add3ccf01edbb126bf71","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-0d9e155.tgz","fileCount":14,"unpackedSize":473433,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDeft0t/8JmbuZZxwO8wEs1sNTrkisd8H9X53SaShSNYAIhALIkJBQfEkhSTkx0/yfpU/K3oTfWzp5gp37ceBK6Vqi9"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-0d9e155_1684150605733_0.41162957825944924"},"_hasShrinkwrap":false},"0.0.0-b3ff89f":{"name":"@cloudflare/next-on-pages","version":"0.0.0-b3ff89f","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"b3ff89fe3fc2d44544329163e4a093564358af7e","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-b3ff89f","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-sBhlBc13qcIhMQO6DQ+LfoTumLS24bT6zCjJi7sl6UbKYDfkOTFtW3soTrLchK0Ma7n6gXbnQ0GVXXG4vLXjiA==","shasum":"40b76239e909833799b7ec0379df04739da14ab5","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-b3ff89f.tgz","fileCount":14,"unpackedSize":473423,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDKAIvalIbQBumk/eO78YmHGDWkXAiPgPrEjNDy8DnT5AIgAKYXThc+h0J1D7pBo23+Ui1Hwbjkt8anmICteNwDBD0="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-b3ff89f_1684165176227_0.4094134324541008"},"_hasShrinkwrap":false},"0.0.0-3277f72":{"name":"@cloudflare/next-on-pages","version":"0.0.0-3277f72","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"3277f72b657aa9d7b2b83aa45b92f257d3617c57","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-3277f72","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Kg8N12YHZmi8BBOArPQ1PQNx26Bh0cLVKGLyB7fnPQkxZomyWLFYyNSx3kJiybi/1J2m2pgWaoedGw0f3YPAdQ==","shasum":"f1d434bc35b359654daa3d812fa929a98d69a2b3","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-3277f72.tgz","fileCount":14,"unpackedSize":473423,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIF4X3cZIca4zYVhkK0iz3IHQtcY1YpVVvamxgkQCdGHTAiAxnMOEfbvCcFMOZrYYaWb1g8GvIJxSbCOvgbuzYLZkOw=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-3277f72_1684173887317_0.18093795956927483"},"_hasShrinkwrap":false},"0.0.0-e053756":{"name":"@cloudflare/next-on-pages","version":"0.0.0-e053756","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n### Install `@cloudflare/next-on-pages` and vercel (optional)\n\nTo speed up local development (especially the refresh speed when running in watch mode) you can optionally choose to install `@cloudflare/next-on-pages` and `vercel` as dev dependencies of your project:\n\n```sh\nnpm install -D @cloudflare/next-on-pages vercel\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"e0537560f3888fdd13595345859adfb867914654","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-e053756","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-QNV/eDucDVmUnh7qIgeZvju6147+R75RV/H6mEUAPpS5sCxDALFJh4JB5rmZ5Svn+PoiIze8O/Kp3z3G7KAQ2Q==","shasum":"b7aefa1d9f45a2c9a33543132023ae122118d376","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-e053756.tgz","fileCount":14,"unpackedSize":473877,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCo0z62WFSo/CyuMkG9e4MuW8rXtHZcIIu9WzLkh1KkiQIgeo5CVrklMqr07zE1azq3ZejSe/t5vlBRcnu5N1O5C4Q="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-e053756_1684177146455_0.23450358873693977"},"_hasShrinkwrap":false},"0.0.0-39cfa74":{"name":"@cloudflare/next-on-pages","version":"0.0.0-39cfa74","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-1","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"39cfa7445bc362312c07e90c93ffdf4fef09b465","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-39cfa74","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-2w447sj6i2ppQlGJytC+Mz52cqz+ce1l5W1jl5bWftxnBhYGZtSnJ1Zzl6a7DP2ZUSbR1eEomiztdapjepq60A==","shasum":"6ba62cbc30030407dfc9ae4a505c61b3aaebc5f9","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-39cfa74.tgz","fileCount":14,"unpackedSize":473745,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIFEN1KYDetae3XIOtVwWyu7aPCtjU4pAKM6DF2aaW3yXAiBpF/HBx34gTpoRuwAH1So6kZIpaWUY4cQq8t5l/azexw=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-39cfa74_1684226211002_0.7963584154279155"},"_hasShrinkwrap":false},"0.0.0-d4440ba":{"name":"@cloudflare/next-on-pages","version":"0.0.0-d4440ba","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"d4440bacefbe10a001acd776973119037bb8f73a","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-d4440ba","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-/zukruirZulgadU9988qDixikdo9KyxMOI57sYlZ9cFPIh/CO6aATQ+rrL1vq7DAlNjOl9W75BdBhkowasoA7A==","shasum":"1432dee6db3f4cc8d8e847950657b91935267645","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-d4440ba.tgz","fileCount":14,"unpackedSize":473745,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCHFafk3Ze1GBvJRVGeS3doIdf/eHf987b+R9fyJrPJ5wIgct7yYymSwMGwyA+/h0PspM2Sl2cjhkIxJgbadmNRytQ="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-d4440ba_1684234471711_0.6992827982021099"},"_hasShrinkwrap":false},"0.0.0-f010420":{"name":"@cloudflare/next-on-pages","version":"0.0.0-f010420","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"f0104203f6c039efb43e8a4058699832577d034f","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-f010420","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-KQpU3A+zZSB/e4oZRHHylf3plO7TUSVsqaMk2pdM/h467jU4H4K9LsJZ/ZFlfZHuWMg5OwcW+z/jUoVBczVwnQ==","shasum":"47116322a290b42c3eb72503e1159e2e699f2d4c","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-f010420.tgz","fileCount":14,"unpackedSize":473745,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIFjVDihjoFyeqaaF0QtQ4tVHcxw/MgdJWMBQYroF0K0xAiEAn9KrvOn/+ZuI/a9aZBntG6dUg3KByqNWvSIjOtVEJzQ="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-f010420_1684238421856_0.6737493803015739"},"_hasShrinkwrap":false},"1.0.0":{"name":"@cloudflare/next-on-pages","version":"1.0.0","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"gitHead":"f0104203f6c039efb43e8a4058699832577d034f","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@1.0.0","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Z8gIRq8ZdphvdZWMU1FdIMZKaoDXotR//osOY8tqOaF4OG6IN+o4wp2VqeZYMFVxdZbfttBJD8Shntizbpbmrg==","shasum":"61ef4fa9730b3259f72b775e6d6bed6c0cda6902","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.0.0.tgz","fileCount":14,"unpackedSize":473639,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIHoy+6M7TWy7cD+WfZY37OgWNSDCUdkzIS0+cjvDFphzAiBmtCbFvMvSsKfwWo/H00Xi4KG0WaqWOMJ7Ab3FLzMYOA=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.0.0_1684238424414_0.396171383122468"},"_hasShrinkwrap":false},"0.0.0-b16622c":{"name":"@cloudflare/next-on-pages","version":"0.0.0-b16622c","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nYou can easily deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ----------------------------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"b16622c97aaa6779206bbeaf34b9e123c8b0c062","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-b16622c","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-J4rbXRx+L4irFjtMZKF4MSqcKj25+Sp4b5QS31zJc6ewza273xMamuXTOd3Wn/p3OGKMBDsVol6NF06WFu9uNA==","shasum":"b84996c7c959cd1524e3d3017d8acac6feb1bad2","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-b16622c.tgz","fileCount":14,"unpackedSize":473745,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDqv0eRJZzKKk1/jtFSttUnnF9W8sqsA6P1JgWoWYZ4TAIgQl5omg2zmgdIYBsFzv1MQpn8PrJwHSy3IfYhKqIXF2M="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-b16622c_1684242950710_0.9730578996812624"},"_hasShrinkwrap":false},"0.0.0-f72a56f":{"name":"@cloudflare/next-on-pages","version":"0.0.0-f72a56f","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"f72a56ffef1ac1d5b62c9e20f2b227a5d2fa8910","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-f72a56f","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Ux4uFul1MlZZPBtdJqRhYqbwzPm+xqJM6D81HRU03Q6k3euH/EmktaSXnGs98JMqzMEHNQnEmwjPwRnCEKT1Lg==","shasum":"2c728cfdb4017102ea2fe6a2aff00c8c0dca0ae1","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-f72a56f.tgz","fileCount":14,"unpackedSize":473888,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIDerRg0S++sAW9Bz58h13p0zscgHU79CW+xPg+P9QgSJAiAvV0OuXqbt0qFHGRJb97cj8vERMO7Xe2/TGsur9uJ/Gg=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-f72a56f_1684264677247_0.07240175226189671"},"_hasShrinkwrap":false},"0.0.0-95b1704":{"name":"@cloudflare/next-on-pages","version":"0.0.0-95b1704","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"95b170498fe4e269448583e4a3c5205423a25210","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-95b1704","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-ttqot5H9aFqWuwSiRV7TIkusW58MQ7iKOQGMhofIDhq6+H2slKItzadlF8w7qPdNQWSJwdT6sHDeOcCDnXU+BQ==","shasum":"1d81bb100159ec68d6c95e1b26b0f66aba993877","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-95b1704.tgz","fileCount":14,"unpackedSize":474389,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIH1IYojJlHzxfOmKcMlyA6S1TP9VgLctQiInUCqVOLwTAiA0sth5cLxj/PSQaA3xZPTde4ZMZ1Io8OvDuT1cyQRxSA=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-95b1704_1684422576719_0.22055993341635816"},"_hasShrinkwrap":false},"0.0.0-29b7547":{"name":"@cloudflare/next-on-pages","version":"0.0.0-29b7547","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"29b75473ec97626f2d0d6470c6a5e03acbf7f357","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-29b7547","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-gVFnIVgNxvJhXekEOd1D9Igk0mqOMYycrEL1p/Y0dDFNWwfvaQrbH1HRnWG4c2GxWn/IEXpAiM/tjsFII4qQLA==","shasum":"dbce8653c518515b49065e5d06896cbf3bb96805","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-29b7547.tgz","fileCount":14,"unpackedSize":474382,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIGPeARUZ9Nz0lvUAJbNv6vL2q6urU82QIxFw+60S5AvsAiEAxkHyFuwyq1wZqmejLp6D+auAidd+kgRxV3Fen3FmAZo="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-29b7547_1684425887490_0.21802214076981086"},"_hasShrinkwrap":false},"0.0.0-4f43b9b":{"name":"@cloudflare/next-on-pages","version":"0.0.0-4f43b9b","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^2.20.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"4f43b9b3b8b932ba1efb02a59d27674e73983987","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-4f43b9b","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-dpk9+R9EvrkNgnc5YvlSoral4bbmrAY5Qqh9o6HdWgIRX/fAF9cBFg01813BSbinzShk7sf9kmod4poSRH1N9A==","shasum":"c0db465dc0c5b7ce47aa87f4a6f2e5354bea5cde","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-4f43b9b.tgz","fileCount":14,"unpackedSize":475050,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIGVm1bijpWlgrYjDDwstpHtou+LSMfH8+MrHaTn8lJ+zAiEAxTFM+A2/m5Xv2kkey5C7WqeKZqCZlCC3z9uiv97Av0g="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-4f43b9b_1684428997771_0.2738210028754191"},"_hasShrinkwrap":false},"0.0.0-3f05e81":{"name":"@cloudflare/next-on-pages","version":"0.0.0-3f05e81","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"3f05e8128e1638ff960a245be5dfe29912adba30","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-3f05e81","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-tAVdCyMVHGzkxDKFZHHyUVjIYZidaZoJPJegX4R/EOb8p/aPO/jHIZTAFZNRI79LtCnCJKX9B1gBYUQAOIHw2g==","shasum":"770f1ca120e3b65632fb69144117bafbe2b34ffe","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-3f05e81.tgz","fileCount":14,"unpackedSize":475048,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCvIziCH3uR71E7N2g+QzweDeVw/yvBYCGcdQVoRsKwogIhAMnHYxzXfYklEjY0NgsZzGxrHL3kMRV6cO23+MnKP0RM"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-3f05e81_1684439508307_0.904292103294613"},"_hasShrinkwrap":false},"0.0.0-c0ecec3":{"name":"@cloudflare/next-on-pages","version":"0.0.0-c0ecec3","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"c0ecec341ccc681c6f1bed5cc56fb48c2e8d0299","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-c0ecec3","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-xyx1YjxLpFoa06YvdOZWi/vnN/VjUNCxLz1o5EMgG5EVrXvj8f9QQLF5UGyGqvb8Up4ik5cn+FXGkEXDjb+wGQ==","shasum":"c3fb41a0d9c93d43fc03f226c5417584fc565924","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-c0ecec3.tgz","fileCount":14,"unpackedSize":479025,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIAwbof138yVBF65kquccWJspkclKFiGDn4Jszhler9uOAiEAuBARvWpxkCzEW0LHNpzh+XUttXumLQbgnvCb89gAvSM="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"jgentes@cloudflare.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-c0ecec3_1684490242792_0.7858920290213298"},"_hasShrinkwrap":false},"0.0.0-fd51777":{"name":"@cloudflare/next-on-pages","version":"0.0.0-fd51777","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"fd5177739975c91a3585e93435bfdc40fee8c04e","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-fd51777","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-QMN7P10cgDj80KO2sPrcLEaMOFDMjBHCWk1vPT1pHJ84LmT32yKlTZwQpwg+bOWWf056IW8L4pCworwojKTJUg==","shasum":"f193ba792d962ea4cb45156f3cf8387d92dcfead","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-fd51777.tgz","fileCount":14,"unpackedSize":477857,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDvGaYmRSYd2+KB0YeIuIqNvgdNlsXNiVFSN49eqxiBqAIhAOVhWLlW/WAuQmRXr4vWwxZbA5KuQHBNCxW1ZPl0ziFU"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-fd51777_1684752243773_0.9158039931658855"},"_hasShrinkwrap":false},"0.0.0-81bfcdb":{"name":"@cloudflare/next-on-pages","version":"0.0.0-81bfcdb","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"81bfcdb4355ab93243c2bcf153c90f2f28fac870","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-81bfcdb","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-9YS4cyY6SwsIpZz57RAadacFDE8mBU7G7509YqP4NNKLf743t/5ovGVANExbBYTjsKCdhhVhYNuq0DAzRkdfww==","shasum":"2b7eaeabb56b108962ba236e557341f461765987","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-81bfcdb.tgz","fileCount":14,"unpackedSize":477962,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIEpCMlIdyVh0apOD0zTC1N8BQ4zeZvW0BWiYb/j+7b5lAiAhnXFGiLEfjgfZZpJMplSS8bU6WikBCl1GW7GacDJ2PA=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-81bfcdb_1684752891162_0.1596145642181912"},"_hasShrinkwrap":false},"0.0.0-97c8739":{"name":"@cloudflare/next-on-pages","version":"0.0.0-97c8739","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"97c8739e19e3a6dbf565f5606b5ed57be341cacf","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-97c8739","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Tlog4csCrc7Px+biT7bT4m9bGfbxrAk4pHHMLnIG71f7zjMvd3zntO3Gatk5gkwdLESBExfC82wnC9PWwSgdcg==","shasum":"c7392f89e7a785601c578eded5a664192fc05e49","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-97c8739.tgz","fileCount":14,"unpackedSize":478301,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIGOMorAbgZHya0aF4bv0zJVsHC9GyFzRqDh1zsMKY+WnAiBF8yG2Mj4p9jsiwpQXWE2EJmAeVd+gj3uj0jKpcjLoKw=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-97c8739_1684777882396_0.9589707370703646"},"_hasShrinkwrap":false},"0.0.0-e4a3ee4":{"name":"@cloudflare/next-on-pages","version":"0.0.0-e4a3ee4","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"e4a3ee4d6ebd9149e6b36086cb66d042a49348e7","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-e4a3ee4","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-rE2UY3j1sClJAfMnn6fE2c9Lv3rCOQ7BPQy6JomF2ShKRmwjfRtnNGd03/KyynN7WyTf9X+AGcfcNji9sboiZg==","shasum":"c9c3303a16a66f684709a03e5f9feadf524d854e","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-e4a3ee4.tgz","fileCount":14,"unpackedSize":478306,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDEw5rdK7WYJzEof291h6b/rOVXLi0GiGsaaguMAV7v7wIgfYWwficOK71TJWxLz4DXRKndXUb8YOBRvBvAnJB1wP4="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-e4a3ee4_1684836206761_0.30282787573768766"},"_hasShrinkwrap":false},"0.10.2":{"name":"@cloudflare/next-on-pages","version":"0.10.2","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^28.0.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.26.3","vitest-environment-miniflare":"^2.13.0"},"gitHead":"58305f016080db6ea4d6ba9a43fd53c36478c868","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.10.2","_nodeVersion":"16.18.1","_npmVersion":"8.19.2","dist":{"integrity":"sha512-zfadTc1HeAP8+7NQchb/oIedY6qJbqXg6eUs3TyQ7wCw/ERzzrpW/na7gxZxz36/jhcl6ZKa9S0LTf3hsirRwA==","shasum":"0497ebafa08ad577e0d6a3db935ecc7756f6fd9c","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.10.2.tgz","fileCount":9,"unpackedSize":451192,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIHK54rYUC7061p+G24OSaevECyRpjm//ak3FxWOSa1/SAiAtSmcf0dEu0h7/xle6Vlq7kUD8jXzq+Ibdi3A73zAFpA=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.10.2_1685030987007_0.42631146978521195"},"_hasShrinkwrap":false},"0.0.0-c844242":{"name":"@cloudflare/next-on-pages","version":"0.0.0-c844242","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"c844242b8200f3603d34f363273ef007d10be383","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-c844242","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-CVcmiRHAHwXUb8vLSqzBIj4gJTT7/4MBqvDb6Bm2UELvvXyF2OBo0HLmp5reqzAVesMotVIk0i7ZihOg2mJKqw==","shasum":"dbe545d425f45d31d4947bf50e219d388aa9fb86","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-c844242.tgz","fileCount":14,"unpackedSize":478306,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIHmk1o1KmWZ1UElpR5h4Aj3ZLjFGKhbqIKdfOSktWaqVAiBs5eAm/MW0mZjiQ0cNkdZT4CJaC/B8ZBAb4sdxKRR47A=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-c844242_1685036765389_0.7316885283894201"},"_hasShrinkwrap":false},"1.0.1":{"name":"@cloudflare/next-on-pages","version":"1.0.1","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"gitHead":"c844242b8200f3603d34f363273ef007d10be383","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@1.0.1","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-H5sYGl8WRqaAzDRmQ0YZV9d6DoJctWdoL9EJQSTC3EebbPLy0jMsT25bLlum/dkKk46REDHdow8XV9i+jddAlg==","shasum":"e41a1ad4bb5f9d85e86cc4dde9881eba1154e9f1","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.0.1.tgz","fileCount":14,"unpackedSize":478200,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIFkoxE1fukQD5OLSoc7dDPMU2oUHktaj+c7QFYc/qwreAiA6qV6thTiDNXhfXV5bYzG4p6Q9r53WISQzou7og/HB0w=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.0.1_1685036778061_0.7071682613082941"},"_hasShrinkwrap":false},"0.0.0-f687d25":{"name":"@cloudflare/next-on-pages","version":"0.0.0-f687d25","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"f687d25c49fb0407139e3a9a950dd40ec9cd9871","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-f687d25","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-zCZrf2UVDKwFHH92MluV49/6dgdaad1IU+soiLxc0Jin1T7cuBmum/86SbSiqs1f2R2hj7U25H5XeyLe0+3GGQ==","shasum":"e690de017c5ab821bb9ebd24498e1371b51568ff","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-f687d25.tgz","fileCount":14,"unpackedSize":554728,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDm9dvqdyqabVwXPKXkkkShheSXEKMIRirbu7oLlnTd+wIgJmg4VL56ew9g5dDaug58qQeA3CkXdtnG8PY5ep6oBEQ="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-f687d25_1685095726342_0.27710515731874064"},"_hasShrinkwrap":false},"0.0.0-ff90dde":{"name":"@cloudflare/next-on-pages","version":"0.0.0-ff90dde","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"ff90ddec2e4509ba036a1a05f5d8d3780166acef","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-ff90dde","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-7nuy9ILTczgpUClBZHhavj7ctAnGrYSlayG236anpcLpY0J5zpqxcrRDjoOvSaONIyU3uex5gPR+zeAD43uptA==","shasum":"43dc3b481bc1877125d2c246d4516ce033ea9ed4","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-ff90dde.tgz","fileCount":14,"unpackedSize":554887,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIB7Km7NWecIIuvuo37kvln2JLSWuRbrCa4sHgYzhht9QAiA1fwi1SMul/peRwC44sATZ++bfuhy3lmX+sBZhLLChag=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-ff90dde_1685116061967_0.18676680657039513"},"_hasShrinkwrap":false},"0.0.0-7deb9d8":{"name":"@cloudflare/next-on-pages","version":"0.0.0-7deb9d8","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"7deb9d8ca81dd3cbe31c30222fa998ef9f341bac","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-7deb9d8","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-DQfkx+FGq0+5ifF5xbdZyZWFLhDReP6p/nTcSj1zYBFbFqw6U5uwDE9aZnDCB5YzUj9fK9NeWte3mhoJIVMm0A==","shasum":"12750a5cc7376c90705bd8df3ba327076fbf4303","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-7deb9d8.tgz","fileCount":14,"unpackedSize":554888,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCf3YB8jIktRHwMQbLbcWYE0QAujiH+DFrJN2cnBGYm9AIhAL7G9CqHynpzMrVMVKn8mdBSNveF7Ndh/E3ngjzlF0Zy"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-7deb9d8_1685961677320_0.5834365597563993"},"_hasShrinkwrap":false},"0.0.0-d91b24b":{"name":"@cloudflare/next-on-pages","version":"0.0.0-d91b24b","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"d91b24b50c7d9125247504b38fe4296cd6878dc0","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-d91b24b","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-EgaD48ytii5xMnUzsrwyHpBYFN9OKNF2i1wnaUbj9zP8RKQaNVcGTrLjSeijEWyVPHwRzhxh+9RGlFdAyCCKnQ==","shasum":"de558610e1c4b4b456649742294b4e7906be3acf","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-d91b24b.tgz","fileCount":14,"unpackedSize":555775,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDAmAiPXwZx3zPxTYMCxJk7JIwN2nJx78Y8JeVFUSzYxwIgIn53T4l9Amug8uCiCMUtwAZxPAnxK5PxZZTkRfrVig0="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-d91b24b_1685963422902_0.8475001913485356"},"_hasShrinkwrap":false},"0.0.0-1a7e0e4":{"name":"@cloudflare/next-on-pages","version":"0.0.0-1a7e0e4","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"1a7e0e4bf421bf204e6e766341616c7ea4ed2c6c","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-1a7e0e4","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-iYdpkozwfr6oWMcNTxIa0piywHk7NPAytD1Xmjv4nO9wWRgrvPDYdzxbYF9j7QJPM/UvCiT4RUM8NTVM6Ek5/A==","shasum":"bdc74fae466090323e2c79e9077ee0d3ed6bfb56","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-1a7e0e4.tgz","fileCount":14,"unpackedSize":555775,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIHRJnk2kM4rpfJKEDVTL/Gwo2Q9SIQeUaqKXnGcsmt9dAiB1LUYPbJklxZU0Gcftqs/GONuS6yABChxYBO1Ed7hmew=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-1a7e0e4_1685980721986_0.46279771643813805"},"_hasShrinkwrap":false},"0.0.0-1703ed6":{"name":"@cloudflare/next-on-pages","version":"0.0.0-1703ed6","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"1703ed617e6d510fa501d19055f01dc0e0faa151","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-1703ed6","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-bHcjzMpYkFBEdSSWf0alppSvhEfUNlUB44E5w+NlPejuN7ocJDgZaCOl4gNtnW/UTBI6/mwcTR720heedvM+Ig==","shasum":"dc029309899de25ab63e818af26e87491dc7ae3b","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-1703ed6.tgz","fileCount":14,"unpackedSize":555775,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIHODrDF4r/JvTDxn+86vauF0+WMlZIfEyWrgP64xc5CQAiEA/iCEVc+C7HtPO+6fANA9pcvEX88AiZl6SD0yBB+soxg="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-1703ed6_1686050747620_0.16936228047321422"},"_hasShrinkwrap":false},"0.0.0-81ebcb7":{"name":"@cloudflare/next-on-pages","version":"0.0.0-81ebcb7","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"81ebcb787b3ed80bfe2c6e9bcbec363d00575fbb","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-81ebcb7","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-PC1ZZG8n5fVGlITsz1zs1P06pNdP3j8s2SCBu1PvFSJiQdWmn2575yaRDXeYaz83D9Sp1eb7gnuv7u06Sat6SQ==","shasum":"1140f461908b1cd58048fe698f6a829973f74fc8","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-81ebcb7.tgz","fileCount":14,"unpackedSize":555775,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIFWUF7sh6L4O7Q6KD2wsz68yy8UG5r/waoXkyaLMM/bCAiBdw4LsmC4bFCUN08jDaWEYP8wLQcLaSzhqxNyEI6+E5A=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-81ebcb7_1686050955071_0.32933317606202794"},"_hasShrinkwrap":false},"0.0.0-cb62938":{"name":"@cloudflare/next-on-pages","version":"0.0.0-cb62938","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"cb62938535a770bc72ad900b70b2c3c996b6772c","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-cb62938","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-xotHMcG3xGZFxTdIpPMg//2Obxh03RedMNWlE6Z1eU2DaSv4d606NCHgxuhV6SoXFZY0ciPcPi5sJi3EYOQL8g==","shasum":"95abe49af9a80f87ae3c8cf2f416c371d2293a8f","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-cb62938.tgz","fileCount":14,"unpackedSize":556299,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIEsiXmGIvhck7MblBuua7beF3OjmZPzXZZ38px6iWXxrAiANYRza2EHcGOJmWtR/+DF90dblZdm4GMJaVYF7fcI+oA=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-cb62938_1686065327999_0.9423952522879164"},"_hasShrinkwrap":false},"0.0.0-6455355":{"name":"@cloudflare/next-on-pages","version":"0.0.0-6455355","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"6455355531dbd8ca16978c442a8f6a591f032d96","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-6455355","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-s9GvZwI7MSqLwc9K9DWekighX3rt6dCZkSFzrXTWgi1IJ053pdhZRrraWl+eUCkxxw1B5MpI9GEH81Voh72bPg==","shasum":"3f0e072d27c402954de581db7d8591ee8a53cb3c","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-6455355.tgz","fileCount":14,"unpackedSize":556299,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQD02/Ua+Be7MkzhjUco6LRgR1JZ02xnZheLkMOKM9CXzAIgCRkNIK9MS3CqsfqtDC7Yaen/QgjIWjEKT9WCCMTqqRI="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-6455355_1686083647794_0.7527038977118594"},"_hasShrinkwrap":false},"1.0.2":{"name":"@cloudflare/next-on-pages","version":"1.0.2","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"gitHead":"6455355531dbd8ca16978c442a8f6a591f032d96","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@1.0.2","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-ikas9JB1KSaucLrwrHhHhjZ2Pdl0L4C60Vq0Duc/VlpfkJysP7HWkHa06Bb1hF8ME2jvmeN+nDbW/s6wpPPPQQ==","shasum":"2b02c3c70620f2639be069af50fe0bf68d9369f5","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.0.2.tgz","fileCount":14,"unpackedSize":556193,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDiD1y75p8gKcTamQoeqKV1ir9ffU1erBUEEtC6dWSXVQIhAPTyL+jK8/2zNPsvopcXm3Yb1kVn7g6vSx9hSIZymHr3"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.0.2_1686083664063_0.15574132995305878"},"_hasShrinkwrap":false},"0.0.0-3fa7019":{"name":"@cloudflare/next-on-pages","version":"0.0.0-3fa7019","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](./docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](./docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](./docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](./docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](./docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"3fa70198e0421d17ff8b80822f09e77e545b7ea0","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-3fa7019","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-0p9bLYAiwysNw2yWNiAykyPueH1AYYy43GP4HEJQCEczcqQ43ja+9kFPiNt0WfdRMxTq9KwT+k0vOCkxzj6NqA==","shasum":"7aaed2522b4286ce7c7dcb31417a5f8c5b0628e3","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-3fa7019.tgz","fileCount":14,"unpackedSize":557419,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDsi4oaXq6EMYLkbrxeTiwM/WBK2KdYGoKal5PXFmDUogIgCl/xL0cvXH/dnL9+uZ5nGCzTKobQL+ksoqCDscBZDRc="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-3fa7019_1686125367406_0.03798187432911648"},"_hasShrinkwrap":false},"0.0.0-7d0c0f8":{"name":"@cloudflare/next-on-pages","version":"0.0.0-7d0c0f8","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](https://github.com/cloudflare/next-on-pages/blob/main/docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](https://github.com/cloudflare/next-on-pages/blob/main/docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"7d0c0f8f988c3a4565a2e96580a2698ef42f9c1f","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-7d0c0f8","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-BJQtwzMiCL3AgkjoObrgygM/4ZpgLbUT2yWD0FbEyWXc+bTh3ogZR45oFOt8IJwKSO+cmlzt/hXHc/sEfJsTzA==","shasum":"de9017c1acc1dd54c00acf175d1d1152b4fcb266","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-7d0c0f8.tgz","fileCount":14,"unpackedSize":558414,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDi6QvbCpD2NDXQIHHaVSj6Kcs2rASP9We1mneony5lJwIgLQWP++SGozGAGCnB1cih3Kn/jxkBnsf20eoehlusx/0="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-7d0c0f8_1686151433846_0.45593635217610995"},"_hasShrinkwrap":false},"0.0.0-016b8d3":{"name":"@cloudflare/next-on-pages","version":"0.0.0-016b8d3","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](https://github.com/cloudflare/next-on-pages/blob/main/docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](https://github.com/cloudflare/next-on-pages/blob/main/docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"016b8d3eb3d0622f946527dcbd1c2cfc10924bc7","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-016b8d3","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-PNIEpRTRvchL3R70GC3AxVEf5WboC6fRbkIEFL9BVSAUTg78Leuhre3dr/+cO8259LXxb+/dDh6IU2c65QFkTw==","shasum":"6a2ba7f63c8cf02a5cd68397eda7f6803b9affb7","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-016b8d3.tgz","fileCount":14,"unpackedSize":558751,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIDDtFIHXEC+cFRdk0OSFq4mw+VUVz/zkDPAX6OyiFIRPAiEA58Aa2vcclZxdEy3JbOLXeNYIYdYel78cYTUpbxppWO4="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-016b8d3_1686162590274_0.06817114533450552"},"_hasShrinkwrap":false},"0.0.0-d835933":{"name":"@cloudflare/next-on-pages","version":"0.0.0-d835933","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](https://github.com/cloudflare/next-on-pages/blob/main/docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](https://github.com/cloudflare/next-on-pages/blob/main/docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"d83593338b8fa1d53558f92bbeec193e35324ef0","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-d835933","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Pb3d9cIZHpi0pr1fyGE8t0QhWaNc2yZkbr644CJAUWZOevs1p0Wp9KVHPShtVS29xdEQUxAFvHxewjyHobeyEw==","shasum":"faf979c80d7068ac684a99d82c64f5932660e15f","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-d835933.tgz","fileCount":14,"unpackedSize":558752,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDWjErM6tCQnIPQe6B+ZqxBYPryXxZgAAbHqse2J33drwIgQksZLDI1xmgQTv40PsAn1kPMOIlsCOIPSdlgU6cO5dA="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-d835933_1686695749728_0.2059099157797326"},"_hasShrinkwrap":false},"0.0.0-1be5e72":{"name":"@cloudflare/next-on-pages","version":"0.0.0-1be5e72","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"next-on-pages-vercel-cli":"29.3.0-next-on-pages-fix-3","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](https://github.com/cloudflare/next-on-pages/blob/main/docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](https://github.com/cloudflare/next-on-pages/blob/main/docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"1be5e72e5676e2f51c6597edde509ddd1b51a818","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-1be5e72","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-OrcLFVDHptRifBqWgCCIf9FcLZyWAMpYNkdxMEhRk7SyR9KC3jLMC7SEOBcV7v4rGt2M9tia0IyLq2PwflohTw==","shasum":"dac077d4545e2e756d17374d565d3469bbf256d9","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-1be5e72.tgz","fileCount":14,"unpackedSize":559166,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIGcVfd8QS1DOiCvT8TUoL3XrdbHliq7bKe+z3klcyvPnAiEApcI61hodJA9+w9AwB4EpbikdBeF/E4fLSMYr7oaEH1k="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-1be5e72_1686735434869_0.20675772129698844"},"_hasShrinkwrap":false},"0.0.0-e48c4a0":{"name":"@cloudflare/next-on-pages","version":"0.0.0-e48c4a0","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](https://github.com/cloudflare/next-on-pages/blob/main/docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](https://github.com/cloudflare/next-on-pages/blob/main/docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"e48c4a09740db474ede116e99cd41e11bc539bd3","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-e48c4a0","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-ccIxL5cufdzecmLFClxV5KKhKtxgRIqCfhpbG6P+HXZlfMWB6j0jRUjb/9KskxHvhcmTVcUenS8gHGWnKN6j1g==","shasum":"6b145b0aa8c2b57187c640e3f4840bb3d6bad311","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-e48c4a0.tgz","fileCount":14,"unpackedSize":558996,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIG9KDh2IAC/aeViHOE/WY4TK5k9dB+wVwphfeiPb8XqpAiAc3qqrAY8jO/x+2buMMh+EfW69U3i5Ug0k+vYIyE+z2w=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-e48c4a0_1686741508449_0.6790584957988635"},"_hasShrinkwrap":false},"0.0.0-783dc79":{"name":"@cloudflare/next-on-pages","version":"0.0.0-783dc79","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](https://github.com/cloudflare/next-on-pages/blob/main/docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](https://github.com/cloudflare/next-on-pages/blob/main/docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"783dc7993da06db7bd2f15c09b633b42ba597092","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-783dc79","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-i3GJan0imMHwZfWRLNLVEQvcRpx0ffxhkB7Y69UI+HiWWEyBU60AEqYMGUtDxihEunzbaFpa3dGEp0y4FCyeyQ==","shasum":"d3630a6703cccc8777b49e64d3c04d7bcfee954f","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-783dc79.tgz","fileCount":14,"unpackedSize":559018,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCHTrX8VHlGCB/eOqYham2z3/UT6Pl+meLF0pr1cMfWxQIgVWN+aZGG/bmeB2Cf3tNt4MKNBHE0k+KmAbu0f/BZvqo="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-783dc79_1686820067367_0.018495539572754627"},"_hasShrinkwrap":false},"0.0.0-fb818bf":{"name":"@cloudflare/next-on-pages","version":"0.0.0-fb818bf","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](https://github.com/cloudflare/next-on-pages/blob/main/docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](https://github.com/cloudflare/next-on-pages/blob/main/docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"fb818bf218e859e5c53f9b35253c65fcc16c7aad","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-fb818bf","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-zM0XkLSJjoQNbuq8m3MCjS4xynUBZzmo+RGk/IosjmbAc0q63ophE38i8FNnMksOHTHLYL34f5SHxsHHj9My3w==","shasum":"a0dd7f5b4564cf7526f7b8295ccdb77d7e1676dd","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-fb818bf.tgz","fileCount":14,"unpackedSize":560378,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDEaVrh47T9v7aMG+zzr3o+ZDvszYROGQwxrQRZy/ixxAIgcnXUt1EDGVDDLcPrEhIqUqSObLcCKqZe9Su48rufaME="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-fb818bf_1686836241436_0.8707440530957902"},"_hasShrinkwrap":false},"1.1.0":{"name":"@cloudflare/next-on-pages","version":"1.1.0","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"gitHead":"1f930d34f42cf61a07a4af3b35a06329435da047","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@1.1.0","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-W/5c7nG44hZgh/+iP4I7g7IKCLCddb6AEqL+VJDKBgFZrK3v7g8sNO65KeKsnI70vvGv3MHX/rmNYaZoOkOLOA==","shasum":"9f743e4c119f9eb0afa4f90f79019a4a75eaec59","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.1.0.tgz","fileCount":14,"unpackedSize":560272,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIBxTlYzqrxFTlMC6VAdHzZV//V4rxmqSgzCj5vswyCeKAiEAjBUodXSE5Lb34/84B6lvZCOK7r47UFrkg4SDqOio5OE="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.1.0_1686836642468_0.1331484576573536"},"_hasShrinkwrap":false},"0.0.0-1f930d3":{"name":"@cloudflare/next-on-pages","version":"0.0.0-1f930d3","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"npx prettier --ignore-unknown --ignore-path=.gitignore .","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"npx esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch","prepare":"npm run build","publish":"npm run build && npx changeset publish","changeset":"npx changeset","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"<p align=\"center\">\n  <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>\n\n  <p align=\"center\">Build, develop, and deploy Next.js apps for Cloudflare Pages.</p>\n</p>\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/docs/examples.md). Additionally, ensure that your application is not using any [unsupported APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/docs/examples.md).\n\n## Contributing\n\nIf you want to contribute to this project please refer to the [Contributing document](https://github.com/cloudflare/next-on-pages/blob/main/docs/contributing.md).\n\n## References\n\nExtra references you might be interested in:\n\n- [Blog post](https://blog.cloudflare.com/next-on-pages)\n\n  The original blog post introducing `@cloudflare/next-on-pages` (24/10/2022), it goes into details on the inspiration for this package and provides some details on how it works.\n\n- [Cloudflare Next.js Guide](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n\n  Cloudflare guide on how to create and deploy a Next.js application. The application can be either static (and deployed as simple static assets) or dynamic using the edge runtime (using `@cloudflare/next-on-pages`).\n\n- [Technical Documentation](https://github.com/cloudflare/next-on-pages/blob/main/docs/technical)\n\n  Explanations and insights into how `@cloudflare/next-on-pages` works, design decisions behind different aspects, and how it handles different Next.js features.\n","readmeFilename":"README.md","gitHead":"1f930d34f42cf61a07a4af3b35a06329435da047","description":"<p align=\"center\">   <h1 align=\"center\">⚡▲ <code>@cloudflare/next-on-pages</code> ▲⚡</h1>","_id":"@cloudflare/next-on-pages@0.0.0-1f930d3","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-/04+I3nwrv8E7VkQ6CPIq5Jj4MRloYKlmNMFko+9XSzgjt7i9POgWcNV+OGaKfzW7A40kHzbkucLoMJ+JPt18g==","shasum":"6fbe648757da645ce830d5cf93170a114c5a2162","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-1f930d3.tgz","fileCount":14,"unpackedSize":560378,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQD7EbuYCrYisf59WBERN+I7G6gAcwpfuhlWEGGfaBoP0wIgP7sn7Iq3oEmAcB/3uahLAivzejHM3uUDBPBfhISAGhw="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-1f930d3_1686836650403_0.5968804852729113"},"_hasShrinkwrap":false},"0.0.0-14a0e77":{"name":"@cloudflare/next-on-pages","version":"0.0.0-14a0e77","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","publish":"npm run build && changeset publish","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/eslint-config-next-on-pages":"*"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.","readmeFilename":"README.md","gitHead":"14a0e774f4b55777761080ab1c668c02a13d5481","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-14a0e77","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-TKN5YI7R0fVficM3cmv165qsWnl1E/R+5Xfd+RxPjh3ekYwkoXyuk+xUhBYjgFOKtyiv08BjvFeNsLNAggNG8A==","shasum":"0e0c7f8550a2e4eba9c63f7836599f51306af2ea","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-14a0e77.tgz","fileCount":14,"unpackedSize":560258,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIBJvJqUxjgGyMCiNPsz52wWj9gvLAsabPCOoZjFoLRo0AiAG7drs8Hm++26JFHDkB2LDfZVKEFND2RihGj+UQ5rnwg=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-14a0e77_1687356423782_0.1921123546814003"},"_hasShrinkwrap":false},"0.0.0-cad492b":{"name":"@cloudflare/next-on-pages","version":"0.0.0-cad492b","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","publish":"npm run build && changeset publish","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/eslint-config-next-on-pages":"*"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.","readmeFilename":"README.md","gitHead":"cad492bb952640971b7047e9a0c1d28b350576fa","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-cad492b","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-u5515nsTTYnxrdI65A8gugtjqdFaSZNhqzcb0LXR2CZra4E6LnJRnYN4sYMfxDk0fDRLYc+Q1b+0xBO7i6bhCQ==","shasum":"80d01e5f33d640a3e34b1df63dfedbc23a6bd2f0","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-cad492b.tgz","fileCount":14,"unpackedSize":560258,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIFy9LHlion3CGDoN0bDxkE8IZ8Un7kfArZUb/tbICum+AiAUau/X9rLVkGcMhxYbwPo5ZBdhfop8hBnD5DdRvQTnxA=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-cad492b_1687469495619_0.9969380300649753"},"_hasShrinkwrap":false},"0.0.0-b1c3a33":{"name":"@cloudflare/next-on-pages","version":"0.0.0-b1c3a33","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","publish":"npm run build && changeset publish","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/eslint-config-next-on-pages":"*"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.","readmeFilename":"README.md","gitHead":"b1c3a3389b64d6370136d3bff08991edc9de43c1","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-b1c3a33","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-G0HHCGHA+8HXB0fLDhEMu6KhKSaf7e9CAyT9rAt5K7O8qh+lD4q5iPkWDBRoOO2tlaurlD6Oiws30vTvJKP7/Q==","shasum":"dfce2d412ae1503837649f549bfbbfc98cb82d78","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-b1c3a33.tgz","fileCount":14,"unpackedSize":560367,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIE9SVdA1n7VyhIUZviLDqUuUg5HgKl6D8mvArkDKaBZZAiAqtZXhEqiALnDqoz0QCoz4p8c7lMhtA6GbmfXAeG7WWA=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-b1c3a33_1687471625592_0.7739095741306188"},"_hasShrinkwrap":false},"0.0.0-cc6c114":{"name":"@cloudflare/next-on-pages","version":"0.0.0-cc6c114","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","publish":"npm run build && changeset publish","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/eslint-config-next-on-pages":"*"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.","readmeFilename":"README.md","gitHead":"cc6c1140cc9ff656ffb5b9cf728b2e985dcaa139","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-cc6c114","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-HvcC6JfdcxAzaiTKk8elqqqB0NdeN+etoyoqbuc8fH6eButMG2Wc6lWSH3wYWZrDelX+JJlXiCrXJTt/RiUvmA==","shasum":"118946d9ba25d14142f6fb0e3a17bc027b19f447","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-cc6c114.tgz","fileCount":14,"unpackedSize":560367,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIGEHcMiJ9qtC1xcOPMrtdwpAc5Re7nmzUgLZu802JxjQAiA8hbd5S3280WwhZD6CRkgaYtbuEUC4JVzB6CrYbm/PRQ=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-cc6c114_1687515671333_0.9489547262326761"},"_hasShrinkwrap":false},"0.0.0-a9b8c3c":{"name":"@cloudflare/next-on-pages","version":"0.0.0-a9b8c3c","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","publish":"npm run build && changeset publish","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/eslint-config-next-on-pages":"*"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.","readmeFilename":"README.md","gitHead":"a9b8c3cf5ef8ce1cc5156cb1f24287f508666c60","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-a9b8c3c","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-mIRf3TAwfJ/BE9O/vyQGpqlC3C0RGXbRKALR6e+bpezdMY65A29IlYe/Xdj4SRnD9IZeefKVWRTr5VmKQzS5Xg==","shasum":"3d7ade1d7493713f6e2c13a2f6bb1b15e6010dcd","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-a9b8c3c.tgz","fileCount":14,"unpackedSize":560336,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDr+GX4opHYhR5cZBfFUhmEna8JmNCqEoK09WiI1HUK0QIhALpW7yR+Pm69o7EZNN5IM9fbywK3gv+8SrDH2Fb/4Vdl"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-a9b8c3c_1687715544977_0.07566852985521355"},"_hasShrinkwrap":false},"0.0.0-e6cdfaa":{"name":"@cloudflare/next-on-pages","version":"0.0.0-e6cdfaa","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.","readmeFilename":"README.md","gitHead":"e6cdfaa02618c0c1a426a99cd85bb9d25d7fe4a2","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-e6cdfaa","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-NEKmq4ep9VHwwa/ENuwWwunIdJUvUtVYVUKBH1BLaCHZ7jf2EhHdDBiQyahFZMlmZC/ewz352qwZHhdzJXezOg==","shasum":"6d3d97e749204d6f01405aa6057239719e7eba16","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-e6cdfaa.tgz","fileCount":14,"unpackedSize":560040,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIBcokr+jisoleE0nO+X80FMfNV+feVw42H8GgpEtAchZAiAVIDwOOabKl9frd02nhI3PrfIJ8CXIY8FXXENoAItyNg=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-e6cdfaa_1687771208082_0.07041680797506977"},"_hasShrinkwrap":false},"0.0.0-b97ad52":{"name":"@cloudflare/next-on-pages","version":"0.0.0-b97ad52","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.","readmeFilename":"README.md","gitHead":"b97ad5229edca48998c309e6e013eeaa5a36e64d","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-b97ad52","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-/nqdeSklpyi+aro3l5SUQ9137twHW6s/+ex+5a4ZY/5//4AE/lnN6sUXTqY8lDNjcHTbvenhPkWzDxOU04Kgfw==","shasum":"9bea4af9b1f1a0db321edebd540ef59a3551f492","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-b97ad52.tgz","fileCount":14,"unpackedSize":560040,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIBZQf7Mu4rWqYpcX8I+SGrCLy2efMvPSfCkwdPcCWxu1AiEAnNbPVuDpmFh3EGRWIShHl1aVMtmMUWNG7o6drJ8KAcU="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-b97ad52_1687772667251_0.38953988402583706"},"_hasShrinkwrap":false},"0.0.0-2f63de8":{"name":"@cloudflare/next-on-pages","version":"0.0.0-2f63de8","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.","readmeFilename":"README.md","gitHead":"2f63de8a0d6d2cb9d930dda6fdfa92fe6f5f3f04","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-2f63de8","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-LNx/jvhvO46IWyU736evdgAsf1ttjyurZPKSvYcoScVz0acoZihar2wSu2hFBAsxt7KCH3fPgfjPjM4Gp5jCHA==","shasum":"75a9873bfa0a2f860c6f9533764e0ddeb737998e","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-2f63de8.tgz","fileCount":14,"unpackedSize":560040,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIBRsvKHfSznUYc5wCr4jsDYr2vTq2sFV8p98w2atfST7AiEA1KwDS+JbCDIg+h8mBDhe5ZV+8jekFy2/Ep4TzCRPRYo="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-2f63de8_1687772929021_0.8399997809883453"},"_hasShrinkwrap":false},"1.0.3":{"name":"@cloudflare/next-on-pages","version":"1.0.3","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"gitHead":"2f63de8a0d6d2cb9d930dda6fdfa92fe6f5f3f04","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@1.0.3","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-HmFQvrz9hxyor8PAh4/kvStiYrzK5wyBqagl4gRJZVesoG1fdGm0TVlL2RGhQiu8XXoQnCUtDepsDZRELnH7aw==","shasum":"7fbdd346b04dbdd582d11a5b9030aa15e857a6ef","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.0.3.tgz","fileCount":14,"unpackedSize":559934,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCpIc5GkYF+AeCvVq8iumyyviJLSPXudoX0NyyiW9qCSQIgGX4IpbA4soq48XHopYgpsZexr5PHn9UvES4/N3x7JQo="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.0.3_1687772946390_0.623047197506851"},"_hasShrinkwrap":false},"0.0.0-2c87481":{"name":"@cloudflare/next-on-pages","version":"0.0.0-2c87481","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.","readmeFilename":"README.md","gitHead":"2c8748176ffed5d50585bd86e14b1f2c974d0c96","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-2c87481","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-0g2HchRVO65SUNTJeg7SDaUVH9kdB9Xl1CSlF2TM+9aG9IfB10In7t1xkb8xxA3eBRRoWo5dc3babkT0CrIVjA==","shasum":"7a499c5cccc8408610a6a365cc582e0fb8c9597d","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-2c87481.tgz","fileCount":14,"unpackedSize":564458,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCVNmaz5ni4loNQ3A6GYyMY8BGhM63mnl9kcjiX0M5yCgIgcsgDUqfnb1N+G2GzDTAwTWtIFVg1pD0OAAYhlK2z7AI="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-2c87481_1687773611681_0.8574626443767595"},"_hasShrinkwrap":false},"1.1.1":{"name":"@cloudflare/next-on-pages","version":"1.1.1","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"gitHead":"b02165031a3caa5a322cd2bd0f31fdd7c4e54152","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@1.1.1","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-uaON3/cI9bsTRr6bWc+sJamQ4ZAmq6u7G6hlrdgTGdOb6GJvwU/FDG988/5SvlZ1/+C6k4kF7eP6gHJ8jQtNnw==","shasum":"608fb84cc563aacea00d83ae0828a2ae0f7a405c","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.1.1.tgz","fileCount":14,"unpackedSize":564352,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIDVvrqezd3P5y2v39bZ9SAQ08E1qj8W11RTjCXUPTW7yAiEAuPH/pZDrmpOkTZtm1M+ZN6MYciI+w0UP99YzivCdL3k="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.1.1_1687776504530_0.1268876508158805"},"_hasShrinkwrap":false},"0.0.0-b021650":{"name":"@cloudflare/next-on-pages","version":"0.0.0-b021650","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.1","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.","readmeFilename":"README.md","gitHead":"b02165031a3caa5a322cd2bd0f31fdd7c4e54152","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-b021650","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-hu1wLJyHHK2iL1v8lj4Rwa+QqoQKvpxWjb5YD1+zb9fW6ltXn8KhlLP2thrzxDvqaVuQCU9njR9aA6nThs2YvQ==","shasum":"f113b0a1e452a4f69ebb08244731b0d22b8b7050","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-b021650.tgz","fileCount":14,"unpackedSize":564458,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQD0R1ZZH+EsniW7XFb/DjaF2JDzyJ75JUwJjHwoct4XiQIgMN7mb4qlS9g4S0f3PrYtgnC3NaLomvR/D0Cy5bSh4XM="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-b021650_1687776511869_0.9103592325598651"},"_hasShrinkwrap":false},"0.0.0-64b8579":{"name":"@cloudflare/next-on-pages","version":"0.0.0-64b8579","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.","readmeFilename":"README.md","gitHead":"64b8579de1f3ae9b1d25d5aa956531c7a27482ab","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-64b8579","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-B3yhlO8eOQ7LofMbXeBRyIZxqh0RE1bTGcoawlsXYZrnSf9QzxppmArut+3n1OWq5diDGI4/+UAEun8g85V3YQ==","shasum":"4844e9dfd26a1a09f80c3660705f09d0843a05e6","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-64b8579.tgz","fileCount":14,"unpackedSize":564869,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCICyfczL24gv9GeAmqBm8bAYCobJ9wCvRrBJURNIPm4+OAiEA7cIqUKiYeQyU9kC7A5qSyIZ+RMJv1syuqa0PYNHDSsI="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-64b8579_1687785705080_0.8506308517765251"},"_hasShrinkwrap":false},"0.0.0-2dceb75":{"name":"@cloudflare/next-on-pages","version":"0.0.0-2dceb75","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.","readmeFilename":"README.md","gitHead":"2dceb750f55cacbda56a4aa784e598fb8b2d0982","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-2dceb75","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-FTBjyfK5E0eMjWK8t9tRL1XLoGoTrAGkP3JjUwd6ykZ93V03E8ZWPbzMUAJYnC3Y/StVKLyJcXeCkO4TR6+cfA==","shasum":"9bb005cff1cde5b58bb9186a7036fd82515aebd4","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-2dceb75.tgz","fileCount":14,"unpackedSize":565338,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCxjinFNnWdmIijynJIhxlfnGM0TITyBS/Ivo5T4w1z2gIhAOAHvMJcC2Zrm5vxYYbMtg/+w+DNLZ1KxWe3guyke/ax"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-2dceb75_1687790014111_0.8635162977907513"},"_hasShrinkwrap":false},"0.0.0-2f9cf97":{"name":"@cloudflare/next-on-pages","version":"0.0.0-2f9cf97","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.","readmeFilename":"README.md","gitHead":"2f9cf971f845a6883c5e1f5367fad2596ab8caf3","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-2f9cf97","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-KMiUZz08sbvSQdZuwQJoK+BiImUBMEHkYzFPKG/7pqiT6JvAx3xanvojWAc8sL33sIYhO+3w0+6vRTfsKO+BtA==","shasum":"ac52b71777a71a1ba8175face95f3ced3cdd6e42","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-2f9cf97.tgz","fileCount":14,"unpackedSize":568039,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIFoqcTIrxnE0vrndUFkIsihcrRqzqd6vNiii3mdOtMRuAiAVL1KLSFcX28vptxKpry6yNnSyAtJAaIqrW+u6KcgVeA=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-2f9cf97_1687797233954_0.13125215163215764"},"_hasShrinkwrap":false},"0.0.0-63002ef":{"name":"@cloudflare/next-on-pages","version":"0.0.0-63002ef","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.","readmeFilename":"README.md","gitHead":"63002ef953f6d4935867b15595d60375d7974836","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-63002ef","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-VjIukqQ4r0SHEwz4OtVoto6ZRWIwFp2Lv/k8HWWqZIVLaWxr4/npYxn2o1+eKC+p7QYpChCcUmAYZ4UrkRQ5mg==","shasum":"3342dcfdf49a91ce7bc9c98adeeba4dd5af60e48","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-63002ef.tgz","fileCount":14,"unpackedSize":568039,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQC4XI+A5jSpd7LjrvmuXd/yjRcfFLyBbIO+y+wOqZHy3gIgOdMy+BRVkRrCJ7XzjJFiEoPIgoOugwdXxqsMQjzETCw="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-63002ef_1687797616867_0.4473266708199761"},"_hasShrinkwrap":false},"0.0.0-6212bfd":{"name":"@cloudflare/next-on-pages","version":"0.0.0-6212bfd","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.","readmeFilename":"README.md","gitHead":"6212bfd5ba50af00f91ae42bb6667ab7663dd936","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-6212bfd","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Wdr+ME+h4OklRxGbHVJm0D6WBVrVoIeIn4wgxeIlk8crdUBCnWmWpv66s9n5Lly8qiYQoWO6Y6p/a6OGFmenfQ==","shasum":"3738f83f9ef307513ff57b68423de5d33f0ccac4","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-6212bfd.tgz","fileCount":14,"unpackedSize":568072,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQC5eUTmaQzG3Iq+GqWL0DElrb6LgJdP/mDFCyNtsWqtRAIgd7eEPC8rn/kGAM0LBWSt6xkBHj+Z0T22UCMdgCvOSc0="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-6212bfd_1687802414562_0.24411256519694802"},"_hasShrinkwrap":false},"0.0.0-f879ffd":{"name":"@cloudflare/next-on-pages","version":"0.0.0-f879ffd","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.","readmeFilename":"README.md","gitHead":"f879ffd7f6031bdff6420ad53047aa31c3c39f97","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-f879ffd","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-4JYREUJOWvLxTpgB+VkNqun38RZW4IX1+hWyQAF26wjlMZUZrCd9ltlzfDL4b1msxarUz4VnUv5S4wRRyDqlRg==","shasum":"4ebdd3b8b7134b4a14d91679050465ea7fcd71b4","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-f879ffd.tgz","fileCount":14,"unpackedSize":568964,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIAcYhbGV4Yf1L6yLLktPkWtmfDa31VSdbTsHSO9IijYrAiArOyaHgtHyW4smUj3DxZg5TCjakq1cHz1Qv9FqGM2lLw=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-f879ffd_1687812264769_0.2879491047376972"},"_hasShrinkwrap":false},"0.0.0-daa32fd":{"name":"@cloudflare/next-on-pages","version":"0.0.0-daa32fd","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.","readmeFilename":"README.md","gitHead":"daa32fd41dfb7eea9b5fe7cf337c6cbcf23d951a","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-daa32fd","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-UmK3wshQioWYKo9byc4V6lwpMzTRjzsaL/eiUihwQSvAaVrxWIpu0+QJAmMl3WNQZ58Ovp6ww49Vuw38SLuPNg==","shasum":"2c1aab95edc7d0487dca473535967d17621344fb","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-daa32fd.tgz","fileCount":14,"unpackedSize":568964,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIH7G/vvEgq7Qts26Rbmzn8G7xt5WdFD7ame0oTvaEcnmAiEAg/XMpiW987Gp3k46v19YqaMX5GSPfm6EjNR76nXrEKk="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-daa32fd_1687869844626_0.6471942424593584"},"_hasShrinkwrap":false},"0.0.0-c21c995":{"name":"@cloudflare/next-on-pages","version":"0.0.0-c21c995","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","@typescript-eslint/eslint-plugin":"^5.58.0","@typescript-eslint/parser":"^5.58.0","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.","readmeFilename":"README.md","gitHead":"c21c995eda91e5fb27a424c7db4bc1b434eff2e6","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-c21c995","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Yb7I+ktwaO/PhhwSSOr//Yoco5YvTVrUjPoV0O68q5Z1UfnJn1JROVVaa8vkAo+EBYAkNJTDyPWwMYGHeXMedw==","shasum":"f46fc4147514a6251b961d69dc33c1a20a3703a9","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-c21c995.tgz","fileCount":14,"unpackedSize":568964,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQD/HY1URsnWevEPqTYss034ZxkdL/nBmqeZ5qx3O5ccfAIgSJOy3HTGb7eGkrHxao4a2G3HuG69e+ZMU4l42RPZdPA="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-c21c995_1687942164127_0.05884793101494523"},"_hasShrinkwrap":false},"0.0.0-68d905e":{"name":"@cloudflare/next-on-pages","version":"0.0.0-68d905e","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.","readmeFilename":"README.md","gitHead":"68d905ed16c92aa36ad4b376639eebcd969cd267","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-68d905e","_nodeVersion":"16.20.0","_npmVersion":"8.19.4","dist":{"integrity":"sha512-9qkl2fr9lULr8FdXWs6P9cf5cWGpX33omhM9jIZr5v/Hs2UmJ3FvPz/laLQVuOGoXuIHUCpf42/4dRqFdpmt3w==","shasum":"fa91ea0990d90da275656b0526f848344069a15a","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-68d905e.tgz","fileCount":14,"unpackedSize":568778,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIH4TrMMH1ymYfZEh6kR0z0GlYtv1c7r7yor/pZK2aOkzAiBA3xriO7FKWs2uzO5TILYNJAWK/GtKFQhjyzEuCQKVxQ=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-68d905e_1687969587675_0.9542975948833388"},"_hasShrinkwrap":false},"0.0.0-3a95489":{"name":"@cloudflare/next-on-pages","version":"0.0.0-3a95489","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.","readmeFilename":"README.md","gitHead":"3a95489ebc49f16dc6e60d64c47378c433ac48e3","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-3a95489","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-kMXMdDUGEapMcLpmJ/RsPJVfhLCmjjI9v92YodIqREtJ9tUYpvCYKZFcpc5WcNdJLK0j60TDwsLh9xa+Yjf0bg==","shasum":"d2430f73014ce8f3c627f3d48766a608f8ab0146","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-3a95489.tgz","fileCount":14,"unpackedSize":568817,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCXakrM70Pf53/h6Hed6HQi0qgavJRdr6kNxH5dBDkoLAIgbvRwKSua/bZUhosUBnufCtXXhkFrJjrFXdREVZctqQE="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-3a95489_1688031001343_0.5027864132025184"},"_hasShrinkwrap":false},"1.2.0":{"name":"@cloudflare/next-on-pages","version":"1.2.0","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"gitHead":"8346e05eae4aa4420c4cd27762985c2b9174bd7d","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@1.2.0","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-BZv2m/MJ7S5mnhroKwQr7zEux5NZPRX/SstS1vIe73jTSdY/yDYoZ/Y2hQ8sOtb0kFspq4QFSCIlXkSSY9EuQA==","shasum":"fd655f7877a7f7173e1e7f0c0fef66a6eacef578","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.2.0.tgz","fileCount":14,"unpackedSize":568711,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDIKEaL6Y+BjyHq4FwMDH+Y4dpvwQvTx+LfID5GrXQ/GAIhAMvKdX0R3/7Db1m+SQGgVU8C7ZzfVLKPtuxLcf0RuemJ"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.2.0_1688034659145_0.6266842337400562"},"_hasShrinkwrap":false},"0.0.0-8346e05":{"name":"@cloudflare/next-on-pages","version":"0.0.0-8346e05","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.","readmeFilename":"README.md","gitHead":"8346e05eae4aa4420c4cd27762985c2b9174bd7d","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-8346e05","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-LMYcZhBGkSL58CQRAfXP4mfSfjQcp1QtPntiWSzK09oO65ApiBksfjEQwuuwYYfeJjZ3+nQO/XY1kqd/zsTKEg==","shasum":"30354336c4388fb15a62982a31adcb1ef5098bca","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-8346e05.tgz","fileCount":14,"unpackedSize":568817,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIAWOcDf6bmcny7tXTN9X3Yzl3ermsoLEKhcqZxrTHG05AiEA/W34J7EeJTjPVketr+LsMMKi+DpkPFI0pxmf/Wash64="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-8346e05_1688034673267_0.38228048041014384"},"_hasShrinkwrap":false},"0.0.0-68dd9e9":{"name":"@cloudflare/next-on-pages","version":"0.0.0-68dd9e9","bin":{"next-on-pages":"bin/index.js"},"scripts":{"prettier":"prettier --ignore-unknown src templates tests","prettier:check":"npm run prettier -- --check","prettier:fix":"npm run prettier -- --write","lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.31.0","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.","readmeFilename":"README.md","gitHead":"68dd9e97393f5499323a620f94ea87a07011d34b","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-68dd9e9","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-JeFoDhlWke2msnI27iVBosJRPH/ZlFQIWgLWbm7JYvvsBjQpOhm42ORClBp633sZabB4UjoNqCo6H+gegljkag==","shasum":"c3442b318eb64c32917d07b2598c6caceb4702b7","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-68dd9e9.tgz","fileCount":14,"unpackedSize":568817,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDaP/waF6sgFG8l5SHoxcbEMza8/wYGv7UNWQeAszw9TwIhAJKzsui+B5/ttPQ47Dzy3BDufBkJlp9BJ/EK7BP6SHtB"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-68dd9e9_1688045240485_0.2764244206597648"},"_hasShrinkwrap":false},"0.0.0-b151505":{"name":"@cloudflare/next-on-pages","version":"0.0.0-b151505","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"b1515059c3e770fd6de00fceaa316abe9b6aa9a3","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-b151505","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-U/JAIO9txFurVV0kqchB748bbjPPTrl1XbwRJeK2zLg1ZmREMeQF1MxSGFunbQAL1x4RE3qMHw2rWwMrQyESew==","shasum":"a8d2c7b1a9946789183560b2146d33a5a9c67b64","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-b151505.tgz","fileCount":14,"unpackedSize":568579,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCBhmnC1FR4JNkye7uIF/GiHp7gYCY574P1XJU4fB/98wIgRG7QTtnelcDcs81Fpn6AyymfaIzUHuFa59/JnSNoQmw="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-b151505_1688145698460_0.41059395995503123"},"_hasShrinkwrap":false},"0.0.0-9a66adc":{"name":"@cloudflare/next-on-pages","version":"0.0.0-9a66adc","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"9a66adc9e99a033792a594750942f6917fccaa90","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-9a66adc","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-j3QpWd8xXhzIgQk3Zp2Z98+oMohHSbEGV4rHBDomvJR2gIiBRuhMoEmn4qFRdf3jcDAvIG4+e0g1et3pxmYz1w==","shasum":"50ee977b893f1c43853d455aeaee64331c5e2d18","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-9a66adc.tgz","fileCount":14,"unpackedSize":568579,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCrTjgTa8e6c/+y6hs5xZFDBAHs5fvHnVsiW8gjIzElHQIgYuFzjcchCqqPxnSJI1cJT+6B+gQfTeBQ4wlAeD7EoTU="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-9a66adc_1688323776358_0.38885750374175987"},"_hasShrinkwrap":false},"0.0.0-6bf6480":{"name":"@cloudflare/next-on-pages","version":"0.0.0-6bf6480","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"6bf64800224f335c5f8da2e492901e95d9054d29","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-6bf6480","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-ixeBawHCeR+TR+hjmYQBi3L+xHEGZxE4M8LzMNj2ANHsPydO5t5dpLd9cbRYWfMehWht88VLt78SHEIJMD9Pmw==","shasum":"da02de6046dbe93bedca1907d3469fce21be6fab","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-6bf6480.tgz","fileCount":14,"unpackedSize":568579,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQD4B5+SrF0mz0fyLrSTtdQ2N97E6Z7DTevS0gjxXKdgqAIgbpIsxwbKTacNxqDBpP9Mu+ch2N6AyCxR/2w1xF+/8Qo="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-6bf6480_1688373693196_0.30036873955884924"},"_hasShrinkwrap":false},"0.0.0-adf0713":{"name":"@cloudflare/next-on-pages","version":"0.0.0-adf0713","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"adf07135dd0aca881c29f0af191fddb1611a9ddb","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-adf0713","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Y73vx1rGo9ppqntTzl2g0IwgRtto5eYcEKIlUfbusW5lMvlA7GymU+VXru2e7bILwv58XBXZatk9QFJ3RVbA+A==","shasum":"a327d4975e04387879754c66c0d60bc7d2e1f719","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-adf0713.tgz","fileCount":14,"unpackedSize":568579,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIGFFKBmFnNju5NxOE7gcEazw7gpx6tUMcfTy0iPJ2XFMAiAYecA5ysYLZRrkZvwZeditciK0+yJOBUI26SzDOGxMmQ=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-adf0713_1688400903024_0.15444937660905644"},"_hasShrinkwrap":false},"0.0.0-cb7ab43":{"name":"@cloudflare/next-on-pages","version":"0.0.0-cb7ab43","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"cb7ab43b44fa0696cbd27417e4d609252150c8f2","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-cb7ab43","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-w5SPBgNorgX3ZwcWiK7/JyJdA8u57ZwSUoXL/Q45A87qsKlhubd2r4zZPSM7Zi2vUONgCeAkDFZBEJkXmKCdxQ==","shasum":"ac7558f1a122eb921e2cb1142c9c576f6ec68bf4","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-cb7ab43.tgz","fileCount":15,"unpackedSize":573823,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQC4xk1EXQEr1c0vTYUxZs4jP4eWm3DtFHRJDFYiHdpAowIgI1WEPE/wfa8DPJmsJJgK5E+2nATbBIjOwp5+4STpmuY="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-cb7ab43_1688404893422_0.5076565827833681"},"_hasShrinkwrap":false},"0.0.0-c0ab05a":{"name":"@cloudflare/next-on-pages","version":"0.0.0-c0ab05a","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"c0ab05a460ca430a73495f14a39a6cda5c505e1b","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-c0ab05a","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-ER8VAyGBNbPb9WhUEjtbZqjAWPsV1Erl7plU08UG/9jz3OledEGPRhB9Jg+Tzj7kuNDidIVCpLIl7xOh7y9uKw==","shasum":"84ced10f689254fcf9903d699505522270f3f6c5","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-c0ab05a.tgz","fileCount":15,"unpackedSize":573011,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIFsKx0Y8xR7+SPVbp6RtvjHDNZXvgCICIiImQ0DnzWPiAiA+WDk+1bnn9Z/fcH3Bw6TrHAZk5xlvJcfWUyHaFEe23w=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-c0ab05a_1688470594379_0.7924439028064192"},"_hasShrinkwrap":false},"0.0.0-92c865b":{"name":"@cloudflare/next-on-pages","version":"0.0.0-92c865b","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"92c865b24a7af24a9f44a12ab45a0d55763b325a","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-92c865b","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-eLnewVeLtdT3YwXO9Ww7RigEHfaTZOzodChgwXmokZGVN4h6EUOw1/Je1ad/LRkRoMP0+r2suvRGVw+3tn7Kow==","shasum":"928d51d7fb4df549f22d41d1a7eeb7c72f609e0c","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-92c865b.tgz","fileCount":15,"unpackedSize":575963,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQD0GIPaU8/so63YWeP50RFhB0vSWTQmrLdh1BBHn0DBCgIgSFtKOfgxWfxqQDlGEyOzmgqFbx/fJD8icNWw306eiKU="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-92c865b_1688580299176_0.9722525424713653"},"_hasShrinkwrap":false},"0.0.0-505be1e":{"name":"@cloudflare/next-on-pages","version":"0.0.0-505be1e","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"505be1e668aac2d964b96c85aeb8919844e82dfe","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-505be1e","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-YFrzB6UT9zgHtfIjVPLgYv9A4A7HFRU9SmTl7Xazb4vAOs67lcJ2cBp7Rx9hI6BGUGbhGTEZT5gkYNGRILELEw==","shasum":"18aa5f3046ad3cac30be7a0de51b9daac23a9a99","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-505be1e.tgz","fileCount":15,"unpackedSize":578331,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIC3XhealGvghSYQKEsRa6C5A5TNTof7+nLpcFmXYVLeIAiAN0LxBALm5XyNmmshFSgTk5HBybbvAKNhi14+L7ewC8Q=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-505be1e_1688643018269_0.6446102028889484"},"_hasShrinkwrap":false},"0.0.0-dacf52d":{"name":"@cloudflare/next-on-pages","version":"0.0.0-dacf52d","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"dacf52d1126c9a852a1b419ab85766c3116f9cca","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-dacf52d","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-TRZkLyrZKsBbyG08T7y2x9fp9bLoZbSiD9EiI9NC3og8faPx51kBV/Q8BCavI3JfHKg/vnjzgrfEOXd8OWU4kg==","shasum":"47696247c4119659c8ab2d3bf6271e1e28097016","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-dacf52d.tgz","fileCount":15,"unpackedSize":578506,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCKT8esZ0GVMB8Jl88E9SxVXHZSXzz33OSN5AJajZ9LkgIhALMlY6JjwN0oILQOMmTN3uaNwDxNuB0lfbe+eabkdCwv"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-dacf52d_1688650102832_0.8537021121562718"},"_hasShrinkwrap":false},"0.0.0-cf5234a":{"name":"@cloudflare/next-on-pages","version":"0.0.0-cf5234a","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"cf5234a650d08bb6166de783e08285a4d3110e4e","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-cf5234a","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Fi9Wk69W7H+6qmYDPsIGOYQ2B67UQLtxYm7H8aT2zckh9GyoPAlORSV9XMcapZABvdyJnuuoLhjeiD310E8f5A==","shasum":"8615b3cd718fc691290f1234a08300b5fadc02db","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-cf5234a.tgz","fileCount":15,"unpackedSize":578309,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCNLoGSeo1A0e1zMGeHHpcgwYHwpINNeId/eRa/sk8DpQIhALJxIPzktulIOnKM/jm5L5WuUeXmr1H30ss21vaQdk95"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-cf5234a_1688654291955_0.13404929966056756"},"_hasShrinkwrap":false},"0.0.0-df9d256":{"name":"@cloudflare/next-on-pages","version":"0.0.0-df9d256","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"df9d256882234d1362ac600002d517d085cd7310","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-df9d256","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-K4UQ6/XkFifgprDm7g/6zeKto7I0F2vvRQORzZ9YFbnH1p/VzlfTWEp+NZxVZZnOHv3+T8cWxuMPjUTM11qUVA==","shasum":"44be770fc1b75925423f17990b176b20cf65b445","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-df9d256.tgz","fileCount":15,"unpackedSize":578309,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDc0MCopDvlqm87o0ujJffZYwvEJqBsYBXQJt+K0hPzyAIgDiHovDImlvr4FGZMn3KwSHLq88DN8Yw8eRwKsN9zJ3w="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-df9d256_1688655385331_0.7944430968724827"},"_hasShrinkwrap":false},"0.0.0-ffbae15":{"name":"@cloudflare/next-on-pages","version":"0.0.0-ffbae15","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"ffbae15ad2f8d8071e02eb4eef7e2b51279f30c8","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-ffbae15","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-kAU1pQC2oNeKcWuxKB1dhY0JnfR4DvBr90+2D5PQ0PfR7pTsFTdvNlyZBRo/YPx/iOXDiUCKp6PtwXsfiOz9XQ==","shasum":"05d169467320e3ca7934c2bd6ba1c37aa254781e","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-ffbae15.tgz","fileCount":15,"unpackedSize":578309,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIFdD3fsiH4B+AyQoBF6YVt+lbe9lWSmhqe0u3wm5YwoPAiEAiFQe1RIEbfqmimBLyudfBVhnz6P1aieSpuJZ+LDrLk0="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-ffbae15_1688729690889_0.879294792600485"},"_hasShrinkwrap":false},"0.0.0-f1f5a95":{"name":"@cloudflare/next-on-pages","version":"0.0.0-f1f5a95","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"f1f5a952e4bd5d2b12407bc4b944bbd7caea36f6","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-f1f5a95","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-5TlsHkOSfe2bNW8wSqe/kclq/YycLE1gMWb/jkFV7em952Ql4fiahgJaXKMqhw2FXHho/+/AWIJ3vBQL0YtSXA==","shasum":"435761cf795c2e8d288212ccc8039c585697907c","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-f1f5a95.tgz","fileCount":15,"unpackedSize":578053,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIA6p/axoRTEz3sQ8wJCXWIkqPIqieP3aEo5bEbl9XYY2AiB2Z3g2F7HIuWTGPbxmJVOdK5yYXQ4TiWKrlieMjS9+NA=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-f1f5a95_1689001130584_0.4453286306771349"},"_hasShrinkwrap":false},"0.0.0-9a98561":{"name":"@cloudflare/next-on-pages","version":"0.0.0-9a98561","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"9a9856179d3310dfd0aa6dea5d8356ae7792a26f","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-9a98561","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-sz8cygMZohrMeNtgDj5VTWpzdMrHSI9xpcxxDvV1cxGJUkywPHtnaeXhttdDc08KAI7Z+F/n5KvR5Hfbywmalg==","shasum":"0c9c5c8c368b874dae550615eddc1d7387fe5455","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-9a98561.tgz","fileCount":15,"unpackedSize":578968,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCICduqWlU5CrQ6jpymzVr/Sgq8Y60ZscQJuz/mOLBfQlKAiEAzrS84e+jTLxtsDlvSc2iydfwr97IP0Dw8/9Q3G9K4lA="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-9a98561_1689005172224_0.86193100417318"},"_hasShrinkwrap":false},"0.0.0-b630232":{"name":"@cloudflare/next-on-pages","version":"0.0.0-b630232","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"b63023211637c67812b1dad44c0fd32398f82c6b","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-b630232","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Jv6aGRshoVpkaOo6wv1f165UyNL2j8q70kEV5zE7tz0O3qaJQBADX1CmtDbiNWfjiiKA9X1hc0oHAN33NDQMCA==","shasum":"0a926d7e6876c8610b770b983038cd2528dbfa3a","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-b630232.tgz","fileCount":15,"unpackedSize":578968,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDctrHtidJ8mfh8+C/Pxs4934lNAmud7yvE93X90Z4p4QIhAK4U76a8CXfNTRvsf/TCQ/J5ywXCItaJd9Nrofmf5796"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-b630232_1689007771083_0.7229249196436458"},"_hasShrinkwrap":false},"1.3.0":{"name":"@cloudflare/next-on-pages","version":"1.3.0","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"gitHead":"b63023211637c67812b1dad44c0fd32398f82c6b","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@1.3.0","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-lhQMXi165IZwaoBGJwcHddTuk0ssoNl8v2Q+msld6t7zIvHWDS5kJHnr3aWffsFU2pHb6bxvzRqdgqfLI9/N2w==","shasum":"c2176603443eeda63294c634e0a2f089a53707d4","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.3.0.tgz","fileCount":15,"unpackedSize":578862,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIF4YsDNawi1x7w9SLLW6C+YMwADB9zy/Al3ts5dISv+WAiAjOHYnl7f5rGM/uWXq+WZCthYrQVIFQgF/0EYamNtQLg=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.3.0_1689007774641_0.8874132991038217"},"_hasShrinkwrap":false},"0.0.0-dc529d7":{"name":"@cloudflare/next-on-pages","version":"0.0.0-dc529d7","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"dc529d7efa8f8568ea8f71b5cdcf78df89be6c12","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-dc529d7","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-d4EE/8GJc5ik3NMVvy2EMZJsK+M9lzE9hiGBZ5xQZNakXIJIZQT3XTm/1Ai8QdeFE3h8JRj3eeR3s3nA1xKv9w==","shasum":"87300d65348b26740a62e5cc77252e941f76c40e","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-dc529d7.tgz","fileCount":15,"unpackedSize":579005,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCICaip14jAA0METYY+1zQy1jJJ7wYwliwevdTINfDhMF1AiAp9l/3KAL5p3LgwLQrLe+bQhmEvgG1C4/VqqGh8po3Zw=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-dc529d7_1689028385435_0.3598496934385784"},"_hasShrinkwrap":false},"0.0.0-b4c4245":{"name":"@cloudflare/next-on-pages","version":"0.0.0-b4c4245","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"b4c4245fb4b6390583ea8578997bfc9affefead4","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-b4c4245","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-S4x+j63tYFWV7n0YKr63PoIl3m8ru3Cy3ABEX7HAWe2Tn6CZX++daLfrJSuooDaY+YIn7S9mFFMZjJMDPumF9A==","shasum":"cf73bd03574b7feb47ac52374bc0fa13d6d46b2c","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-b4c4245.tgz","fileCount":15,"unpackedSize":579005,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCioY7z4Reh4c2lF0leFZFx/SwIYVG+LgtuUjJ3Auu2TAIgUjxPyVLZlIxT6k7N7q3gCFtjHcPEv+QuwOZxFcvhP08="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-b4c4245_1689029450304_0.6985812114159342"},"_hasShrinkwrap":false},"0.0.0-76a8bb4":{"name":"@cloudflare/next-on-pages","version":"0.0.0-76a8bb4","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"76a8bb49965cd1c56ad9569994492aceb5bce560","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-76a8bb4","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-y8HSo2oglq7O2UpEHUozmGAr5bgnvYbOUgvYLDTn0wUtfJFfrpEIzpb/rJC2JS8SlN8N4vV6wZtI9VjdZlwNJQ==","shasum":"5cd9cdc3ca8b735b2f09a522ac74d4b678a4fbe3","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-76a8bb4.tgz","fileCount":15,"unpackedSize":579066,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQD8UmUEsFrDGDzdjysXgju0rPf+8UnSdas7PpnT6QfVtgIhALi62TzdyhPpr32aZTWN1mARGflSlWcpHEIlYZMuNyH0"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-76a8bb4_1689200950334_0.5182815522791702"},"_hasShrinkwrap":false},"0.0.0-619beea":{"name":"@cloudflare/next-on-pages","version":"0.0.0-619beea","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"619beea3357a6ac9800ebe971ad46d233dc4ccfd","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-619beea","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-8H/HTux52jRqtOwcMjBzLU3PLFTNXMfZQLIIx343e/49cdRdteHgWrNtrnMm8tzBNAZSdx6SstPBB9WrDbm/1A==","shasum":"10c18a96eff11f5fa2fcfb952ab86e5484b26b5e","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-619beea.tgz","fileCount":16,"unpackedSize":582903,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIByJYhtkB++szzBYNYa6tF6phN582VreHwCdpu5AuvicAiEAhllFYzxNRy+ChCXlecoB205e0kPBH6+1ib+sqP3yl6Q="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-619beea_1689327269908_0.9577178215261624"},"_hasShrinkwrap":false},"0.0.0-ef63ae2":{"name":"@cloudflare/next-on-pages","version":"0.0.0-ef63ae2","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"ef63ae2ebd3742ee98b8ff10f67431baebc8e5ac","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-ef63ae2","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-lGKKAddraegYXxUREEsPtC9aNHpDUohoYdiAby/QMV+C2swCzCWy2P4Sxn+RjA0w6AM9Dep7qpoMJjC0vT683w==","shasum":"ebb629e6edb9cba5640c150885fbb38c8b0a1aea","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-ef63ae2.tgz","fileCount":16,"unpackedSize":582903,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCiJm4QTCu2Q//RuyZI1T+A6wSlcqTurhYA+o0sp1do5wIgFkjd7BIKMUjWUr1wfPoQvTCa2qIeLJKGbUO38/LDqKo="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-ef63ae2_1689616698275_0.48775761706556486"},"_hasShrinkwrap":false},"1.3.1":{"name":"@cloudflare/next-on-pages","version":"1.3.1","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"gitHead":"ef63ae2ebd3742ee98b8ff10f67431baebc8e5ac","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@1.3.1","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-1zhmbqZ6pnVMBlXwCkc83sESiOjDF91LIjczILY+FjYRWBDeQDsqxvUg8e/U/hy/3mq1j8yqdoa+mnQf/IGAVg==","shasum":"fa938b07d2d19025cbc195f70c74982b30433cd4","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.3.1.tgz","fileCount":16,"unpackedSize":582797,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCv18keRATz3pmWOXVG1S2R4V38PWOK1Fa6nDXK0HNCcAIhAPP21NGDI3Ig9pPxISQPQAffyX+r2V3gCn6u4Js4j7hk"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.3.1_1689616700777_0.7112108024019086"},"_hasShrinkwrap":false},"0.0.0-6c28128":{"name":"@cloudflare/next-on-pages","version":"0.0.0-6c28128","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"6c281286b11779e4bae2042af099e4a5c3158533","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-6c28128","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-DdoyQizHIVSbaFs3Bzh88+J1LVqd9TtmmZ3v5skx9X9P4O87yWN6IDAVAMc52yw25J/uhv5NlLPyaWoJpOWLgA==","shasum":"d17cdd5ccc983e4cf1cd7fe0649583740bf8af19","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-6c28128.tgz","fileCount":16,"unpackedSize":582973,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIB7NhGKtX6wa/gssngWYuIOSFDVktEKIauikXEah2Jl/AiAlSD8kRGKIFWGggyAOkHCzMwgn+D3lQ3KtYGG1ut3NGg=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-6c28128_1689758711557_0.2750605589550752"},"_hasShrinkwrap":false},"0.0.0-48779e5":{"name":"@cloudflare/next-on-pages","version":"0.0.0-48779e5","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"48779e5bc1987c19983a5dd623575f06a3d7f74b","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-48779e5","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-848m5tV8jgfZ7ld1kZcUtB4kWcaLjc11EiHpqeFxLxowZn482drs77MZIG4x+AyqQc9nBe9uhEid8mlJRhAQDQ==","shasum":"5799488adc6c2b3e871d3d047c8c10818fe490f9","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-48779e5.tgz","fileCount":16,"unpackedSize":582973,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIAZNsqp880AIaiWIGEVIvM3pndMN7MboBsSR+aRbjz+6AiAz8NjhJRFGvaAwGCD8qK7dh9LcUuOOCjdCEaYV5wgjRg=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-48779e5_1689843836539_0.2804580373658847"},"_hasShrinkwrap":false},"0.0.0-0424aab":{"name":"@cloudflare/next-on-pages","version":"0.0.0-0424aab","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"0424aab843aedcfd4d9d1c6c6eddd2c93afe0d29","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-0424aab","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-TikAmLMrPs2KrgzZR8+vZE1HRymfd6455cm0bO+Z0AC+gbZhq0JyWCAP14SSmYeFPz2vlYZMqhJaHfZ74To7RA==","shasum":"a47bc8a1e2c968a5d61e6f88b1e7c50516bb473b","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-0424aab.tgz","fileCount":16,"unpackedSize":582973,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQD3WbjC6F11q+WZI8V58pnvEoO/82CNlDWy0muO6V5mPQIhAO0b8e3zvVs9M++qyaFKg98vWW7lC5DmA2V5kcGTpMwn"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-0424aab_1689846889100_0.9170228911286877"},"_hasShrinkwrap":false},"0.0.0-660ed5e":{"name":"@cloudflare/next-on-pages","version":"0.0.0-660ed5e","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"660ed5ef70ea7de9c96c6573b9148feac86d2e6f","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-660ed5e","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-s8bw534WtcOBXstCJEo7nXqO7wqy9gQ1qhJ3BW8u35ikQmireXCemtILI7vadQ5WHYReDdl004PrvQ6UIOgfAw==","shasum":"6833b99338d969e9cb08f9699382688240358bd8","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-660ed5e.tgz","fileCount":16,"unpackedSize":585961,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIErUzQvnDgySXWxhiTX2As8DRSUvpDnGRQ0Mi2w6CwAuAiBlsy9EO9OnrrfGmmP0kPr7HO+MqjsUmg3/Je7ExdOz4Q=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-660ed5e_1689850947856_0.24782514432962843"},"_hasShrinkwrap":false},"0.0.0-ee6b7dc":{"name":"@cloudflare/next-on-pages","version":"0.0.0-ee6b7dc","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"ee6b7dcf336992b6a7e9accbf7ead3a0f1667f7b","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-ee6b7dc","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-97RmX3y8KazGjZsvna5Eycm5AhwUgLNjhpZaQo/WXGjjibA58BZk/xpUg5J17uWS5NiC8A6orafzFtZjIc6V2g==","shasum":"36e3fc91e54a8bc114c51730c4d49b67249445dd","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-ee6b7dc.tgz","fileCount":16,"unpackedSize":587442,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIHNU8jSpkBgDehvZtCnEYFFgbetQf4nWo/sUC6Bu0cEKAiEAsnTao/ZDUMT57Q62ZIz6zNzj89kcdZfHYVnReq6jbzE="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-ee6b7dc_1689873665108_0.7784617521252266"},"_hasShrinkwrap":false},"0.0.0-f08f2b9":{"name":"@cloudflare/next-on-pages","version":"0.0.0-f08f2b9","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"f08f2b952a5e9aafeb9fe687e9c0ebea9c8b5d9b","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-f08f2b9","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-t6kUvMXy7V7+q673vJ5pJsj6A6PnGHz2jQGfLBBXLSASiwFfAGsg9ljvWmWEf9U5kd+aE1QvICM11aS+OSCf8A==","shasum":"02c169b7296ed9c19949d773591213b4b8f9bdf7","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-f08f2b9.tgz","fileCount":16,"unpackedSize":587587,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIEJY+yrIAgkrikrYVfzw61Ans1ZNu5GAR6XbtVkMtym8AiEA/r6N/bOWjqdQ6k715V3JBmGqyu6lAG8/Hj+JNEJFKBM="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-f08f2b9_1690200688754_0.27666085185725375"},"_hasShrinkwrap":false},"0.0.0-551fa05":{"name":"@cloudflare/next-on-pages","version":"0.0.0-551fa05","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"551fa05dcfd8fd25d851e2bb45eab8d447422769","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-551fa05","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-JP+alw5HgGVym71VSmhhmCEQLdHmayTFI4dFReABgCnYlAPcFQnBMn+a9HXcaFZM/YxDQfqgN2x92GqOUxI3vg==","shasum":"5fae06190a0406305156616d83833baf77ba3ec9","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-551fa05.tgz","fileCount":16,"unpackedSize":587890,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCsp8XVNp7RC6XxzC1U5l02l0gqY2hH1vbcN3spW1i0AQIgKjj80udIVaFfFGngA0AFrzxe69BqxJ3qSwtWl4nlxHA="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-551fa05_1690203138098_0.6156932115001639"},"_hasShrinkwrap":false},"0.0.0-1588974":{"name":"@cloudflare/next-on-pages","version":"0.0.0-1588974","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"1588974dc9c42a2300a63ffe559166230b7c1ddc","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-1588974","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-GjfKHzXrW/x660kKOV2q+Af7jBso8961ooKvbCQbeb931GaUJvoNQ3JEg+3PxLKjGnKBmXGm6c64w+aOVnMN4A==","shasum":"5ced908b40c9cfbdaf97db8ba5b75f98bb25f7a7","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-1588974.tgz","fileCount":16,"unpackedSize":587890,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIB2HDTW0j1DfcHxhwXADov+icVVJok7MrM43N7d1dNyBAiEAo9hmcVc+F+T26ptudIFlqVtdXeu/U+qPJwl2rXiDp0g="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-1588974_1690211472774_0.777331827651986"},"_hasShrinkwrap":false},"0.0.0-9734795":{"name":"@cloudflare/next-on-pages","version":"0.0.0-9734795","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"97347958b5396107aa41af876aba9bcf2fa6bdd4","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-9734795","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-scYSEm8uGOcYELsBs75AjfpdS3ZEmMUVGNvukhlbmAcWuRMBhBn1X9aPSAf8O6+BJt+G1WytSuVpjG/dIS657w==","shasum":"122a00fdef7c7d2dfb6fe9c78f2abf773f2462b8","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-9734795.tgz","fileCount":16,"unpackedSize":499000,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIAF6DkDozRY40Nl88lChkgg/iV9XSylq2p98Jzvvj4QlAiBFoXF/ZGf+IoP7uLQmds+zj91dgUsvqfOM4D464zLkxQ=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-9734795_1690211572229_0.3490518352688041"},"_hasShrinkwrap":false},"0.0.0-11afe0a":{"name":"@cloudflare/next-on-pages","version":"0.0.0-11afe0a","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"11afe0ad7eda5ae19685c4f199f98e674bc330ff","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-11afe0a","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-1aHjwEGPVASEtMGvRkOKPE79RrW39GplCQ8KPH4Jx5PcRu+ov5xImyeqOAJW8yaig8MxjZHrFvmfsU3kbT+rrg==","shasum":"9259a73bc13d5c835346c0c49647a694e3b99cbf","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-11afe0a.tgz","fileCount":16,"unpackedSize":500762,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCkvzP9L6mb/iU/1DVFZht04r6UGeSWZV4E4klLOyyzjgIgPKbR+jiI/xwm7wHTCrd75ug83DQWAoy2B6dg0QpI3lQ="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-11afe0a_1690289888235_0.3185846776104355"},"_hasShrinkwrap":false},"0.0.0-671ff82":{"name":"@cloudflare/next-on-pages","version":"0.0.0-671ff82","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"671ff82c292ce29d8990a22b0c97c2e7ec990f24","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-671ff82","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-rsND7aqiL49QuLvskF5Xxjmq4zTxAlw7sqSNF75nZ0xFmoRfxivzadbg7Yx3KkA7o3wizUx4oWDpPMx6heqVcw==","shasum":"7836d4b5ce3574fced364eb6be081008eb3109d4","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-671ff82.tgz","fileCount":16,"unpackedSize":509226,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCihyp4piHsTkdU1FDa09f2M+ZQkimCyknIVj3Z1J8qlAIhAP+uhHQyokNCJEw9acheNSK6d4JJmmopVOLfrgQohwZo"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-671ff82_1690300057589_0.04438830366872071"},"_hasShrinkwrap":false},"0.0.0-476d26a":{"name":"@cloudflare/next-on-pages","version":"0.0.0-476d26a","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"476d26a2560ec96db8b16aff06be91072229fe71","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-476d26a","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-7NoKLPAdJUjDEpBlLU1ke4Iov5fprfqK6s3/vFxwRRznZCZpYhCttRcl/W629NUpAt8d5A/X9TL0pmZ/TPY5lQ==","shasum":"86ad4ef65460b2fae5e7c9a7787fa6cbb39c6038","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-476d26a.tgz","fileCount":16,"unpackedSize":598577,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIBmhiGYaFVLizYB/PNK3oOC9wecwlFeF8xptQURxg0F0AiAiydCOKPi/8oitsLf8Ok5947TO+RTEhMQcWH2OtwNIHA=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-476d26a_1690310170098_0.3098849798483221"},"_hasShrinkwrap":false},"0.0.0-5d42e57":{"name":"@cloudflare/next-on-pages","version":"0.0.0-5d42e57","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"5d42e57aa6151eca0033d61e41c09201562159a7","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-5d42e57","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-R5E4ob2z/u2XbSkCrWwSxgA2a7Fve5RVADn+oEiBOzc2xtsj5/yvtpodvJUa/xyAbsIpKJMFq000YYPRaEfuFQ==","shasum":"48caaa189c74834e31e729421d701a57d5b87c52","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-5d42e57.tgz","fileCount":16,"unpackedSize":598577,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQC6YLi57mUVcEIQ22Xt6oTRFc++lJ6LmyniWTAa90qPSgIgTpuBmTXV57eGB0aefmQz9s1IUqdZSfWYVWVYgT+gknE="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-5d42e57_1690315913761_0.04664821584571799"},"_hasShrinkwrap":false},"1.4.0":{"name":"@cloudflare/next-on-pages","version":"1.4.0","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"gitHead":"eae9f6a14ddcf745654aa72793851cebddcf11c6","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@1.4.0","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-6XNFN1mhJQMQflaDxOpmy5Dxp27MpV/TYlBv7pYFc4iX8eBs7MWR8uEFNw+em4rWbb7J0f9PGmLzj1z5lFRq5w==","shasum":"6691b84a642fff538ce3b20fd466b2cd08f0a932","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.4.0.tgz","fileCount":16,"unpackedSize":598471,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIF3G/o8VYq5RiNtHTwgyZDD41gNhDaQkCX7LsIel6ZvqAiAls67gub5VFDl4iv7WsW29nFVr3p76bheMwRaoNJr+8g=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.4.0_1690316205745_0.16859341190342025"},"_hasShrinkwrap":false},"0.0.0-eae9f6a":{"name":"@cloudflare/next-on-pages","version":"0.0.0-eae9f6a","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"eae9f6a14ddcf745654aa72793851cebddcf11c6","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-eae9f6a","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-oGTKPL4V2QVlRba6oXd7vzpOQRdvq5ZhAF/x9qFZrDMhl9T8G4zfQNu8xAvmpCo5C4AOo4VqHiXUhhgw8QrWNw==","shasum":"1c34a3e8d361f295f93be4512272ab8bf1cb3761","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-eae9f6a.tgz","fileCount":16,"unpackedSize":598577,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCICyxxCV6R+uGpW7ycEKFdnJqAbF79QQRDLRjuEfArIxcAiEA50eaN9sEYJ9FvcuE2ejxHwABggsHcgnsy1LyR8WFP/k="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-eae9f6a_1690316208913_0.021207771662450137"},"_hasShrinkwrap":false},"0.0.0-ea98a8f":{"name":"@cloudflare/next-on-pages","version":"0.0.0-ea98a8f","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"ea98a8fb6373c40e193272da0179343246a853bb","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-ea98a8f","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-8CYD/CwGelfg57W5DaKUc+rQB31ymaNoGjS/EJuLeFg5wXaiBUXnNV6P4p3QGJQDfzXRRGaiOWH6v9MmDNLP6w==","shasum":"35264ff93b9238fa2f44c48e661e0b694e98528b","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-ea98a8f.tgz","fileCount":16,"unpackedSize":599026,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIGBK8aHA9Xb9s5R0tZ8EpD5aGmLkPNvW/Evs4ul86AOwAiEArx59I/5hOclF//qzcjMWDnZSg/DAm5rC1RedbDWNtCc="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-ea98a8f_1690316455811_0.14925660696431886"},"_hasShrinkwrap":false},"0.0.0-2772725":{"name":"@cloudflare/next-on-pages","version":"0.0.0-2772725","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"27727252c5f175b8289255abde3928609d924878","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-2772725","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-/1jWvlQjUMDbCmgUHnBSFIR5UD1x6EHjGBMzFXoN8E7dsq/S7Ge3s8Nu10BIu6RklQMlFyQitsnFXBFebdtgDw==","shasum":"700b120cdd208e60bfdeddef1b6200881f492638","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-2772725.tgz","fileCount":16,"unpackedSize":599026,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCWQ+KaiwHAexEDLJHlDwmwXdyKx7Gy+S4anhtZ95tOBwIhALFw+XUCG0885PBvN/b5l33eT9LXy+Kb5NEHVhdLQlOR"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-2772725_1690549517859_0.47597947908594596"},"_hasShrinkwrap":false},"0.0.0-c6621c6":{"name":"@cloudflare/next-on-pages","version":"0.0.0-c6621c6","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"c6621c684b43b7428bd8a348dd8e1322da1d466f","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-c6621c6","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-jjzWQdH+E1iBi+AYWICaNgtPMdKh+5MpJ/1rhxDvGLGCzGT6smaUQnmWFPQQhU0h2qKaMCaE/NOS8M5t+k1wsg==","shasum":"5b03249acc54ed1603b26ee54fed005e05a4fdc8","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-c6621c6.tgz","fileCount":16,"unpackedSize":601233,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCqswQBDJL/IR430rp8qMhy06PRYWo7o+QZ7BHmTjzl3gIhANaPcxT377wrauETxcFF1lfAqzfKRwAKYCrSqNy1DC//"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-c6621c6_1690552329914_0.9990112370119517"},"_hasShrinkwrap":false},"0.0.0-226d562":{"name":"@cloudflare/next-on-pages","version":"0.0.0-226d562","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"226d562f8b89cd78ac1297972f73699e96a1a183","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-226d562","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-BVWashG+hMrBw7assslbh/ofBvFhrbioOwmXnxXDcTh712NPf8CP7gzy3iJWxxZdSyQvr+FJbMt8Mx7PBTD3JQ==","shasum":"b32de171d6fd1958f6ec77775d463c5b6abfefdb","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-226d562.tgz","fileCount":16,"unpackedSize":601295,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDTZLOTsYUaO8jaQHBfpXorbjomHQh4rPvi+X1l3A/42wIgLst/Tm+a09RHEqNkFbgFfGWEdDaOoVncC2ZjBAzm11s="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-226d562_1690587493696_0.5583614589744044"},"_hasShrinkwrap":false},"0.0.0-3affd17":{"name":"@cloudflare/next-on-pages","version":"0.0.0-3affd17","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"3affd17441ad5754c089cbd9c10adae97a09e7d8","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-3affd17","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Ymfx+I9VjEdaqMT4HCDGaoJAp7hkoG67C4dDKydRF4yL7rEBc/kpAFKiWwAdyiajDJ3onKnd36xquw4Obx4ufQ==","shasum":"081262f4070b3afd1a31f572366c7570e08bdbe8","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-3affd17.tgz","fileCount":16,"unpackedSize":601435,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIC3YRZJKTplOxzBDKmXSv/LGWh/jSOLEGoC182FYpA2lAiEArVag3vf+YeR/sHFUOBeLpTqmI/5br2o9nEVBZQzJdEg="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-3affd17_1690796590785_0.6430358558923286"},"_hasShrinkwrap":false},"0.0.0-53ad429":{"name":"@cloudflare/next-on-pages","version":"0.0.0-53ad429","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"53ad429f8e83d87a595be4f3695d8ac092735f59","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-53ad429","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-DMWDbRfC48QF+yyLkEoHU7SJOblYhY1JgO2dFbrIfaUiADnjjJSNUo7LHaxXV5/C3X3cQm7IuqzBguLYnPkNYQ==","shasum":"4b825b7eaf272638fb26d2adfd17a4ac02970ab4","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-53ad429.tgz","fileCount":16,"unpackedSize":601435,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCZBIzC2NoVqnrqQjHqnHDjZTbxzh94OwL2Nmx/dmzgWwIgVJdeprt3zQWAF/6HCT0uq4jejPGui39Ax7HyZr4c8GQ="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-53ad429_1690812796019_0.05234504438961651"},"_hasShrinkwrap":false},"0.0.0-5aefce5":{"name":"@cloudflare/next-on-pages","version":"0.0.0-5aefce5","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"5aefce59535377c9120a776141ebb104e53814a2","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-5aefce5","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-n1Po21EVCM8/2Szp8VVEDFL4hYBpaI+j+U6cEDCsyAWuA0xUBMv0kZ9JXDxQLT+aHo/5VXQRDc/cpXLA531AYQ==","shasum":"d667228efe583e56c867a4eb58a572ccd000eacf","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-5aefce5.tgz","fileCount":16,"unpackedSize":601438,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQD88T9o8pKk7Qjn3fjlx5z3toZTgN+vzSNrw3KRLCpQgwIhANgHcW9wYTo7AOUblaSfd7OA03XBypwso4j1dsNy+euB"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-5aefce5_1690813424147_0.0964686679445097"},"_hasShrinkwrap":false},"0.0.0-9faf701":{"name":"@cloudflare/next-on-pages","version":"0.0.0-9faf701","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"9faf70103a1ff2c2a28fd81fce57676512688cc9","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-9faf701","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-IzNqx7Ay2hu5R9VHLGknqALEgcYBR19633go8U2pJiniYyjlpabL+wMSBUFuR+5+9Wl24oLsMdTL/7P3mg9r6g==","shasum":"98cb0ff78a6fb87ab9d4a7a9755b1dbad5e0f887","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-9faf701.tgz","fileCount":16,"unpackedSize":601890,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCZ4Abln1egemgryfHcTxj5TZOtctvtPnW5N6zTgML7GgIhAK21lEXuTnToPYF8BbZ04YGWbCBWeb2RLnZCANknR/v/"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-9faf701_1690819013426_0.6709564094616269"},"_hasShrinkwrap":false},"0.0.0-7a18efb":{"name":"@cloudflare/next-on-pages","version":"0.0.0-7a18efb","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"7a18efb5cab4d86c8e3e222fc94ea88ac05baffd","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-7a18efb","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-olvPIxrD6yQEhkF0ZGnvucG47RlZtBVNCySEDiwBF9B5sDcdCExFDQEj1f8frrghlKLgRK4wIg3O//bRz2eokg==","shasum":"d4be7d2891b4caa5e2a0df8234b3e7a3d9218a0f","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-7a18efb.tgz","fileCount":16,"unpackedSize":601890,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCD44NtZq1CE5M6Si9MMOzaUGbXZBPH0/pXRkpbWFkQ+gIgWJG2qqEGjpPKZr6tXus/SKeziy73/Ulz2AXyLgb0jZM="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-7a18efb_1690836366805_0.6825286726367732"},"_hasShrinkwrap":false},"1.5.0":{"name":"@cloudflare/next-on-pages","version":"1.5.0","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"gitHead":"7a18efb5cab4d86c8e3e222fc94ea88ac05baffd","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@1.5.0","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Avejy7cgfdTKawoRtCL7vl6PsXoeuUDeYaCqVQ5PLXGfZZraKO4MpqPLMdw4l9MxgOW25YE0VbcX21yAgukhTQ==","shasum":"6e7d54f01015367ddfd8939d86f95bfaccb586fe","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.5.0.tgz","fileCount":16,"unpackedSize":601784,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIBuiWHQKLdjoE96fcp5esUDZCqONOWJRSFhcw66ax8mVAiEAhJq35Teg6GMK8A6QN2x6acDTZxBMiSOddW+dVa3qMUE="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.5.0_1690836373808_0.4661879562629694"},"_hasShrinkwrap":false},"0.0.0-7da1fd8":{"name":"@cloudflare/next-on-pages","version":"0.0.0-7da1fd8","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"7da1fd87cad81e5093ea14e988d6809dcafd5916","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-7da1fd8","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-kfilfdfEVI4k4NFrMehoYuH+XaKWS/8GEVJ8LsJyIMLT4lTQ15fGAhi1fs1ec9WbeeFV/2c0JTaRLlqVQA5ASw==","shasum":"c578d975c750d1968c90065053f6484005ca5c0a","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-7da1fd8.tgz","fileCount":16,"unpackedSize":602066,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCICwXmELvD/8v3c3YCABNAgRqJWSvRLW3q9ErfTNy3lXqAiAoGggoCtORXCzg9kbbtLAM70zmzZm8zTzRf9nWGIf/Hw=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-7da1fd8_1691603963785_0.6201696790997118"},"_hasShrinkwrap":false},"0.0.0-5bfbbe1":{"name":"@cloudflare/next-on-pages","version":"0.0.0-5bfbbe1","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"5bfbbe15ce14369016992a7cca9f93847851be67","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-5bfbbe1","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-DFXSEX7rckBeKKOx0ksUdFBgoDCgU1OnlixTI6nxoOcBKy8aTDEqvD2lKlmPPe8Xt9z2OKYXSEc4z341skWTlA==","shasum":"35aa7787dfa255e8dde83a5df171c23c52dac8af","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-5bfbbe1.tgz","fileCount":16,"unpackedSize":603145,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIGm+R0i4GLy0jes3/VN16LEawDYG4m3phNkVY37amorcAiAiBYn5PMKa5nQaIWAyyKITPfRd+swmuk1ccrugSwHDsg=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-5bfbbe1_1691604035135_0.3474912419113727"},"_hasShrinkwrap":false},"0.0.0-705a95b":{"name":"@cloudflare/next-on-pages","version":"0.0.0-705a95b","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"705a95bbe6789c3ffbf3c63a950f5381e8df89d6","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-705a95b","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-2LyuDTHUjTP19D1GgOTROB0XTZXeUPSOW/yHphrKPY78+wHV3Su9aB0+UFAwSULzKPBo7EkkxRtLreJfr6S6mw==","shasum":"5c6eb5bc615079dbd6d30cb8fd3338e794143fa2","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-705a95b.tgz","fileCount":16,"unpackedSize":603145,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIGi+zaR/E0Qus5XnM+USjyQ5ySQi8Ahx3sCIb0my469DAiBcZ0K8m45tfBGsCkI3AnN9VTHVttCLTbjATePLTWwIGQ=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-705a95b_1691606276183_0.3247978653023258"},"_hasShrinkwrap":false},"0.0.0-7f94fd2":{"name":"@cloudflare/next-on-pages","version":"0.0.0-7f94fd2","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"7f94fd2b6d5b3e95f79440d25d2e1ca11df997c9","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-7f94fd2","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-60To2pPJ8sKhYLtqziJCxAOgElpBnpN1435FmE04CzqERCpas9oFVB7xdO5vFXOssY/XGLhUF1Kc4MzZLMGKXw==","shasum":"31d5219e1e6be85773abaae55ae6608b10560a33","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-7f94fd2.tgz","fileCount":16,"unpackedSize":603241,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCmTAWeTPjACEtKO4hvSBBJooHF34eg3JEPWg8oD/S4jgIhAPDByhY4zXHqy5VlGZQmpcWhdz5FOhTrO0LmZsw2kWl7"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-7f94fd2_1692004243935_0.01388835869309557"},"_hasShrinkwrap":false},"0.0.0-32426e1":{"name":"@cloudflare/next-on-pages","version":"0.0.0-32426e1","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"32426e18515026d45e9edf6b8e549691823d81de","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-32426e1","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-g+GxvwL4XXaaDkUKeGiAFtHQmxfLjfpVH/damDtqznWXHt/PEqJcvvDP9woVpj/ukVfJn9TPQjW0o6Nqv2XLfA==","shasum":"fba7055e3d01c6fc55c3ba99d8fc7382f7c1cdfa","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-32426e1.tgz","fileCount":16,"unpackedSize":603241,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIAG123XhO9ttZx9VKGGx/zhZBjHHb/Kfm6vZWAHteXw1AiEA8Vt0l+7xiKLJSTS8CIqRijr7hz9gWdkXN99tjhvpWws="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-32426e1_1692030682410_0.8189647200893646"},"_hasShrinkwrap":false},"1.5.1":{"name":"@cloudflare/next-on-pages","version":"1.5.1","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"gitHead":"fc256cbf7b226ea8eb74005b76453fda1e57b664","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@1.5.1","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-CVkKqT7V04NDu/hfzFxEjsmo4yOLoLzWotBADEoqCxtSYuWBiDJZQiftIKyZiU08iIFkTGxgZRdyO1ngDazwdg==","shasum":"b45acf3a73fe93b1ff04536d01c0a391f941d7c0","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.5.1.tgz","fileCount":16,"unpackedSize":603135,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCoilqAjf2FhzPOcFYwSjzhj7l+Np76LQDetGvyLFel0AIhAKbXsFLWR1/M3OP3aR0ACm8E9zq3i/7Lqjz2nWKG4ZFp"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.5.1_1692030739885_0.7633145573861635"},"_hasShrinkwrap":false},"0.0.0-4570aa6":{"name":"@cloudflare/next-on-pages","version":"0.0.0-4570aa6","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0 || ^31.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"4570aa6e391569d2b0c5152fefc234fd77ae2a06","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-4570aa6","_nodeVersion":"16.20.1","_npmVersion":"8.19.4","dist":{"integrity":"sha512-jFSPV5gAllavEUOUYueRlzL0EOhIH5sCqYlWFRcpVH6A3MgvLemzwmmq8E8g6Ty/aUv1GC+T5d3HLDPTAH+vAQ==","shasum":"42ae053ad21ae4abd567a7c617a87da29c655b21","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-4570aa6.tgz","fileCount":16,"unpackedSize":603263,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDntkX5lfPppDp3D3yUwGnWx2p7HtJktkGBeN1Es/QluAIhANpSgZ6fuUWD5s7E6DJhkiS4a+dbp55uZP+4zmGxL+tP"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-4570aa6_1692113751966_0.15214882244669226"},"_hasShrinkwrap":false},"0.0.0-291bfde":{"name":"@cloudflare/next-on-pages","version":"0.0.0-291bfde","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0 || ^31.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"291bfdef9f303a05a3dfe9eaa0e3ef00fd05ed8d","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-291bfde","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-1pp/xu/MrQ+FXb1GgLkn1EEGJ9QJMZbtSC67JpvY3OXCf9B03A8XVGCZH5l4Z+Dkah1MqHlYD8sEPKzpyc7eqg==","shasum":"5388eb3c95f6c2045d6707872783c707d97e675d","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-291bfde.tgz","fileCount":20,"unpackedSize":613990,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDEKWT3r4jWPPmrbThWwyMaKGLwv+5KnVjSdYgEwLlpEAIhAImhncMN/eJlpSivo+PGLjpoZZ4nAm/zmcikex7ryXwm"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-291bfde_1692617442410_0.9691410790995563"},"_hasShrinkwrap":false},"0.0.0-fe6ea04":{"name":"@cloudflare/next-on-pages","version":"0.0.0-fe6ea04","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0 || ^31.0.0 || ^32.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"fe6ea0422a028b491a7000ae5066ffda321475d8","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-fe6ea04","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-CJfIxHU16CTNepGWYiBsmOEdmRuzydaP9a8DnIK4xr0U4sPGdMcEqmEqsxPT/yoxvY4Ki1XLSVtyTj6AVru5vA==","shasum":"7c439b172acee0d2270a7b9c2ebe54ccfb775dba","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-fe6ea04.tgz","fileCount":20,"unpackedSize":614012,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDuJVEaLRaeeT8C98XmryivIaLnSKkb5beFCNrBen4M1AIgAkwM5ESo3971mSjNKpRZnbnBluwWDd9AUijHCCXl9aM="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-fe6ea04_1692886683373_0.10910436854200123"},"_hasShrinkwrap":false},"0.0.0-b3a2ca4":{"name":"@cloudflare/next-on-pages","version":"0.0.0-b3a2ca4","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0 || ^31.0.0 || ^32.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"b3a2ca490ecf5f1db1c193d7da3e93e36ef8f7ec","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-b3a2ca4","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-sC6SdaL5IsFW10vZgIIFxA3Ld1lZkLxlUxCL/EUeqLQUNvni5LAU6tEHT1ugfSnxK9dZmCosmfGnMxZA8M3KqA==","shasum":"cc1127db22b5813e5dc8d5690915cf73a53bf75e","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-b3a2ca4.tgz","fileCount":20,"unpackedSize":614008,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQD/a7Vu//BbyEsvbh9w8RwHSjtl6evCws+VHqFcB9TBIQIgBVyT/MwQWNk2n4PizhY7xPXdmh06scNpX2NfQsUrn7Q="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-b3a2ca4_1692894974417_0.6669446222969724"},"_hasShrinkwrap":false},"0.0.0-c788def":{"name":"@cloudflare/next-on-pages","version":"0.0.0-c788def","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0 || ^31.0.0 || ^32.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"c788def21e100bea09d96950077b31e06cc49806","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-c788def","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Dvuu3EahFGT6v9ephSE0rTYWJsV2zAsyywRTC1MMX+/VsSYOoDSIOhxDjD2a6UaBkVZmWHJX07jIp3TVt2JGbQ==","shasum":"05cb7c91f8f43563341f18e5909041ba8f05b6a9","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-c788def.tgz","fileCount":20,"unpackedSize":614106,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCYIyU5k3oQjy2WGInaS6Wclthjfrkw5ylifJjQpTYWPgIhAKKXrdvV4XDgxm+gP4dXiyv37HZK7zd6C67LoyxSHwHs"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-c788def_1692894997848_0.6647945885723356"},"_hasShrinkwrap":false},"0.0.0-cb32baf":{"name":"@cloudflare/next-on-pages","version":"0.0.0-cb32baf","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0 || ^31.0.0 || ^32.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"cb32bafc904b0b4094af6b09fa3c8462d8a92fcc","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-cb32baf","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-8b8Qx0yoh5gXGTTY/w2ZCNGsejSAeLg2PH0CcQBOJBZcp602qbiOI02taGY/5lq7eKnvXU+AC3m6TWFNTKEmVw==","shasum":"cfd2e9fde5d13d6d4b8286dba05f848720bb5247","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-cb32baf.tgz","fileCount":20,"unpackedSize":614423,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCrMS67EZBgfj91AMrT7VdDwZR32o5FCAiaM3dFk+IQ+wIgGy5XwCKboChzKJlp1ZwBTGAFdODw9qgm7Lc/si1i7dQ="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-cb32baf_1692895019974_0.6230502588435833"},"_hasShrinkwrap":false},"1.6.0":{"name":"@cloudflare/next-on-pages","version":"1.6.0","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0 || ^31.0.0 || ^32.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"gitHead":"82dacc5483ab3d77d8b1ff95e948521b87752001","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@1.6.0","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-AeTs0Poqw70HEG6hynO25qx/gYdhTh8hH8E+qjYO+ji0LCKkP7FH12yvOobWKNfsUiTP95+3qz5AF9nvA+2z1g==","shasum":"b769db6bd1b1e24a0c05f03533ffccf17c352312","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.6.0.tgz","fileCount":20,"unpackedSize":614317,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIAm0GI7YmhXbImXoxGdvO2so+rY5CfhSnS2jB2icQssEAiEAtL5GODkVKszILG5SQZ7Jalfd+UoHntJ7u9XNB6JlELI="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.6.0_1693078588452_0.929826896080864"},"_hasShrinkwrap":false},"0.0.0-82dacc5":{"name":"@cloudflare/next-on-pages","version":"0.0.0-82dacc5","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0 || ^31.0.0 || ^32.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"82dacc5483ab3d77d8b1ff95e948521b87752001","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-82dacc5","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-pdyBR5Q/7TGRf8CLO5Z0j8vr/fU9xQkyTsxqzFEW0LsHjaOnn7g2q33KFqTucCXwn3mdLW5oVEP8Yv1qk1gsHA==","shasum":"26eada502f1bf8d21c03c1cd8c5cd5ac89a52562","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-82dacc5.tgz","fileCount":20,"unpackedSize":614423,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCICB8zf6l6UpkNmEK/+JM1sT+D4mYFK45XPQ0cgNEtTOmAiABBv16rooKnmSpAYL+P3y/8wH6ja3lDvHKYJbQDtYHzw=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-82dacc5_1693078693679_0.2612905089073241"},"_hasShrinkwrap":false},"0.0.0-f764fff":{"name":"@cloudflare/next-on-pages","version":"0.0.0-f764fff","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0 || ^31.0.0 || ^32.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"f764fff64adcee187fd19fb86340959a0fe1d62b","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-f764fff","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-YQTaBGDoC28gF9s0o5Zk8PqGL9jTvdMa/XhzALGFoEQiJ9HAT5oC9VekS9HJTn1ZjUbTbmDP9/gfJ/h8nItEfA==","shasum":"ec93f18b0ca999bb3b19fff71ae1a124eec1d6f5","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-f764fff.tgz","fileCount":20,"unpackedSize":614625,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIEq1St9YyhXTUhSBTOh2/Dl1b6ECYYdQDjL3dfq5S5mJAiEA3+2MqgD9QQtuOTFk/WQi/B2d7aN1Tqvs8NwvorlOj3w="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-f764fff_1693232429199_0.27427353478424443"},"_hasShrinkwrap":false},"0.0.0-c06b437":{"name":"@cloudflare/next-on-pages","version":"0.0.0-c06b437","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0 || ^31.0.0 || ^32.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"c06b4376eb0cad8b3a486f92af16b1ae0bab6eb0","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-c06b437","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Y01x+rjbZSMybZNy9SMxKCGxCqPZHNFXN1+MoN/5JEDG8/Rm1zroeaQSXh8Rsxeh1F1K4C660wG5AeroDCzNUg==","shasum":"f50fc2435a4dc8fcad88e58f8a8e5244274525dc","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-c06b437.tgz","fileCount":20,"unpackedSize":614640,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIFj+3qvwWMippETG2iykrafvxHJYUe71xk5WCPVZTLvlAiEAkL5fMxuQ17YrXegx0Jwba35x4cm8PuQWrlhUCKG5Z+Y="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"trevorcf","email":"trevor@cloudflare.net"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"evanderkoogh","email":"hello@koogh.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"kkoenig","email":"killiankoenig@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"jgentes","email":"james.gentes@procore.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"caass","email":"cass@swag.lgbt"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-c06b437_1693564683855_0.8952563609492792"},"_hasShrinkwrap":false},"0.0.0-1e25a97":{"name":"@cloudflare/next-on-pages","version":"0.0.0-1e25a97","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0 || ^31.0.0 || ^32.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"1e25a977a2fca93bf15349eaee90d84430958074","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-1e25a97","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Jd0P4p9dPpnPf8UkLZW9tw1A2SVmnOingqMIObdZ2BjwhrVZk+lJxu5AKRqJiI887fm+aRV/Cf/uU0Lu3dMNdQ==","shasum":"d91d2952fa7c5918aa7f7b6aaef6b1c719fa165b","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-1e25a97.tgz","fileCount":20,"unpackedSize":614641,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDHNvVF7I+VePgrYlrX/lNMmLJlw8bF76hSLcIJUWSDtwIhALwdzyA481A67gT2Ho7NSDf7fli2cLT8QTlJeZAAk1oV"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-1e25a97_1694685950853_0.7000837425536981"},"_hasShrinkwrap":false},"0.0.0-168496":{"name":"@cloudflare/next-on-pages","version":"0.0.0-168496","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0 || ^31.0.0 || ^32.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"01684968efadc459b12ea6b811ffa58ade17e48c","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-168496","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-/ob2GWC4sYQbLic7mgX8lhDWIflPXuqZaYkPg6bpRz7IueBAsdXLY2sV8iTIEC6QpyMJ/5L7g+IHb5gfOH46Uw==","shasum":"c7fb326ad947e7ed185c2897868121191be8e719","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-168496.tgz","fileCount":20,"unpackedSize":616781,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIF6Mxhxsl1Hgh94x+6LaLYpdd4Ye2X27yNvV1vEgsqvvAiAhZ6Dq8VBbfA5uiqsqc7Hzuqk8d5Tv0lIGKVBkwpiBxA=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-168496_1694766663862_0.3133052302801056"},"_hasShrinkwrap":false},"0.0.0-6c34550":{"name":"@cloudflare/next-on-pages","version":"0.0.0-6c34550","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0 || ^31.0.0 || ^32.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"6c345500b596498830ad5bd99668dd54fdc3af2a","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-6c34550","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-xPU9ufYZyqytmCOI3oEW26+KcM5QAYGa+zKMX581cljmlN0MpY0srTOUmnUww2gonPX5YqBmvaDJ8HEhfVsWwQ==","shasum":"cf951b87d069edc8c5a41c2ac7e93e269251dced","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-6c34550.tgz","fileCount":20,"unpackedSize":616781,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIEfYqnUARFCzGNuDM13ItmwlvKzdtPHdNm+xib7WjS5KAiAKaPzk7yMphS8iOsJMbpXPIjxjJ2qPVJoWUFQ1KUuvLw=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-6c34550_1694772748369_0.588919680816659"},"_hasShrinkwrap":false},"1.6.1":{"name":"@cloudflare/next-on-pages","version":"1.6.1","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":"^30.0.0 || ^31.0.0 || ^32.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"gitHead":"6d849e11beb200f1bb07024e4a693737f2caa024","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@1.6.1","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-f1v82OUVELH6FD71wGN5B0UsHU1xgNC44m6KcxXU3ujIr+S7QiOLhK18aiPqWPWlmkDMibDS3kY9XXRGeiOh8g==","shasum":"0bc6a4f6d338e23878cb5499cf636dd67a8062e4","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.6.1.tgz","fileCount":20,"unpackedSize":616675,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCmJQ0Zdxka1Heb6qf4xyPjIzOYQg6KwDSjBDf8z68MxwIhAPlDja0dNBkNKuvPbQw0B8pzP+2wkw+biR6PRAI0AeeJ"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.6.1_1694775225970_0.2594771449156179"},"_hasShrinkwrap":false},"0.0.0-b585099":{"name":"@cloudflare/next-on-pages","version":"0.0.0-b585099","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"b585099551912cb0104cf314cf2009c00e01e977","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-b585099","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-qnhKJjbPovF38XsY0S+bNHmJYtmtMZroq0SLelh5BfIdR17tMm/EZQJbwdLSljQujisbSJL7UERMXSO3XqRDOw==","shasum":"e2f7e49c51fe47016d955ec37978941472b41c0d","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-b585099.tgz","fileCount":20,"unpackedSize":616982,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIALI0rXlWcbLvSgJ9BKUu8A98urwexRllCjDb7UylIAIAiEAlrgu36jY+ez49WAdxaOJavnEdX8YLR3T267Hjwcl5LQ="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-b585099_1695066276819_0.9234445018357584"},"_hasShrinkwrap":false},"0.0.0-f65227f":{"name":"@cloudflare/next-on-pages","version":"0.0.0-f65227f","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"f65227fec844992a6c2b1cfb84dc594e18c99f7d","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-f65227f","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-0PbRgVMHVDYtxD7W/omrFY16CG2UDWmNu1hkyq+KEluBNOL9XH+R0qjOFmgs6Tigyr5nqcXKrT4ZlVcnILwv7A==","shasum":"e776e03629d43e1126019a631806687784237a32","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-f65227f.tgz","fileCount":20,"unpackedSize":616982,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIGQaKadLwu7XIYwPzXzJVVrJq93QCkjMqbw5bzEGg5lYAiEAozaZtA2CsMoIr30K4LfT8HdV+/ifjUH648SEr9RxO2A="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-f65227f_1695211703820_0.25379160562711744"},"_hasShrinkwrap":false},"0.0.0-23562ad":{"name":"@cloudflare/next-on-pages","version":"0.0.0-23562ad","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"23562adfde3bcb8f708d8e7805904d224c3755ec","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-23562ad","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-zd1Wb/Qkt048UfrbBz6SXeCxoPP/H/U3Om6IsZSjzabefYKylhKJM78g11TcrzG+LIc72SKKVvDeEZFI2PD3+A==","shasum":"8a0cddd7087f2e6ba714cd2c547d01d80195a7bd","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-23562ad.tgz","fileCount":20,"unpackedSize":616982,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCID6p0SZs1wLB/5a4DC1I/p0scGetzUfcTJM+5J07pJH+AiEA5+gJDL4qcQiVdjWSCyMkX+JRy0R6aykxquZbRiBCNaw="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-23562ad_1695553434301_0.8091632865388791"},"_hasShrinkwrap":false},"0.0.0-628f6bb":{"name":"@cloudflare/next-on-pages","version":"0.0.0-628f6bb","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"628f6bbbfa8251b703de273f2563567c467f01b8","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-628f6bb","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-MmQnk/sihafx06Qh9vH3KrahDPXNrekKAaDfpt/QWrRfhlbBHklvqDTwWwMpzK4F+hC9bOhNLAIzDcJ4JIb53Q==","shasum":"816c86ac365f407bcb3f78b8710580eb95953a9e","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-628f6bb.tgz","fileCount":20,"unpackedSize":618667,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCdW5z5NjhhJLPnxXWVX/LGPnDCSwirlv/kaDfY7FvVmAIhAJ+TA+KIs9lQ3Pf2T7QMf9hOwSBLsBiq6jEeTh9YYHNj"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-628f6bb_1695555962671_0.612586930773463"},"_hasShrinkwrap":false},"0.0.0-5b4a5b7":{"name":"@cloudflare/next-on-pages","version":"0.0.0-5b4a5b7","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.1","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"5b4a5b71ffe53858f440425f82849cc003f837ac","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-5b4a5b7","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-jtxmiS62/yQDWmzOAXnNx4qtCJUJWuJeEcohkp6F27fWZasAMSJRW2B4Bl3xx13RWOO6vzp6LhuKuo4Xn8jrXQ==","shasum":"c800a005a24d09ab96c6842950a77dbe3cf495c4","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-5b4a5b7.tgz","fileCount":20,"unpackedSize":564824,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIFfyNtlaiMmt22srBzwwXWiJjbYYf5cQNwldKBD7QWLfAiA6nm3QZy6GH2420F4U4fn5owddM0f/Sq15MUeU9EGLjg=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-5b4a5b7_1695729723986_0.31955170423731416"},"_hasShrinkwrap":false},"0.0.0-a6b9d0e":{"name":"@cloudflare/next-on-pages","version":"0.0.0-a6b9d0e","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.1","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"a6b9d0e804eb718acb3bb534fa4d68cba31c4df5","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-a6b9d0e","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-QnPJPa4plRvZAQS7Tp8gGIUHO0tnbK3OtyS/VGQjCJo8gkuVwg+18S8nf/BidwAnezEmxOf8xJKfOQW68BYexA==","shasum":"7bcc465b5f90d9ced3dd815e12319559614fbfd0","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-a6b9d0e.tgz","fileCount":20,"unpackedSize":564992,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQD1rwyjgNsltkL3pREVEP8TQBbJH5b14Cs2rnPYMgNjwwIhAIKbqwZSChaJ7xJd8OkBV8tk+VD21wXlgRUoLTp3PV9e"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-a6b9d0e_1695980539189_0.9038051379146106"},"_hasShrinkwrap":false},"1.6.2":{"name":"@cloudflare/next-on-pages","version":"1.6.2","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.1","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"gitHead":"a6b9d0e804eb718acb3bb534fa4d68cba31c4df5","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@1.6.2","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-91mYbmZOtMdJOa3CPng2mhem2sqtInPRL41V9y4zeLuNV5S2dT/lEPu22u1oZPuVlWyK69D6x0a3oBQsl6bVQg==","shasum":"d164dc4f25dcb3c988ca8b9a8e37f04dac306111","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.6.2.tgz","fileCount":20,"unpackedSize":564886,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIEEU11dcOKEehc2fH4n4OIV3qi0JbPZZg3FVR5U5QRJyAiAdm53Mby5WJY+03br26PvoUBrM0MmisyamMLLo/D84XA=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.6.2_1695980552304_0.8722593967983496"},"_hasShrinkwrap":false},"0.0.0-072af87":{"name":"@cloudflare/next-on-pages","version":"0.0.0-072af87","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"072af87a926e430f277e7b63cafc25bcd825ffa1","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-072af87","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-jfao+EZbBel4x7u166p0cYd3qXojiB8D+kV4vfp9NwLI0cSiHYzH/vFNvFUd6vzJbS/yuJhJgDprRUPSWyLiJw==","shasum":"dabe38ddbe2d9f6fb7dc748cff8cc5f13f1701f3","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-072af87.tgz","fileCount":20,"unpackedSize":618835,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDtRLljzucvEJROxReULkoRoO4KINVDiP41jXRiW8zVLQIhALFnlYfvtWjFUaB/D4ioJU9wpkslqYr86VJBEa3ggAxw"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-072af87_1696000159320_0.8103625329211992"},"_hasShrinkwrap":false},"1.6.3":{"name":"@cloudflare/next-on-pages","version":"1.6.3","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"gitHead":"6545453e0ed5ce113dbea4e6da9e3cd5a5fe9ff6","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@1.6.3","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-v+gmG3M8mOUJxeby3Odtuz64D5ta/6bF9rjAiKiq7YQtoRNgYaMZwLOFz7sejabEC2CukjW1Zbj8YULFM1jcOw==","shasum":"20356a1c4a2bb44b3b365990f4b038f693c8a7c6","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.6.3.tgz","fileCount":20,"unpackedSize":618729,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIDhd9lqVEMgi0xZuLFx6E+237fKXgAllDUIi2Hn4EE0iAiEAk9I6Qd8DqPxY/JH9CLTivVXsqavpy2Hdjcsg5EnRfu0="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.6.3_1696002383116_0.8324097549064391"},"_hasShrinkwrap":false},"0.0.0-0fb53a7":{"name":"@cloudflare/next-on-pages","version":"0.0.0-0fb53a7","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"0fb53a707f9163db436ea94af29e529630b90242","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-0fb53a7","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-tnonJUQdhKIB6/OcMuQvSVdcDEssa7ULqqd40i1KkId30Meb9iWeDoPqEJMdjHH+eCmHH1ddgOFQrkj582BBcg==","shasum":"9c730493fe9fb95413353ffd6379d89f535d29b4","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-0fb53a7.tgz","fileCount":20,"unpackedSize":618835,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIFQsZ1viLML0zkNUefnvQrRQcDwYwbtdY5eXh819gy8uAiARr6SAJhCqMA5gTP1mrPe1hWC9MuQyJ0kHkSMwaD/Kow=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-0fb53a7_1696238901044_0.7964726105834177"},"_hasShrinkwrap":false},"0.0.0-69efaa5":{"name":"@cloudflare/next-on-pages","version":"0.0.0-69efaa5","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.2","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"69efaa56285ff38862000c401efcf2f0690af555","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-69efaa5","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-LhieLA8wBCfOkBtKdphlc8fcPOM0svyq11aOPIBOuqrvRzha8uprcnC0ScDdN7iokl19XzFQt79q2jQAwIwQHw==","shasum":"7b0f806c827c7fca2fadd3ba8d9598988f020051","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-69efaa5.tgz","fileCount":20,"unpackedSize":565284,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIBIhnhk8NksN0BZlvsFhG5/8bczuh5TIepf8CnXxV9oOAiBccj7s/aTyrGdRL9Kq2porYqGT12xC3qU3XgPCEKwZ3w=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-69efaa5_1696339239921_0.645935954786111"},"_hasShrinkwrap":false},"0.0.0-77369b6":{"name":"@cloudflare/next-on-pages","version":"0.0.0-77369b6","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.2","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"77369b62d4f5f7dcae2bba20aea4be71f843e864","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-77369b6","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Dqo6lGifuSoHnyXPUhg/Ta02rWT7kfjpN9YlX+1+Nu9hfKaSlRdbiXzVxaUYbjQTJHyOWdAVTPg1wVhNALoLgQ==","shasum":"06405f3399865c5d7809378ae0efd65d75150158","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-77369b6.tgz","fileCount":20,"unpackedSize":565117,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDd2Ys/8D+uxaMfkAlbhffcFrz+NQ6IN+zmfX0CvhPhogIhANp3lFM81RtwBPLiG/u9c1slEI5wSHN0vaRjtbEKbUZz"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-77369b6_1696367715013_0.34088912472990107"},"_hasShrinkwrap":false},"0.0.0-29d3041":{"name":"@cloudflare/next-on-pages","version":"0.0.0-29d3041","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.2","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"29d3041e3273f03fdd264ad3907d0554d1d37b1f","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-29d3041","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-3Jb9pxSFT7DruCMS+Yjd0BZssTMm4oyCb1fVgWKysyDpYpzIbYPRDFS23HQeTolc52Ea/WZPEnM7IHsEO5rxag==","shasum":"45ba270f575d51ef865459a99b0483b8f793afd8","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-29d3041.tgz","fileCount":20,"unpackedSize":565117,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCgLwMoYloSZsJVIMQktza+m7ZcBv1O19emToF1cGlCVgIhAMlkXIdF+JkrivSzhbxQ0163hCMzTxVxfYEONx3vqDp2"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-29d3041_1696437760457_0.839057525435164"},"_hasShrinkwrap":false},"0.0.0-2423529":{"name":"@cloudflare/next-on-pages","version":"0.0.0-2423529","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","postbuild":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.2","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0","image-to-base64":"^2.2.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"2423529ab6c492523764e4dd6d495ecc294d0405","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-2423529","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-DIgXShnCVhCjqVkrhBqCFCDpDTWMT26KlwctSWjmnd5c3aDTjhfD+XQR0ZjFJKoG61FhrwEqvcSUf//EBTOVwg==","shasum":"35e9205d3586d8692978a5bd7a95ad6fbe88e5a6","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-2423529.tgz","fileCount":21,"unpackedSize":717070,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCICVc5q1ddeT2PrNgs17PEhEhIwtTUpZMgjHy9Si+y7HiAiEAvT0LkK4FhCiXjuV1hL4EZOXmvvZytPHIPf1EmV8cbPg="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-2423529_1696593738261_0.8881392909216137"},"_hasShrinkwrap":false},"0.0.0-d24e241":{"name":"@cloudflare/next-on-pages","version":"0.0.0-d24e241","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","postbuild":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.2","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.21.4","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0","image-to-base64":"^2.2.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"d24e24129e120854a6b7214e2f3bd2ab47805c4a","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-d24e241","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Rv5W4u8fnS9eEHivJ3gbM3btROLWgN2Phe3bMgf0zgzsuDb7GaoZQ2BkGYGFaAIW0vAb3F0HSzg3APi7ansFww==","shasum":"152762ffdf9b8bcd5eb1693211710990a0f65035","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-d24e241.tgz","fileCount":21,"unpackedSize":717070,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIBHJej8xfeqUkjJz0Ssl7RH4Er7UHurfoGFmLpHJL2DUAiEA2QkreeKfdplnKSbdL/pvjiCECGWW9LQiUeZ1qwpzTys="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-d24e241_1696597314397_0.8634331317359034"},"_hasShrinkwrap":false},"0.0.0-bdf37d0":{"name":"@cloudflare/next-on-pages","version":"0.0.0-bdf37d0","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","postbuild":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.2","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.3","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0","image-to-base64":"^2.2.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"bdf37d0352d01d43a615b352d7f633feeed6c912","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-bdf37d0","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-JreDTODdvc9zukvcszFPvFveUsxnzr/jGl73vqKpf1Y7y7AeoZY7OVaxZ+xSOYNwm6Zxk/sEUQ6tYaoVzKzmIw==","shasum":"c8db34b391a8495f666c8c0319ff6728de454805","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-bdf37d0.tgz","fileCount":21,"unpackedSize":717444,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIHPq71O2H7ItvLZw21eQRLDAdEHb5QNiYPTMc3BytQzaAiAwlFvrrLx3lWBNFwumQslOTtp2rRCYvjKq2cIdDzOoVA=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-bdf37d0_1696597437590_0.8647628342625211"},"_hasShrinkwrap":false},"0.0.0-b5e8631":{"name":"@cloudflare/next-on-pages","version":"0.0.0-b5e8631","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","postbuild":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.2","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.3","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0","image-to-base64":"^2.2.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"b5e86316a4395e6f9613ae102e20c37873ae7cff","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-b5e8631","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-0MMADHVdppWXP5t+8WgJ7eHTiSWAk2W2sIfazeR2yvw/6mRyl182uIJ7Gs0SiIUGN3hYUEB844hj3ZlPyifP1w==","shasum":"a83a0036d95ccd480e2d7fd3036b75e6716488b6","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-b5e8631.tgz","fileCount":21,"unpackedSize":717444,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIFFCYAyqe5Rsdc55CZotmTAAiyWiVwS/D+EnWGqOu76qAiA7EiD+e3kMAtIHETa+qIZ/7DiiDaoEPd4ORXcm9rXDzA=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-b5e8631_1696610497154_0.47531128271133327"},"_hasShrinkwrap":false},"0.0.0-5af0ca3":{"name":"@cloudflare/next-on-pages","version":"0.0.0-5af0ca3","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","postbuild":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.2","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.3","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0","image-to-base64":"^2.2.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"5af0ca3dd44251fcadd84e94b935210a3d22520b","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-5af0ca3","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-35gDhkPuXEQY4qC0g17h3mOshHqHc9GNvgUqL76NEYXsta+z4+7xwsuBvsGz9nM/crdvQHtXVRquXQNLGjs3pA==","shasum":"fdb7e82fef02462c641f75c8e90f92531b89be95","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-5af0ca3.tgz","fileCount":21,"unpackedSize":717444,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDiuWDBD6vOXLaYa2DO4iBscG33JVJNU1o3QWiD5l+kuQIhAItUDQ/rYSzVrdrEvimPC25iMdGkNgkkFVVTHih08jRm"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-5af0ca3_1696631823116_0.5911656116928539"},"_hasShrinkwrap":false},"0.0.0-6600d2a":{"name":"@cloudflare/next-on-pages","version":"0.0.0-6600d2a","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","postbuild":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.2","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.3","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0","image-to-base64":"^2.2.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"6600d2a30aa5b63644ee8ff341e41b17053adc00","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-6600d2a","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-XHAiG3ttktZFPLAY7d7in3VNz5Y/UqmSulz+5EOI76ARBhG4o95tJqm/dY9aPlRZJLTI1OTHmkWU5GZqprImDw==","shasum":"71856a50201414f25bc041f668707d03ac73fa44","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-6600d2a.tgz","fileCount":21,"unpackedSize":717664,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDZPEr7p8s1mDsT6wp1HHE94AuGoNnvkXbaDIKrRIeP9AIgNYpzPYS7TDcpkyQpD3FjUjNxz9SFpwjDXcMKT2iIvrg="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-6600d2a_1696718025666_0.9888182974569197"},"_hasShrinkwrap":false},"0.0.0-1133a7f":{"name":"@cloudflare/next-on-pages","version":"0.0.0-1133a7f","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","postbuild":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.2","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.3","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0","image-to-base64":"^2.2.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"1133a7f8db77ac0d3f72c4de0d1d0b0fa3b090a9","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-1133a7f","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-GidJMzOcAVH1PnXItBUM7hM+TyD1hUFqq0w5iRrKXM/KSPT8YkPYdrvBX0591KBquwprRN17YF1jLhZN7il37A==","shasum":"f3b237b90d003919048b09f7d9bac65395e98b2e","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-1133a7f.tgz","fileCount":21,"unpackedSize":717664,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIEDYhqCfuipxvdtTOhEu/6c13LK0V8tgXoASbZmKFwuhAiAfYhfzGgD7sxBvTb8Jm9KOgm2SMy7JsTXsyXVkOXJleg=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-1133a7f_1697130853347_0.5851313550273285"},"_hasShrinkwrap":false},"0.0.0-c3df4e0":{"name":"@cloudflare/next-on-pages","version":"0.0.0-c3df4e0","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","postbuild":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.2","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.3","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0","image-to-base64":"^2.2.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"c3df4e013f1f17e301958ab2bf2294a571ca7b92","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-c3df4e0","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-+8lLOsIHRLMnAXQ16ES0/lUdSrxS6fML6myrjFDjZ6DlqDnM3UTedPdbyasPn11tJoePWrBVDQsn/SsUVn5cqQ==","shasum":"11bb24f174f52c1693ad6a8ef73e76557afb174c","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-c3df4e0.tgz","fileCount":21,"unpackedSize":717664,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIHeje+ecEZq5SWsI3MOp0QIg8mUzjoILpYDBGuxCPSydAiEAvih/b1zor0evVXZahsgSD3/lyO1SVW0XxZUTIwyv79k="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-c3df4e0_1697478378387_0.07022683937522123"},"_hasShrinkwrap":false},"0.0.0-ea970f7":{"name":"@cloudflare/next-on-pages","version":"0.0.0-ea970f7","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","postbuild":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.2","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.3","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0","image-to-base64":"^2.2.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"ea970f7f9e48a561e8522643a4af35b24dc715b6","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-ea970f7","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-OaR9X7tWb0QQU7cCIRPFBK2wpuNNdScxDzeKfPDnXUenkpUULIdTkLK0q2iKpgZ4GXDz5GYSwDyVaojz+P90uA==","shasum":"260a61b5c32fee063752cd925f2e37baacf58d1e","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-ea970f7.tgz","fileCount":21,"unpackedSize":717664,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIFV6p25uDccdqCOSc5IdAPCituhb/26LUfDTUHI/g6MzAiAZSSITYNNgyJlNElhKK/V3p8a6b9Zh/e7olwwFsbKj0w=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-ea970f7_1697488468121_0.5660712353850021"},"_hasShrinkwrap":false},"0.0.0-b296765":{"name":"@cloudflare/next-on-pages","version":"0.0.0-b296765","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","postbuild":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.2","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.3","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0","image-to-base64":"^2.2.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"b296765f45b38c37da862cb13fba34dc66af192a","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-b296765","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-qfM/O70lK73xl8lrYdYTvalKjWvT9uNb1AQwN4Wzh/x1eUDFOTqPTz0Z4dAUpK6mXM5med2fBpCsXLSQn9BamQ==","shasum":"1a924f31150a6e1464e25ba256c6d6669a69bce8","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-b296765.tgz","fileCount":21,"unpackedSize":717664,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCjvzjg+yTpM/ZCHIdlzhwe7QwsBwsLTEJzPmOicgpB5QIgbcPppzGGqPoOkB2umoa/oGGsG0n/BiF/BSEthLN0wEU="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-b296765_1697488539993_0.996037148280476"},"_hasShrinkwrap":false},"0.0.0-e75cd34":{"name":"@cloudflare/next-on-pages","version":"0.0.0-e75cd34","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","postbuild":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.2","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.3","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0","image-to-base64":"^2.2.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"e75cd340fc0706d424aa3fc944e3ad78df754207","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-e75cd34","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-ZBdcIShK5D2bwQc+IKR/or38ZcgAcQ3JvIV/AyOb31Z9az9Du9HNAC76VL3JeSw21cVzXXGUYNbNfeppm1dYbg==","shasum":"dac63459ccca744fc124675eb42b75fd6dc76e24","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-e75cd34.tgz","fileCount":21,"unpackedSize":717664,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIGZLRft00hJgJbuVVp8iWbsVE5XxeGP05UdXQVdqiEytAiAE6dbLGPsn2j+gecDVDHWyRczIj/LwJ6KgIVbtj/582Q=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-e75cd34_1697537562530_0.26346835656794965"},"_hasShrinkwrap":false},"0.0.0-9a51c79":{"name":"@cloudflare/next-on-pages","version":"0.0.0-9a51c79","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","postbuild":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.2","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.3","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0","image-to-base64":"^2.2.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"9a51c79b2349af2d73185c62f5eb055126a8e197","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-9a51c79","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-JDkC28z90ydjtmG3S6cxqWK4IQqcnScjc0xhcDrVVQEnV4Sv0txAzOuvv6vNEWS7av9qaoTj2Ddfo+zRQ9290Q==","shasum":"e08b5b92d19863d287abdeb24c4d97230179526b","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-9a51c79.tgz","fileCount":21,"unpackedSize":717664,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIDkUEv3nfND/2OUiP8nFMMokCZxkfXQcOfAmlKMXQ7EbAiEAxEFu456zdE4vePKEPs7T/zVIp7ev9KA5OcAqS+Hqc5I="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-9a51c79_1697538322556_0.1410599702390849"},"_hasShrinkwrap":false},"0.0.0-ab83858":{"name":"@cloudflare/next-on-pages","version":"0.0.0-ab83858","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","postbuild":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.2","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.3","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0","image-to-base64":"^2.2.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"ab838584c4adb57925724b22277e0d3201d53a0b","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-ab83858","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-K+6s8+6wY4LtUaG56xh8gxjmNDCm0w80xiOu5ym0B1fnWPB1M23hm+cYVd4HrQbBOUjamaz5KvQYUWQrY7QY0Q==","shasum":"a863cc1c26a9f7a0ef1754aca8929d235d108278","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-ab83858.tgz","fileCount":21,"unpackedSize":717638,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQD1nsKhNRT77TNBkTh/vso3BLcrHHpW4PxPZPYZEezA/wIhAKBH/o+uKUPSpCzQNI0uJfDTLUcb5clzOWeyx4rIEo9z"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-ab83858_1697570511457_0.6137270547311631"},"_hasShrinkwrap":false},"0.0.0-5dae9b2":{"name":"@cloudflare/next-on-pages","version":"0.0.0-5dae9b2","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","postbuild":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.2","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.3","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0","image-to-base64":"^2.2.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"5dae9b2851ef4a88b89646adb6fb8c973367a840","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-5dae9b2","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-8s4ai5uF3t0ljS7Ict8dDCqywtfMeTweQoWSXw8MCw3pHXnZRZj4Wzy8z6GDRCncahvLwhRTc4qOJJAn8PMu1A==","shasum":"3b0c25af9157ebabf1e575d7ebba00dfdc04d17f","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-5dae9b2.tgz","fileCount":21,"unpackedSize":717638,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIHjpjdKeA/LvmbK8URLIXpN8OUlVrcJ2GFfdtb+PgUw0AiBryeGau97zPZbVZz09UmtjbpD300pvfTNkcduoWCj3vw=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-5dae9b2_1697582153296_0.4178455888479975"},"_hasShrinkwrap":false},"0.0.0-33c5ff8":{"name":"@cloudflare/next-on-pages","version":"0.0.0-33c5ff8","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","postbuild":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.2","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.3","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0","image-to-base64":"^2.2.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"33c5ff8f352676541de1fa21ae5ba9ca2bc1e554","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-33c5ff8","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-+1iCEPxT/wL8wLCX+cI5TE0zY2TNnUsUmmqqUobb+O0pL0/TdQT2iNbKZufMpupizTKt3qPrt4mkA4VvK9Ki1g==","shasum":"593b47ad0356d0fa33df5e375941c34c834017df","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-33c5ff8.tgz","fileCount":21,"unpackedSize":717638,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDv4h8DLg8TpuNbLumFUo/9Yv8fy+vf687rTGhb+lAlXQIhAIK2X4v+tgyVHZaW8ZpZyI7ZTVqp3vCXxSag92PhpXjC"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-33c5ff8_1697627154616_0.057437846974942586"},"_hasShrinkwrap":false},"1.7.0":{"name":"@cloudflare/next-on-pages","version":"1.7.0","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","postbuild":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.2","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.3","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0","image-to-base64":"^2.2.0"},"gitHead":"33c5ff8f352676541de1fa21ae5ba9ca2bc1e554","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@1.7.0","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Zcs3oA1ieByJhnqxdtaBTfYkCfAmhYdnw3kAecECqETV1TqjeG/YZwwgTsLBOW/JdxGxmEuC5yP0xjMLbwb4Ig==","shasum":"4dbe689311973796ecad3845d4050463dab6f4bc","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.7.0.tgz","fileCount":21,"unpackedSize":717532,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQC3oLr+GNVRkWHVKSbQ8Ra6pLqEsX73FMpsG4lS+nSZVAIhALxLwG2QndY6v/6CPVTGG5lWaBwFRRdoGbuUVotw/yBH"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.7.0_1697627161696_0.8918493140060026"},"_hasShrinkwrap":false},"0.0.0-5b44784":{"name":"@cloudflare/next-on-pages","version":"0.0.0-5b44784","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","postbuild":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.3","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.3","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"5b44784a6e9de5bc52f9dbf6d5d82dd3ba024bed","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-5b44784","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-jNB4tzhuJ8KZHnMLM2sdAhYWtO83hjrcmo9AApR72WidyYoUVZMiMW4g9XKre2RJnXJBqghblT1cxdES7BMVxw==","shasum":"3a68b1be54a6345cb830787076f4a7adff885ade","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-5b44784.tgz","fileCount":21,"unpackedSize":718355,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDWiHxKzO7dh1l0TzWgMlHKE35cMttVOv5a7ba9df5esgIhAKDl1mZG0oNl9f3tsLvT9NH2Yp5YVP8Y8iZax4RKwEln"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-5b44784_1697725648230_0.39072985701499174"},"_hasShrinkwrap":false},"0.0.0-b474580":{"name":"@cloudflare/next-on-pages","version":"0.0.0-b474580","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","postbuild":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.3","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.3","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"b4745806c514ac26d070df11f2c42eb9ff2eed76","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-b474580","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-td93dOlaNvgabGYs51tPPzdRM/Noe+L8NKlkYkIeoSlnPqcEyTe/fTIIIEfZ8dFiAfRLFpiazf4BN/LvK4PACw==","shasum":"d2c3a45343d8b2162fa38e15fa7ea327dc0fbd67","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-b474580.tgz","fileCount":21,"unpackedSize":718355,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQD782vjwA4RvLrx6c5bd0nAJOPU29M2Rv4BrzZB6ziuGAIhAMrSFNB70N8QO5ajYQ+d5auAGWU6uKAi5k1pbx8YDLYH"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-b474580_1697727917732_0.06106867210872391"},"_hasShrinkwrap":false},"1.7.1":{"name":"@cloudflare/next-on-pages","version":"1.7.1","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","postbuild":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.1.3","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.3","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"gitHead":"b4745806c514ac26d070df11f2c42eb9ff2eed76","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@1.7.1","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-e/BhKdkxzJpL+BzXeWRtNAUAcVVu7+KZrY6KX9yhPlYXEBXjhh+Cmxjh8xqn5cBWGld4ZSZa/KYHs0wRZewsMA==","shasum":"fe083cb9aaf7bcf89c8f9fdefa03d5d60c57e00d","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.7.1.tgz","fileCount":21,"unpackedSize":718249,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIF4Mqd7dvVuLuUnB+YJHcEj9yb3gRR0ELaJ8nNZwUEGeAiEAk9HnuER20xZUFrBWg5XH6l8YDn32XuE6La879VR6kYs="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.7.1_1697728740396_0.1305827840117224"},"_hasShrinkwrap":false},"0.0.0-a1091b1":{"name":"@cloudflare/next-on-pages","version":"0.0.0-a1091b1","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","postbuild":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.3","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"a1091b13862f0b48c36c55d088a15375ccc10011","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-a1091b1","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-fg7TTeeeJPDXiGnkua40Ojkql9dKDUZ/znuUBAcEeXcnluTn5Vu1+IhV5Q5u+IBn31AMbXqtKHZ4f+P4uxMlGQ==","shasum":"68b4731cd1db502e6e44b962f61d4022dd41ec86","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-a1091b1.tgz","fileCount":21,"unpackedSize":718379,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQD89/L+IFTdPq/P9eX9WdSFQz8u1YPsQGgIYRNrikbDVwIgEB+TXIRSAq0udea3e92PpwNeB9aqmlTDAe8VcgNZ0LQ="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-a1091b1_1697921469685_0.18244448611501696"},"_hasShrinkwrap":false},"0.0.0-f9b7ced":{"name":"@cloudflare/next-on-pages","version":"0.0.0-f9b7ced","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","postbuild":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.3","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"f9b7ced3e3d4d408561568534000bf625e8c8c3c","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-f9b7ced","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Lav7kD4+22u7W1SmajB9XNsDr3hC5eaJaRYeVIgwpIDypN7Mmeraj2qe2x3z8ihfjt+hkqjE0f3eUYzSpu5Tzw==","shasum":"726d63ae39d2a4bfc84b9c38fac4d7816c8066d0","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-f9b7ced.tgz","fileCount":21,"unpackedSize":718379,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDAYggfqh+hY/a5VFaWWjIrGclHgedSo+cFaUUVMVkTAQIhAPUkFsFnGDfD87pLe+GJg+VGGO2yGRKLBjhKUnFkdSQH"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-f9b7ced_1697924393106_0.8858365692023329"},"_hasShrinkwrap":false},"1.7.2":{"name":"@cloudflare/next-on-pages","version":"1.7.2","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","postbuild":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.3","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"gitHead":"f9b7ced3e3d4d408561568534000bf625e8c8c3c","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@1.7.2","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Jr1s8CIo/S1e6/5R0jKmUueOcJMEGYp96viBUvw0rCRLo3Uw88V+tYr0eubzlTbvhI0Vq4aSLLtiyco9kLsJBQ==","shasum":"d09192aecb3ebd04538b74907c647df8bd5b6b5d","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.7.2.tgz","fileCount":21,"unpackedSize":718273,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIFBB71NNxeI+7Q2WLcZ3IdPZFfCUI7V56M0E0Vi9vWXDAiEAuBDH0g+92SL0MnTjfwOtTa1LSDZLPsOXkHL/2dj42d8="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.7.2_1697924398046_0.7571988642422398"},"_hasShrinkwrap":false},"0.0.0-3179e4f":{"name":"@cloudflare/next-on-pages","version":"0.0.0-3179e4f","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","postbuild":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.3","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"3179e4fdb29f347d9f7855e42c8c19030ce4254a","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-3179e4f","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-o42wdyHMQ8jRb0cyyNccC7DS1wJsnQzIg2uMyFrHdlpUlSXXQ+T6rxclCdYnQtQXcdTqGyKrkKLpi2N57kkgNg==","shasum":"77ffb94d8522e9cd4cdcb387a0c93a3ef5402890","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-3179e4f.tgz","fileCount":21,"unpackedSize":718379,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIGxpIqPrH1omj4C9EfCyVDTwyMz9fPfBecfD7xPqsdL+AiAgPkfC27CzHifgqKBMetkmwMJC5qFpoeGLqgdPspBDCQ=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-3179e4f_1698004586141_0.8282590391947995"},"_hasShrinkwrap":false},"0.0.0-9b290cb":{"name":"@cloudflare/next-on-pages","version":"0.0.0-9b290cb","bin":{"next-on-pages":"bin/index.js"},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","postbuild":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.3","zodcli":"^0.0.4"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\nTo run the CLI locally, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n### Local development in watch mode\n\nIf you want to work on your Next.js application while using `@cloudflare/next-on-pages`, run the CLI in watch mode with:\n\n```sh\nnpx @cloudflare/next-on-pages --watch\n```\n\nThen in a separate terminal run:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"9b290cbedd8d1266b235bbd7413ba059ccc6f6b6","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-9b290cb","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-2CCXCvnOEiNIjWFvWNFWYtiidUn4Tnr9SYt1IZDuO1rR0JfJevsmyRBYoxvf/c6PLeTsqYpuId8k+Ayo61MXBw==","shasum":"a87170556d2ae466a06ae454d5eeea2269a94fbc","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-9b290cb.tgz","fileCount":21,"unpackedSize":719274,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCICuzn+HU28AeB2a6A31Xz/ooFToJAd+56NkcgV4taelBAiEA0VZNTNLlQOFiOumY9kV/EFHks/QsKXP7Va7OfHoRF/E="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-9b290cb_1698612674777_0.280971515260384"},"_hasShrinkwrap":false},"0.0.0-4572873":{"name":"@cloudflare/next-on-pages","version":"0.0.0-4572873","bin":{"next-on-pages":"bin/index.js"},"exports":{"./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"457287359bca098b8ca3cb0b10655addc846578b","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-4572873","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-T/F6ki/7P8cEsJC5hzH/IA9iZ/HePpYIpzUXCIMcQn+i0yXO6/ft24MVUZuDoDjo6ExzwGA9GLLOXoeVydZoHA==","shasum":"68e371061bf4428b60fac4d72abe29eb12ed9a0f","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-4572873.tgz","fileCount":27,"unpackedSize":961199,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCecLd1po0XtM0f/6mwdZ1OSMRT0cjosZkUyX8cNKVQfgIhAP2Mr3owPaTl+CZI2NuXyNDXRDkgekg0Hwo0v/TxyOvb"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-4572873_1699013876014_0.6177399763628033"},"_hasShrinkwrap":false},"0.0.0-bf57ec9":{"name":"@cloudflare/next-on-pages","version":"0.0.0-bf57ec9","bin":{"next-on-pages":"bin/index.js"},"exports":{"./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"bf57ec9d01b354ea6c9b9bd17c683d592d5c6ae9","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-bf57ec9","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-foOLPFJAWyZYazto8KOTpf2OFlm+9r58zVdC9Q940LtZR9p91EcubXmRL+am1R9n+dmDfE5KVPBhUGgUoevPQg==","shasum":"372a730043aabf9aa3a04a5e59c1b0ea6225317f","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-bf57ec9.tgz","fileCount":27,"unpackedSize":962465,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCVB4yt1Z2//fEJVCkGPbaH+xZ9RIkdY8a4ajVD+Ww//AIgJFw7HE0APa7m3948UmFrSc412SK5zm/Rq6J8Px2ladE="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-bf57ec9_1699192058116_0.3465461414509523"},"_hasShrinkwrap":false},"0.0.0-c83d125":{"name":"@cloudflare/next-on-pages","version":"0.0.0-c83d125","bin":{"next-on-pages":"bin/index.js"},"exports":{"./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"c83d12526f9dc04684163e830076ff7306f893e3","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-c83d125","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-9Ynv3fUnSqQW/dUZ/hsENd4+Z9GwDR7wvq/ThtWS9g4wKgi+m5meqrvQP1ohU6zsjxxmYd/mlHesGdGZt77yBQ==","shasum":"9c7256ba56429eb3835dfd511ff610bc6b83dead","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-c83d125.tgz","fileCount":27,"unpackedSize":962583,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIG9p1ZvuIgwZ7ynciDsFpu9qPQqkDKpS4SMmvphVVwgpAiEAgMSy1ZnMq1XQrqUcY+y//h+rMF1N6UIz7+RY+X8B53A="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-c83d125_1699712582779_0.6966104733011729"},"_hasShrinkwrap":false},"0.0.0-500edef":{"name":"@cloudflare/next-on-pages","version":"0.0.0-500edef","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"500edef51eb8216d09c0a352e06e0921d7954a82","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-500edef","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-rcDR1dLzEZT67zYYCsmiI1WNCYLfTEASXqY6GmCyzpW0kTnUbP7MPm1vSwZmodNKZ/Lu24MXjc8Ryw7Wid81GA==","shasum":"f634da630bfefa1989b3b5e8c7480f7885a8e00d","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-500edef.tgz","fileCount":27,"unpackedSize":962647,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIHkvHXKswU85AzS9m4Ea0bHlugT+xyqqVRvNiw1+A1uPAiEA6mTNPWsrs55wn/GkqHDCRF+RRY/UPeTycS1YgYW0r2Y="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-500edef_1699713150490_0.7403682065363135"},"_hasShrinkwrap":false},"0.0.0-ee237f3":{"name":"@cloudflare/next-on-pages","version":"0.0.0-ee237f3","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"ee237f3f3194f87e1944866c9a3db00cd1624a3e","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-ee237f3","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-lNd9IfMUPX9US7NIXycC1RLCe9jny0PgcIHrESrflfnTdQbzurHQuU5hoHSkBMqqDrcGSCFYVbNzwFLwJ1RrbQ==","shasum":"bb0083b9ccd3e7341aa636f0dab0891ace88f3c3","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-ee237f3.tgz","fileCount":27,"unpackedSize":962649,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCYdXrurJ76PiwlN2Tf4DIE/u0twMCqbq/vp4EjW9DKkQIhAP4z1IpMk16+rgyTvrpbOai+LzrKwbMv0vRmRD38ftQX"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-ee237f3_1699713751774_0.32964512675008106"},"_hasShrinkwrap":false},"1.7.3":{"name":"@cloudflare/next-on-pages","version":"1.7.3","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"gitHead":"3dc3ac4c5287ef28c1f48dc3d07900df382e0407","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@1.7.3","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-UHZ7pSXD/PvRJQ5jU2auaEmn5HARMwqVE1F1lVLYSiJ9NyJ+FNQttH3/ABzqsBSJnjde0K0GDdIbrzWEiuVW5w==","shasum":"00abcd569866d4e225c04b72b7fe7b751706bcd1","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.7.3.tgz","fileCount":27,"unpackedSize":962543,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIHnSxVjk7NGWmuLdrsfaETSslE9CW+/BA4wmuVKtOX2DAiAZ8VZ40zr6NeAS+ciXjXuWx1vFSDONG/IFXyrBzWxBAg=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.7.3_1699714417196_0.8392700358196716"},"_hasShrinkwrap":false},"0.0.0-3dc3ac4":{"name":"@cloudflare/next-on-pages","version":"0.0.0-3dc3ac4","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"3dc3ac4c5287ef28c1f48dc3d07900df382e0407","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-3dc3ac4","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-sFqicQ5W8ck602a3gdk0bxIBA8WIqrqJ94H9vzMIkhWQyxzXOVR5jYIWzWDCFhteWNhDQ4cS51Dsc19zPaxOaw==","shasum":"a8fd0420e59c8813e7d3b48294ffa1b496d7dd27","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-3dc3ac4.tgz","fileCount":27,"unpackedSize":962649,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCfz163K0SXAxBbo7iZAxttZg+Se1ZB8mDE8VsOuSerpQIhAJeK4B6HWUZf6eTYKYAfjqthp02ymsQR4EVlbmTPTOVy"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-3dc3ac4_1699714423818_0.6226181070117427"},"_hasShrinkwrap":false},"0.0.0-48796ca":{"name":"@cloudflare/next-on-pages","version":"0.0.0-48796ca","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"48796ca365fc7d0018c73f1ab6010dc1c978ede8","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-48796ca","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-hL6r09T9DDyjZBLA8Y7uBvqNN+f9hJMmAHspHgEQl/LKe+40KaUiuOByWQjfzCNe3gPM8BtrE9vO1CfdW379tA==","shasum":"4f0e844148b4ffef0b2cc65802f1da516a47b533","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-48796ca.tgz","fileCount":27,"unpackedSize":962649,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDVRUw49RRg9km5TJpr6VTd05nQA4LoCaUeJPC5VQUAdwIhAPl+9dOr1/NcKmY0w0puOEQrbzJ7W/harw7g5fCmM/NQ"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-48796ca_1699867934285_0.6952522975943596"},"_hasShrinkwrap":false},"0.0.0-c9167ea":{"name":"@cloudflare/next-on-pages","version":"0.0.0-c9167ea","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"c9167ea4bd11cb235e1d0545f25f187fd83771fb","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-c9167ea","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-ADwgO9QofwW9PbIK8PuR0gsyxS8RgdfrP8KMnJTxUU8pEpUaCekx6RImeUKCHXeI0O5LLnYuqWTRf9W5QX0Ikg==","shasum":"29e8b3c164c9bd637ba581c4524586e4dca4f33f","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-c9167ea.tgz","fileCount":27,"unpackedSize":962649,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIDIqNA1j2beMLyLlmdeXeAxo8LbgD7wol4vGvFv9tS4GAiEAxYr693xO+VswOWDTInLPtxrqitsXjhVpnIrzq0Zp8sI="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-c9167ea_1699870699936_0.005868818469502601"},"_hasShrinkwrap":false},"0.0.0-9d5db04":{"name":"@cloudflare/next-on-pages","version":"0.0.0-9d5db04","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"9d5db0472dcdb4d97c50d73c4ab7935761cb8795","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-9d5db04","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-JC2tZZpAR19rP3dqG2Nuka8qu4ypRyhiXbEpo+AbjEfmqIgZw45mBqqUiBSYrp4FXht7AfXC+LvlYoQ/TncHFw==","shasum":"7d5040f287eacaad20cde3ad7098d24f42e6e053","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-9d5db04.tgz","fileCount":27,"unpackedSize":963197,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCERrBicwEqUxthWwmfRbz5a/Sw8g5J/rQIH24MvlmNggIhANFz87C7ihpmvQA88FRHmpjidl/XfYKHHqGdheMJPRMc"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-9d5db04_1700422941707_0.24707910575101466"},"_hasShrinkwrap":false},"0.0.0-1c746ea":{"name":"@cloudflare/next-on-pages","version":"0.0.0-1c746ea","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"1c746ea160db01db888c91f639669b3f940c5ec2","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-1c746ea","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-tR68neGijvG9bfJ+WctH4V3lb7est7QL6/Xq73Pm5vQ1oKw4Xo3MT162kuqKra5spTib5bVcZ+oq0bM4Il+xUA==","shasum":"7ede0be37d94085275571d50c624c60e3010ec7e","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-1c746ea.tgz","fileCount":27,"unpackedSize":963197,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQChH0GHXr58bIkbLPW4TWKwiWEywUSRo6ZVs+8KYZ8VegIhAKG24o0tu1lb8L2QAXK6lbh0gfOtphPSKwQa6mtaUOMF"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-1c746ea_1700516065971_0.6511563578229922"},"_hasShrinkwrap":false},"1.7.4":{"name":"@cloudflare/next-on-pages","version":"1.7.4","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"gitHead":"1c746ea160db01db888c91f639669b3f940c5ec2","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@1.7.4","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-h8e4ZCL8QMroLckuTX8FhTtBFM2Ix00RBexXGpEh04SvQG8/VhfPyxRFSWAwUnMW857B+fe2cy9FbGeNfkBuLA==","shasum":"4c25dc7e7be9e47ca4cd864fce11cbe1db3f23da","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.7.4.tgz","fileCount":27,"unpackedSize":963091,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCg7XrWOIhV7tp4vqw0qL7myC/Zcr18vCRHabDRwjY/xAIhALWcpsyxRBUOcGCG4fxyLP68yWyFa3nyZqyD4Kx8As6o"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.7.4_1700516081671_0.35402534334745206"},"_hasShrinkwrap":false},"0.0.0-2d5dde9":{"name":"@cloudflare/next-on-pages","version":"0.0.0-2d5dde9","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"2d5dde95176bca46cdd63c8b204699127017c219","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-2d5dde9","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-wBwcLg6LMALyfiO9oc+bzYY4dXByoMK3Uzm3GP7Jtxw6QODpAXaUXzHxZdFT8cMe8lkFwCBCL181HkjTWT0iBg==","shasum":"2a665d34a9f22dbf41b5060e97c2175aa7ff4b44","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-2d5dde9.tgz","fileCount":27,"unpackedSize":963197,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIDrXVZMvhx3xXAjV9ucU+mKTlpXZ7ZCKB4bce6+omovMAiEA5f1/6f3eAOv6CDJS4CEX/Ujat5GeBi5HfwRXzhWlzD8="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-2d5dde9_1700573676913_0.8746406348760791"},"_hasShrinkwrap":false},"0.0.0-f364224":{"name":"@cloudflare/next-on-pages","version":"0.0.0-f364224","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"f364224067deec4bc0c736ae86d16620f878e3ad","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-f364224","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-HXxkmBbBi5MT7ler1oBoDHwkjRklRZtjkc8/ePcYsY4VA+dqJgHuDr9wh1eo00RQuYi/l1y1zwK1Se5/LxYiVQ==","shasum":"a6eef4a0674b5d12452888ec2d0c98ffe15a3b17","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-f364224.tgz","fileCount":27,"unpackedSize":963311,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDPjJr0Rr4L06+FcbCJfXfr/Lk5uNPb1EXNu1n1U2jepQIhAPAN1a5s0y0a22zAw+NY/L6sjXYTouohppR9m7DhHOpS"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-f364224_1700935970540_0.1260113198087507"},"_hasShrinkwrap":false},"0.0.0-888ae85":{"name":"@cloudflare/next-on-pages","version":"0.0.0-888ae85","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"888ae85fa5dc566c8ccd296ebf983ea58fa21f8e","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-888ae85","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-TCye+s0KrvbE7Kewe+Wf2VYyrSPZ5jE5fP9XYIyIhCg/k0JMx+J3aKxARdFnDjofM7eDrWplSvkuHsNwov3GTw==","shasum":"2519305b3b1681347f5f9cb8ab9b327c5deb3d6d","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-888ae85.tgz","fileCount":28,"unpackedSize":964663,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDssL98WJbrYBAOz+3HjRx/+JcojvihkjXjrrsX1wqmuwIhANt5/+W88UWkHPKJZV2l543oSWrb4yOD34oTnle/WJb4"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-888ae85_1701013791165_0.7377878083837155"},"_hasShrinkwrap":false},"0.0.0-dbe2c78":{"name":"@cloudflare/next-on-pages","version":"0.0.0-dbe2c78","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"dbe2c78922c3fcf643e9f5938ed801ba94411558","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-dbe2c78","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-k9eDBrdiXzqYTZNod2SFFtMvIem9zq7AxbkoRcF8smuE0EQXRSSON4fF6z7nci45jArRvSdLx8Q4vdYgP+rgnw==","shasum":"47beca5313e051d32f8680ebede9dcb2a84474de","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-dbe2c78.tgz","fileCount":28,"unpackedSize":964669,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQD2R0Wwp9zB6MXqwtME8g/JN2iZyA2I7OwswlVGf0qqrwIhALbGlSoSPprDoJ2mLcwq1iwjvJ/ajuqFlM+TJa7BU+Cd"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-dbe2c78_1701013825722_0.39595888816056757"},"_hasShrinkwrap":false},"0.0.0-d7b34cc":{"name":"@cloudflare/next-on-pages","version":"0.0.0-d7b34cc","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"d7b34cc6da56dfbf80ebc62d6e1550a68259c297","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-d7b34cc","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-E25E87j3e7KLAbIUkEDWix8clE0KU/hyMajFT4phsfZ9PvgUpjPyNBCHyhrFi6UBrzDlNWDwIQZ0ictrJ3GjXg==","shasum":"0ee673e81e730a13dce6ecb009e5299dce6adda8","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-d7b34cc.tgz","fileCount":28,"unpackedSize":965441,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIHPiKvIm74Z2Mx7eqWnCOYLqL4QQDCeoikmoV9WpnWK1AiEAgcLoD/L0UAUGxvt3MtUmDBnsfktln1oQjOW19lFuCWQ="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-d7b34cc_1701014673894_0.15935640648967353"},"_hasShrinkwrap":false},"0.0.0-733fed9":{"name":"@cloudflare/next-on-pages","version":"0.0.0-733fed9","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"733fed9a9dbb0af27d6e1c2fb8d237a8669beb3c","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-733fed9","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-oRHj0rGvKlnxBw4A26cxAAbuQcA7hK0+GpV2ETUdwMZfN2OtXp08xF0Zyh3TzE+z6lBSFMSgfmzYihyOWyVYqw==","shasum":"9fe0b786b3995e8aaa533f561ca389fa5283752c","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-733fed9.tgz","fileCount":28,"unpackedSize":965441,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIFLwaXoDx8ssz8sdFCJ1ZbaZMA2nO/0PLpi+Flu9T+vlAiB/9QOMd3kYmtdrnp6F20s2ZSbdP+ys7l0DCzlnzJyVAQ=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-733fed9_1701016138721_0.842149840194504"},"_hasShrinkwrap":false},"1.8.0":{"name":"@cloudflare/next-on-pages","version":"1.8.0","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"gitHead":"733fed9a9dbb0af27d6e1c2fb8d237a8669beb3c","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@1.8.0","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-Va0YVyUmsrP45pFVsQypwkhTDyOtv/QPj1SQ/vJn3IBwosaUMW1k5Y354gT6c5CEn/9V+6DnfoXYFGvSQrV95Q==","shasum":"66dabf0a6b4cdd1396cf2d20d98c2fd789c8d0a1","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.8.0.tgz","fileCount":28,"unpackedSize":965335,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIH9Xfua48HiEFz8/3sYaZCz54dLGmxgOMI60qX3lqUM6AiBQnh6nGSV8JTrt35TtyNo4b6Ec1RDLuUL+wgZHnOSW2g=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.8.0_1701017229368_0.3698078831607672"},"_hasShrinkwrap":false},"0.0.0-b7f9225":{"name":"@cloudflare/next-on-pages","version":"0.0.0-b7f9225","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"b7f92257068c55d2ce0bea5e14e18d100cb1c804","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-b7f9225","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-49sQ7ASAQPQ0UOLD6j1y1kScghekcfP8zzCIDQgfcQ8Q42qghjea+guGr6xxprl6PkrEWpWxl22klmAbQ9uQYg==","shasum":"d6ccdf06272a6335a2dadeb779fdf36f94572d27","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-b7f9225.tgz","fileCount":28,"unpackedSize":965537,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIDAlNTnZ3HDvwr1gSvxhdRCPL2eHfkMCd1TdE8ZI6XguAiEA2OU9QoIWS+N5nTOl7EUMpcy/oNZR2GFdjZ4m++9l8Qo="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-b7f9225_1701210507677_0.5129287915305829"},"_hasShrinkwrap":false},"0.0.0-61d0a2f":{"name":"@cloudflare/next-on-pages","version":"0.0.0-61d0a2f","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"61d0a2f0441038423b824ae2f3151dcb9dad3bb0","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-61d0a2f","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-0f9o3VIu9sWMAea0dMr2RaBYOmggg0UWM06afxTGPT/F1gKd83+XlxCK5LylDYv5RU1GMBRi/uHgswT+o2V7Nw==","shasum":"1a7dea6838fa58c6f6206438c04f345edd178b31","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-61d0a2f.tgz","fileCount":28,"unpackedSize":965903,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIAURjoiiGz7PhguLdMhDexEkYuoZa6sjFz7+AqpnpH2eAiA6ohVnjOe/kwMYxVEcQZGFd+AaDzI0UAT4b4NhZ3Gc/A=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-61d0a2f_1701210626224_0.7392348103595467"},"_hasShrinkwrap":false},"0.0.0-1e73555":{"name":"@cloudflare/next-on-pages","version":"0.0.0-1e73555","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"1e73555dcb2ead5a83436ed619d5eec660b6c2f3","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-1e73555","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-uYvHMretov5seX2Zc9iXpxZAGdZ/VHurpbSP1MRcbhT+dk+DTiLy+bH4NHF336g82HcILCDTT1oR1jzuznqE3w==","shasum":"33194db3bdb4d2628d207569cd985dcdaba628bf","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-1e73555.tgz","fileCount":28,"unpackedSize":967247,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIGvHvDTlVj91XbyEX1rdwuLh5IMmh5BNPML608j1PasCAiEAyomvhufVvj8KefFGuX6KKLxyp+7dBjeEGf0FG6aBjSU="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-1e73555_1701381100601_0.568364896371292"},"_hasShrinkwrap":false},"0.0.0-bc216b4":{"name":"@cloudflare/next-on-pages","version":"0.0.0-bc216b4","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"bc216b4c26b682bb46caa2e63653c105a67e19e6","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-bc216b4","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-XkkANNByI2DjCMglMp1RJptXdSB9QOCHXF+C4MWo7JS1Qa16iSrEHEkqvoDqQ8Dga373GWcMjzvRLmIpILt7hQ==","shasum":"90d108c7d96a938a3c0a743d12663d0415caf9e7","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-bc216b4.tgz","fileCount":28,"unpackedSize":968133,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQD0Vqob4f1gmxDBzjg0yvJh2EyV1bgpPyka0rbbO0Z7WAIgCZCNSRTjdkk4kYgeisDkhAsFwHLBQ3rAGuHJvJNSYF4="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-bc216b4_1701559104730_0.5162376575892178"},"_hasShrinkwrap":false},"0.0.0-8ece962":{"name":"@cloudflare/next-on-pages","version":"0.0.0-8ece962","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"8ece96204b846967ba291ea1d67ce3d540ba5dae","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-8ece962","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-UuVG6bB8G5I8a9uZzxUFmdg/6iQmvS6z+gH5msmBs88UX2iYQrlgL9bvIpMkGBEqyooX+Vi/ZFQEpuBFoW4ZPg==","shasum":"dbd9bba557e69b987c5259e9af6bfac63cf9565a","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-8ece962.tgz","fileCount":28,"unpackedSize":968239,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDffqpIYcD6IWAyHbgxd77deSZT0+fhU3bTHoFg67tUUAIhAPhSQspVD9Xd4SlyXW0jaSyIY7h6/E6drFSG/kZJvShy"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-8ece962_1701709541697_0.2932110468344773"},"_hasShrinkwrap":false},"1.8.1":{"name":"@cloudflare/next-on-pages","version":"1.8.1","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"gitHead":"91acc215fdc24359bcf8ebefc9938c5e19610b29","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@1.8.1","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-tHkpmIpp3l5c6eELp8HVip7bqHbl7LwDSnDJTW6r9aRnGsHiLGtzafpxpnjWNDOamXcwJ/xDaJmKZ0jfhf20bg==","shasum":"f249d66143ea2ebf0a725e3b789034abb1a673f3","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.8.1.tgz","fileCount":28,"unpackedSize":968133,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCNRPzjdly0lnJCBo0m5aNpohFDYfMjo2LD2qUakI74jAIhAI2zK7Z8jwbo+QvcetbY95GY60d5JRW0f/uqjK7KiETi"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.8.1_1701710973023_0.20552213548112075"},"_hasShrinkwrap":false},"0.0.0-91acc21":{"name":"@cloudflare/next-on-pages","version":"0.0.0-91acc21","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2","zod":"^3.22.4","zodcli":"^0.0.4","miniflare":"^3.20231002.1"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"91acc215fdc24359bcf8ebefc9938c5e19610b29","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-91acc21","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-pIAcYHE5yB1zkzT9NC8Nw2lHL+y1ZCgSEx24Rh8AAE3QhXi4zA2xkjnXFHmqVH7V1Eu5r0jF8GBkLjGR9hBICg==","shasum":"55300d3137c036701ab76861342f5341a3a5e45b","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-91acc21.tgz","fileCount":28,"unpackedSize":968239,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCUawgdhW+t5aUEzv87saDN3gCrrFd6ME+fD/L5ZwSDEQIgdwgLhn3zZAyEgo1YHLbKYd3yd8wu7ZNpJXZ39bOdLj0="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-91acc21_1701710985258_0.004582521048735577"},"_hasShrinkwrap":false},"0.0.0-8fe72f1":{"name":"@cloudflare/next-on-pages","version":"0.0.0-8fe72f1","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231002.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"8fe72f1a0f808f75cb82d78fcf606923a8cda9a2","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-8fe72f1","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-+SCUshukC8aWxfddqY/d1LFejw6/5eitv2EzlLFC5u6jwVcFNoLKd8kWv9uE+V+ld4UwKhYfWvCEPYE2n396XQ==","shasum":"8e9399bab066728f7ad2517f8eb1b3e474edbd39","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-8fe72f1.tgz","fileCount":28,"unpackedSize":926984,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIAMwzDuCTC3ADUuQsEz2M7Jk3c6RGhT/apDQEGrRYTf9AiEA6zUFm6Rjs93D1nGKL3HH2J6XQxZn0a3RGFqE/AeyVn0="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-8fe72f1_1701711344504_0.25285117876655216"},"_hasShrinkwrap":false},"0.0.0-20d0e0d":{"name":"@cloudflare/next-on-pages","version":"0.0.0-20d0e0d","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231002.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"20d0e0d59f3d709c296649a6090964c26214ee40","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_id":"@cloudflare/next-on-pages@0.0.0-20d0e0d","_nodeVersion":"16.20.2","_npmVersion":"8.19.4","dist":{"integrity":"sha512-rk8oEMHuPuoH7/Vsfm/3lyve+ISHvDAIYELIzp8s5Td+V2UcYGFpNKbgcELcHj8dKThS12GTJ5t4vwVrrvWjGw==","shasum":"89269ecb5af12ada1b86a959d210cba2367b4cd5","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-20d0e0d.tgz","fileCount":28,"unpackedSize":928020,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCID33agYUg+MdTvg0zBCOoDVtzfdaTnzXn/fwnOB7x8XqAiAIMhUNlK0MCmGpXGVSps0zEAWgx1k3gldZ3o8X4RhvjA=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-20d0e0d_1701864918882_0.8105484109954073"},"_hasShrinkwrap":false},"0.0.0-252c3ac":{"name":"@cloudflare/next-on-pages","version":"0.0.0-252c3ac","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231002.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-252c3ac","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"252c3ac43fef3dba9c1a70272c85c458c11187b1","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.18.2","_npmVersion":"9.8.1","dist":{"integrity":"sha512-P6XsH+s8RqPlf6yEzwkX8Vi7WESE+jWcjF0r6zpmPP1k2f7K4rpa34mHRUJgwPUuYdzOOv96BWcN8kbYNRkjWg==","shasum":"b4f209d0422cebca8d7450791483a36fad42f086","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-252c3ac.tgz","fileCount":28,"unpackedSize":928020,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCICdC3RGQUjDjjNeDtnUdRrTPHipkhQjaO5R8LQ/tyU/KAiEA+hXjYnOmg/vHJC+5Wxwro71GI+g6ePlgtMhFBYqbnf4="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-252c3ac_1702030571631_0.5277872253254621"},"_hasShrinkwrap":false},"0.0.0-8fc1597":{"name":"@cloudflare/next-on-pages","version":"0.0.0-8fc1597","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231002.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-8fc1597","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"8fc15978438c64de44fe6a3a56f6a088d68b927d","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-0ATOiZz4MCQMLycnTjEjKOZVpwkP5YNTpB9ZJORhwrkFe92yan/tfSH8A+5hZffesPPfoe6FuUxr6wnbg214VA==","shasum":"9a973e644048aa7c3eac2652adc5b8305667d9fe","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-8fc1597.tgz","fileCount":28,"unpackedSize":928020,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCEh/owY1gI7mqV2jsAwAmDthQahZCBrsBevZMIGtJ4KAIhAK0cdtZ1/vEdIn/yD9JTjYGXxR7mFAzttG4WbhtLxPDT"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-8fc1597_1702057937586_0.8563828178521611"},"_hasShrinkwrap":false},"0.0.0-d0a2edd":{"name":"@cloudflare/next-on-pages","version":"0.0.0-d0a2edd","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231002.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-d0a2edd","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"d0a2edd826375acbcc8a9c185af0455ae9c84692","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-Ouh4mgcZEVKUdpCDBAlfMs5qBMplgwbE/Aouzf7gawrz8+mcbf0DanD40b12wAuUjz/zg69HNH6QlBCCOwmRQw==","shasum":"46311c27e4c0998a72b8e97d71d04e959fc37545","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-d0a2edd.tgz","fileCount":28,"unpackedSize":929325,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIGEedBaCYECxSEQ7ldECH3OrWzXV9h0YWtZYVOKCjh0mAiBZ6u7oO4gWrpsvnh6xw+Wc+H3gyBXCkvsNZrYCRdqMwg=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-d0a2edd_1702062739518_0.7169868772120891"},"_hasShrinkwrap":false},"1.8.2":{"name":"@cloudflare/next-on-pages","version":"1.8.2","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231002.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"_id":"@cloudflare/next-on-pages@1.8.2","gitHead":"0c2c2fa228af28217c59f10ee7ab19900a1ae474","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-TVQL+1Xdmy/7qyuWrEb12k9DxIhEqdi8k2qat0oLifERqc3s9udzaS4jHPVghQmiR5xfaZhrt3fzBnqH5437RA==","shasum":"3dd464831cf154aca8f7c118dd6191fc16840e9a","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.8.2.tgz","fileCount":28,"unpackedSize":929219,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDbscklRKBm+Tl3wShDj0JZCTRdYe5/YNBp4ZU4Nxqd7wIhAIlVdSKoiWGtyFIY11QRelrJm5PeTxk+Q6uezYbG9Jn6"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.8.2_1702063512607_0.8065118054971094"},"_hasShrinkwrap":false},"0.0.0-0c2c2fa":{"name":"@cloudflare/next-on-pages","version":"0.0.0-0c2c2fa","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231002.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-0c2c2fa","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"0c2c2fa228af28217c59f10ee7ab19900a1ae474","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-lzGnwMhKiMsn1uTE8etNQBcoStTJm83BubvREOWCStnKHTkG6LR7/jT3vdzUUtORPX16UrxHtgeIxSerOR+YiA==","shasum":"d4d232f1874fc033bee3ba51a02ef85c9b9b96c1","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-0c2c2fa.tgz","fileCount":28,"unpackedSize":929325,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIDAaPtTt4zlRaJDP6tS9jMriBPQE9ddfpWkVOqw/qDjDAiEApB5CsN2olCdjdSQgo5MKLD9bTnbf0YxGYgfvWBSo73c="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-0c2c2fa_1702063518449_0.38015717097253443"},"_hasShrinkwrap":false},"0.0.0-227f9cb":{"name":"@cloudflare/next-on-pages","version":"0.0.0-227f9cb","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231002.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-227f9cb","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"227f9cb5fd7e9aaa4fcbcc126fef040baeb3a9b3","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-iYRWqkeDjl6ljwPoW4U1u4VzqVhpYzpa/8VMSbdFROMUELpiyg7ypwf26uBMUVicXfi5pwTgTxW6enIGREVPcA==","shasum":"fc8b71c1bb97cbe2a50ab4092a6eed15e06141e2","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-227f9cb.tgz","fileCount":28,"unpackedSize":929325,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIAlE/9pyDZ+szyufnepBGM9E+5p9JsK0SkNPNKPI1RH0AiEAop/LqhreP1rqQ7deHLybI/S1RAM12iGwvdoU2yT4TRI="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-227f9cb_1702467134694_0.10147859505650025"},"_hasShrinkwrap":false},"0.0.0-72426c2":{"name":"@cloudflare/next-on-pages","version":"0.0.0-72426c2","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231002.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-72426c2","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"72426c223bd9293709f7149d8cdbb936df9754d7","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-UJRPpGa7E2EYS+WlFsuHI+Ovz359i/rgLXTZPq2qs/2duvedcca9EL7X9JK0NkQRlQmBW3MiRnFBerBDMTi/ig==","shasum":"a8e8ae6a5aacdafa2ad22954a4d4989a97d4f023","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-72426c2.tgz","fileCount":28,"unpackedSize":929325,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCbNEK68Q2/SlU5xUwtwmJScp6NWUPESuT4CfTRfXehkwIhAIk2wx0lnNociHnGquy8wsqsc4omRdUEOgChuNge2u/y"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-72426c2_1702468726182_0.6743189414985544"},"_hasShrinkwrap":false},"0.0.0-37260e2":{"name":"@cloudflare/next-on-pages","version":"0.0.0-37260e2","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231002.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-37260e2","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"37260e2e153e337daff175b6e258f9930ebefbb4","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-xVAmeK3Qreh9S6moixIbKCMVxOf+wLM9qJ5Tj5Atw4ll4WY10R7OwBqcXsNdZEb6nOO6hfaUIViyN5fP3/TUrw==","shasum":"2b8d0b61c68e2deba21a49f6e3a2ca22c3693e36","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-37260e2.tgz","fileCount":28,"unpackedSize":929150,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQChGFOrp3rBay6Ji3qMQY80kw/qtSW5jNJ7QI+ZZ4OSwwIgA3ZnUrjUoCxTTga6OUKDKr1HdUwTl96vv6ohrJ3Lgf0="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-37260e2_1702469913331_0.42737520908772497"},"_hasShrinkwrap":false},"0.0.0-a4efc7b":{"name":"@cloudflare/next-on-pages","version":"0.0.0-a4efc7b","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231002.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-a4efc7b","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"a4efc7bcaf01484b0b1c472122a3cbdeebca8156","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-I5UBDWy1vZDED/VEOcNAvoFV7AqItzZy1jqYeHgSbU5jPPTnBjC3r6R22KZSImd0UsP+wDa4QHtc3AR6hJn3xA==","shasum":"75ab1179a14548b329839a5f52d40866093ac1a3","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-a4efc7b.tgz","fileCount":28,"unpackedSize":929150,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIFP0GfgIcfYj+maCIXmKpTLCRXEO0014ilcr+5GMbEsvAiAtOThb4xLaGGZU0uPF29rzXmzDfSbGC5veeW5LRX5H0g=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-a4efc7b_1702470548692_0.08007264382855528"},"_hasShrinkwrap":false},"0.0.0-352bf4b":{"name":"@cloudflare/next-on-pages","version":"0.0.0-352bf4b","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231002.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-352bf4b","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"352bf4b7926ba6d78ae7e188a7a381dc0f79cd9a","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-/O7xvx5xN2g8wqKuK9L1rL3vRt+MbHZ+DLOz6koXFoIgHR+i9carO7ki7q/efSdTlWI0HJ5jYejNefk+2Z5pKQ==","shasum":"818bb6f415ab7ce4ae25a917e32d8e9bcc263d6d","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-352bf4b.tgz","fileCount":28,"unpackedSize":929058,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDkythAB73mpgHD8TdocBOPCjyfZwn6YgfYO0zLDIfylQIhAJ/WtnJVZmyPVKG/ezHj9KiErwbR8v7Vvs51nfuXbUXS"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-352bf4b_1702913697240_0.5602189827812651"},"_hasShrinkwrap":false},"0.0.0-eb4d28c":{"name":"@cloudflare/next-on-pages","version":"0.0.0-eb4d28c","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231002.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-eb4d28c","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"eb4d28cc9c0ac39facbe9a36b06197276fe11f27","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-+tPMzTwEF4gvPUdCr/QGF9YLF3lZy+xzjV+vFFSZFOIUAbdwqjHR6vNA9pp0NgTxCqStGcVBuD6oE0WgEtUyaQ==","shasum":"681aef533d4defa40425952da1a2f3dacfec911a","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-eb4d28c.tgz","fileCount":28,"unpackedSize":929058,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDkEyP7gvG+91pR7S5sreegmkEONCUZEjHjZmAZ63/elgIhAMMxQYxVoyXx2zMlT+m0BMGTKqHjTlS/1LxgCexV5gXU"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-eb4d28c_1703080832031_0.8551265037259608"},"_hasShrinkwrap":false},"0.0.0-ed9a4ac":{"name":"@cloudflare/next-on-pages","version":"0.0.0-ed9a4ac","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231002.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-ed9a4ac","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"ed9a4ac7e5303979ab1355b8b3c6ee7914c2f198","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-Cy01MYAGoNs+z2bYQVTHZRjK3wbMDNk4K9AYoOU6nqEH6GIHPbZnKJhl0BVUHxg09MnYwCxbapmqykk1U6a55w==","shasum":"93de5f980d0cbf4f7896245b9e1e866029ae4fac","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-ed9a4ac.tgz","fileCount":28,"unpackedSize":929058,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIAdE7Wq+cA1gjgXLbmPf3iB4ixpgjx5fyoaLWLFmUdtNAiEA1zDC8PWb262toF/ihiI9onbsOXeh92el9bgb16nGfws="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-ed9a4ac_1703193097150_0.3144993237023803"},"_hasShrinkwrap":false},"0.0.0-2b5c8f2":{"name":"@cloudflare/next-on-pages","version":"0.0.0-2b5c8f2","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231002.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-2b5c8f2","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"2b5c8f25e5471c407c1a52b0b9db99ae3e877fc5","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-CIAyEoXZLa95UDmZF6ylXJ5mByiunccTLxS/48cYmqUI6EY8eZ4n4vjGw9zpfgAw6PNP4WczZtGCNNAKsFZ2rA==","shasum":"0bcd0eafcebe61cc77489cf09de30e5954f259ed","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-2b5c8f2.tgz","fileCount":28,"unpackedSize":929311,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCxASAKAkp/wjmReQYgNEx9AHOxaodSBekx3xQh3j7udAIgG0U63x2lixU1tTDYN0+LwtHrGiAJ+ljwUmZjl16Eugs="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-2b5c8f2_1703267548768_0.29443269249300763"},"_hasShrinkwrap":false},"1.8.3":{"name":"@cloudflare/next-on-pages","version":"1.8.3","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231002.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"_id":"@cloudflare/next-on-pages@1.8.3","gitHead":"d74f15403eee8add22d0fc2d59c95ff2663cf28f","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-62TwyX/2PhE3onX+PsPT98UQKpnwIkbZqCdzTXgT3D2b9j+uxQzbxtplC74wkg6Ejt8t/PgdG82LtkzFPwGFYA==","shasum":"452c388b82b3e668dc59a8fcbd9e8e054c44c6ed","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.8.3.tgz","fileCount":28,"unpackedSize":929205,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDDbW4C95PmUjYXT9gEy17SY0B/BLxNGKVnjjN9DRNp8AIgcoK79K6lpSDXcMC4LpdebJuaFohsOkqsb7ETyTY7vxY="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.8.3_1703946672945_0.946603580052283"},"_hasShrinkwrap":false},"0.0.0-f0df948":{"name":"@cloudflare/next-on-pages","version":"0.0.0-f0df948","bin":{"next-on-pages":"bin/index.js"},"exports":{"./__experimental__next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"__experimental__next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231030.2","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-f0df948","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"f0df948a8ed3df15f20259a45b5d60ddb919dfa8","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-S4aA1AEVrrj9lZ8lu2eme8S9amrjnZJ6HmgIYaRDtD3Y1Sfydfs2nzaq2I1pUU/CFw/ZaP4HKeN4d3ER6y0M7w==","shasum":"f7062428307032f1c05314e5ba13a53e8c7b0f0f","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-f0df948.tgz","fileCount":28,"unpackedSize":929311,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIEX+v5mQeVANDhdjgsiRXnn6FVLhIPNt6cAiXKhclJW4AiEAvlQ/VJVxFAZSjv7tCTSs5HYOsr161htC7hp8WxzO03s="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-f0df948_1704186754754_0.4664744704730539"},"_hasShrinkwrap":false},"0.0.0-f07ea9b":{"name":"@cloudflare/next-on-pages","version":"0.0.0-f07ea9b","bin":{"next-on-pages":"bin/index.js"},"exports":{"./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"3.20231002.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-f07ea9b","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"f07ea9bbc5e5650c66bfeed0e8a21af26ca7d14e","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-IxiSVTj+FCArG0Z3bPSleSN1/gIRHGdgrtBjWMsmlh0KM6hYMqC0g1QtiBX0MJNBDahgwU8CbFzstS8/bXOAbw==","shasum":"70f242eaae110dd4f5cae17e3882b46519ed64b8","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-f07ea9b.tgz","fileCount":28,"unpackedSize":930467,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCHx6E+5YJwGpRFgXmogUd+fdiAidrCE8Ym4sdQw7xJCECIQC+wcGT6SI+a0RaL4ROUDG7r5AuTtaOQ16ZWktJeZfKFw=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-f07ea9b_1704743296597_0.15666521686525092"},"_hasShrinkwrap":false},"0.0.0-30cf4fa":{"name":"@cloudflare/next-on-pages","version":"0.0.0-30cf4fa","bin":{"next-on-pages":"bin/index.js"},"exports":{"./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"3.20231002.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-30cf4fa","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"30cf4fad8bfa1eeff1d490a4070d243dbe300628","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-Lln3ACfCavzRhB+6rzxPWXadEINGi+9ayxxQ0budTLRfxt9NCyNJNRNq9XbtVuLhopxwKsfZlqaKKgfbsRnyOw==","shasum":"3edeea43fe1e8fb7e45ea7a86356959bc4d3feda","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-30cf4fa.tgz","fileCount":28,"unpackedSize":930467,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIGTBsoB4enAGnhunqqfUqhbd6ascGcZYEf+G/JxElSCgAiAMeaUxBW8Fm6U2UuUYbmqZrF77o3TTutZo2q1L01vqAA=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-30cf4fa_1704744995224_0.7503292695384145"},"_hasShrinkwrap":false},"0.0.0-2499cd7":{"name":"@cloudflare/next-on-pages","version":"0.0.0-2499cd7","bin":{"next-on-pages":"bin/index.js"},"exports":{"./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"3.20231002.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-2499cd7","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"2499cd76728e2108abd82d278463a130375d2edb","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-fa4tmp+EJj5URQAub693VjuUv0gwhhNB3qGHRB5JS+FS6Q1RvYa1QGfjZ08QF4wjOus09ZzRDGGZ848cXom/gg==","shasum":"fb11c262cb764e470b1f0e9f9f20f023f0c49656","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-2499cd7.tgz","fileCount":28,"unpackedSize":930467,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDa+0pVyh8ttj9yrq/Jp/mzC8gIj3nYZnhtfoH88yB2AwIgVcKvoiAXQpcm5LOv29GnWMS0QUlRG1M1PqHwdLMG38E="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-2499cd7_1704745774292_0.8196939798800937"},"_hasShrinkwrap":false},"1.8.4":{"name":"@cloudflare/next-on-pages","version":"1.8.4","bin":{"next-on-pages":"bin/index.js"},"exports":{"./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"3.20231002.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"_id":"@cloudflare/next-on-pages@1.8.4","gitHead":"2499cd76728e2108abd82d278463a130375d2edb","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-RTSEtdZSx7bxQRuFc4rMJwqijzqVIcgajLae8LBb9+6ZS40jNo1sIkG/yQOT1AyV3lcpk5QKYILgihks0UZbKQ==","shasum":"ed2a245baffa3cb36ee872a7ea67c46c6033c7f7","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.8.4.tgz","fileCount":28,"unpackedSize":930361,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIDrGYfauOV2Vb4ghHROepPMUlraBrJr/OqzcPqYmjGuzAiA7/9uNJeagmgGBXbsrCa92yH4uT3s0wQIyQFEUDZtcQg=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.8.4_1704745949519_0.758040398196657"},"_hasShrinkwrap":false},"0.0.0-ea73acc":{"name":"@cloudflare/next-on-pages","version":"0.0.0-ea73acc","bin":{"next-on-pages":"bin/index.js"},"exports":{"./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"3.20231002.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-ea73acc","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"ea73accb5a63cdb3d0560b9766d6c6c7d2dfe5ec","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-Q5KGa9DM5WyLtNP8BIkqcfU+glL+cQJee+I2J7lYgOzT2HJh5U5CFnjCJGFHB7UHWdt5wkkvA+mO0pNMFEgoeg==","shasum":"53c74fc65daee22ab804a7326179e09e45907c00","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-ea73acc.tgz","fileCount":28,"unpackedSize":930470,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIG0ErVh3/3r0IgRMCwym8iSCUrRDRu20bQiIzwtIozacAiBWhTvLE+hQS9z7A4+ubdOEGhEjcDBj5uXtPakQacuinQ=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-ea73acc_1704748176299_0.3142979152497729"},"_hasShrinkwrap":false},"1.8.5":{"name":"@cloudflare/next-on-pages","version":"1.8.5","bin":{"next-on-pages":"bin/index.js"},"exports":{"./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"3.20231002.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"_id":"@cloudflare/next-on-pages@1.8.5","gitHead":"1e516e3782e71d8708fd656122903b8e02010e01","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-mY7ovjE6NM9ZPhWH3HZMW7lT9f3242KpHjz94NYaQ3Seu7BzXoHd23QVotxEpWZ1AtGeymrQ3Bmzy32cRToBSw==","shasum":"00edfb22b327eb179a0a3e4bd6955fbfddc66a0f","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.8.5.tgz","fileCount":28,"unpackedSize":930364,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIGcu5VTGb+pCDAByiBas8X9zCsU1w3OOJHVEkhkoAKIDAiEA4ZAYUMtvuohsRVlhgk3eBnIrZIl6FVwOEXLLd1RAwWo="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.8.5_1704748354734_0.25938850041754136"},"_hasShrinkwrap":false},"0.0.0-1e516e3":{"name":"@cloudflare/next-on-pages","version":"0.0.0-1e516e3","bin":{"next-on-pages":"bin/index.js"},"exports":{"./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"3.20231002.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-1e516e3","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"1e516e3782e71d8708fd656122903b8e02010e01","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-2PkrMrc7w9taJvvI0XfqbaIFpNrmLHk1B/DF/6VZFVfQzmq2qh11n7Kd4ad05GXO4scHW2Sady0DmpZ+PgfRMw==","shasum":"6131fcc49618c7718c5bb97583d90f8747703342","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-1e516e3.tgz","fileCount":28,"unpackedSize":930470,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCID3DjMuW7Uvo3xmINArbb7YESQh5sRfO8XykMJExY2vjAiEAsZgjt/RZH0eGwu8mf+S7LMCKLwIC4pEQzEXVloTd8uQ="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-1e516e3_1704748359726_0.3161751279399818"},"_hasShrinkwrap":false},"0.0.0-8e93067":{"name":"@cloudflare/next-on-pages","version":"0.0.0-8e93067","bin":{"next-on-pages":"bin/index.js"},"exports":{"./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"3.20231002.0","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-8e93067","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"8e93067e96feed34dd5ce0d0f4eb17e5e1d8f094","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-3Ab7OWPwZCtzF0PpBKMQh6gqt/BFZYNYtltQulI+fSh4kEP4SbgW9nV87UrGp3LwhqK2SMkOE7B3B3FmkUsTGg==","shasum":"d740618b8c9b1c6aa2a26b6514be3d41dad32470","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-8e93067.tgz","fileCount":28,"unpackedSize":930470,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQD267CrXQ1sihpxE71Y27OO4seCD6h1FcWJd8dpMjg7eAIhAIzl824KcRDRa+u23+AARF/WvjObvIbj/sC8Wsre8p9M"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-8e93067_1704925225109_0.3435678924422505"},"_hasShrinkwrap":false},"0.0.0-bb18e8a":{"name":"@cloudflare/next-on-pages","version":"0.0.0-bb18e8a","bin":{"next-on-pages":"bin/index.js"},"exports":{"./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-bb18e8a","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"bb18e8a3ae5a75c6b9980ccf509ec82c456cc021","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-ru6lO4M+ubrk1x6J2bnVhewq+ZiUWgKMGha+CSYdFJaew5cgL/+/bLqTzBgMprL5xptlS+jbH5mkx5lAgUQz0A==","shasum":"8eabea325aa0972357a338410ef2aa0886dfe9ec","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-bb18e8a.tgz","fileCount":28,"unpackedSize":930649,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDzZ0mA5w7AZHAY9fwxu2YIKDGhIj/pFfAh5EJ1KH0uCwIhAPHlXQ+G9qtUqed1uL/hZ6s1+Og3ftFvlsf203xaGCA4"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-bb18e8a_1705320240785_0.9101005721497593"},"_hasShrinkwrap":false},"0.0.0-34af449":{"name":"@cloudflare/next-on-pages","version":"0.0.0-34af449","bin":{"next-on-pages":"bin/index.js"},"exports":{"./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-34af449","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"34af4498c24d2c914443e1159f0164a796e13d03","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-v46ShP9Yun7/6hGjv2XlFc0agY4weRB3RYVYP7F7Z+P6z6VmFhVgqPmQaTTxu7VKR3mgeZUO6sb5bMgQpUjT6w==","shasum":"f4a4e1b4381e3f67034ed00579847a5493170fba","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-34af449.tgz","fileCount":28,"unpackedSize":930649,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDZItYtAbcL5hZZDOyHZDj1NeXVS62wKYltLP8YWDgAZQIhAJJkVc/BZTqe8gOk2V7W/9HzIVMzE9Zr43eRDNXj/KY/"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-34af449_1705325950311_0.9109659701918658"},"_hasShrinkwrap":false},"0.0.0-05b6256":{"name":"@cloudflare/next-on-pages","version":"0.0.0-05b6256","bin":{"next-on-pages":"bin/index.js"},"exports":{"./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-05b6256","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"05b62563505eb74a93469200315ac22b409b2e82","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-VSLJ4A3v+uIZNtkzqP9GoqPm//lEhbJUH/zvc/3SYknwvXfQnwcae2hSfc39pNhRYcD1vp2ch91LvZvKNM/MZA==","shasum":"bad52edf6f63dfe9fc1e4dc3b11c1920d14b5886","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-05b6256.tgz","fileCount":28,"unpackedSize":930633,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCICXiYUPFI1HyDjhyqzOPVyNnV1qrPezLfGi8cm3KBT+UAiEAwDyx+J7cZQTZsWz3HBlgFFV+TzldnIfFHc+Plzd8Gc4="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-05b6256_1705341017650_0.48423120844891354"},"_hasShrinkwrap":false},"0.0.0-cc420a3":{"name":"@cloudflare/next-on-pages","version":"0.0.0-cc420a3","bin":{"next-on-pages":"bin/index.js"},"exports":{"./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-cc420a3","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"cc420a3723bdd0d386e2924d223cea29e55e7d2c","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-fc1l0waNf82ULS/h3r4P7NHgY3OYrqO5kzOg8CdbiYxAStZeGCKUOnwRcctA7eXqxKkTD6LleUAKPo9hOTnm8w==","shasum":"644ec518e6b947727bb1974ab2263d5fbaeb056f","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-cc420a3.tgz","fileCount":28,"unpackedSize":930633,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCtAQh3xzFb1DZdURbPzm6gprDSmICf4JsYpmbIK4CReAIgF53V4jz2FNQmGJkdUGn4DhHRKEXs8by+rXEjfDVHXGk="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-cc420a3_1705404524620_0.8883707157801388"},"_hasShrinkwrap":false},"0.0.0-3dd1f20":{"name":"@cloudflare/next-on-pages","version":"0.0.0-3dd1f20","bin":{"next-on-pages":"bin/index.js"},"exports":{"./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-3dd1f20","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"3dd1f20db849cc69f6add0a86ecd4afc33833691","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-/d/FLiH/nBquAIDat97D+zJD+hHTakSVoZRLmT38b99gUf4llJ2CBO7ZZRqvH/IXXtaDgsHLRBqkY/dcADZ8Hg==","shasum":"e07459a253a681923ad655c03d0b19d99168f701","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-3dd1f20.tgz","fileCount":28,"unpackedSize":930643,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIAu7ZNA4KjlBLl9Bxtfs0Ws57PcvDE+hhMuoPdOUXzJHAiEAnDiOxz9Pj0+H1+fjl2aDy2FDj2AYI0q/mXxD+c2cOls="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-3dd1f20_1705596227884_0.8703735708196492"},"_hasShrinkwrap":false},"0.0.0-519c6cc":{"name":"@cloudflare/next-on-pages","version":"0.0.0-519c6cc","bin":{"next-on-pages":"bin/index.js"},"exports":{"./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-519c6cc","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"519c6cc05c1dfb1491c558ebe8e473a1bb55bfba","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"18.19.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-JJcaYB91p11JOEJ94itpQBqCQYIgFBTCDhqYBDL0hXLVeFy0fX9SwwxG2Fd9/vre94xzt/1XxuNongtNKy9i3Q==","shasum":"79ff950c80c8bf04f0bf2ebb36a6497a79571d61","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-519c6cc.tgz","fileCount":28,"unpackedSize":931767,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDE8o4K8ypYTEpTlZA7m0jT6qz7Uq68gZwUZP7sEQt5PQIgJUFgdL1ULafb5fM6Qk7QRNI/vhL7O3lKSTsJ+SDJfJ0="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-519c6cc_1705614374896_0.920264185183223"},"_hasShrinkwrap":false},"0.0.0-0a91001":{"name":"@cloudflare/next-on-pages","version":"0.0.0-0a91001","bin":{"next-on-pages":"bin/index.js"},"exports":{"./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-0a91001","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Pages_ > _Create a project_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"0a91001b4f2b8a89357060e0eeee0dc84a382a2a","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-5QkGZ9c8s6tNV4LmAvvWH3BSiNATJpMJox6mPxOGEyirS6DqLqm39Nmg1/v1ZTP4WYwGAsZxUIAurDyqIljX6Q==","shasum":"92088841671876caa53339f41059b9ff8147474a","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-0a91001.tgz","fileCount":28,"unpackedSize":931767,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDLRUOB+HKeHMZXPSP3ja1LAWNatTFa+RJ5Q5Z1R1XdMAIhAJKEsQ0FqtB0qtJROc+j4w7v5GcTXUNUZUzz+wqm/Onk"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-0a91001_1705932912405_0.6116492179671151"},"_hasShrinkwrap":false},"0.0.0-1350eea":{"name":"@cloudflare/next-on-pages","version":"0.0.0-1350eea","bin":{"next-on-pages":"bin/index.js"},"exports":{"./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-1350eea","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"1350eea5cd946a5b4dcae34f6759d5a1a45196cb","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.11.0","_npmVersion":"10.2.4","dist":{"integrity":"sha512-lg9SnNF+tHOKWvvBddNSb4WMn0mDCtbovv5BmaBJh0mqQ3Z9GUgbUVBOmhAg3w+xqdJ0e1M5vtdRPKmRGm+PVw==","shasum":"0ab8c35b08cb575f24311badb481e9fd66a23105","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-1350eea.tgz","fileCount":28,"unpackedSize":931789,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCf3guZPfgZ1eiuzMvflejsSi9vY4mZOHN+wd2hPUHD6QIhAMk4Co/9EDcJF5eNAQMQUDJl1SdmwxapnpqUcNn+7gdr"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-1350eea_1706569845927_0.9595780311827302"},"_hasShrinkwrap":false},"0.0.0-0b1af18":{"name":"@cloudflare/next-on-pages","version":"0.0.0-0b1af18","bin":{"next-on-pages":"bin/index.js"},"exports":{"./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-0b1af18","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"0b1af18f685ca6ff58853e3fee46b0b490dde9d8","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.11.0","_npmVersion":"10.2.4","dist":{"integrity":"sha512-yYLRpvrkGXJEw8XAl3D5F8ek4Uk8lQbEb207o7PS97atV8Zpc7Wo5ARPiN9oFrgZYyx5glAlx5crniBDzg2zVg==","shasum":"1aac60a41801d6619db0ac72e8e1c8934a869e1b","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-0b1af18.tgz","fileCount":28,"unpackedSize":932042,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIFjNftYA6U9Sprw36z5E12MHt4APxwigcdXYS2/Jt1wpAiBS/+kW2G8uz5NZLAtWMoyWBDy3UlFk2OKbibQ6xwhuaw=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-0b1af18_1706633161541_0.5831888093178912"},"_hasShrinkwrap":false},"1.8.6":{"name":"@cloudflare/next-on-pages","version":"1.8.6","bin":{"next-on-pages":"bin/index.js"},"exports":{"./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"_id":"@cloudflare/next-on-pages@1.8.6","gitHead":"52499eb8df160554f50694f6095f3797c1b7d119","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.11.0","_npmVersion":"10.2.4","dist":{"integrity":"sha512-7slZwLTdhBz/HOFMfNft8MtrxPy12iGK1+hS/c+6HUhxUE36f1sOnXwuLMsATYzV4g1kscrN7jAllUnhpYczOg==","shasum":"474a02797a851ad2ebfd8d00333c696612e8c48e","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.8.6.tgz","fileCount":28,"unpackedSize":931936,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCETYigA0rqFwX2Jr4axoiBeDz29b384+JR25TQxEIytQIhAORxefAwK1v3pBve+n6Sr9wLKGtjZ3Id+7ayk2sbQpdV"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.8.6_1706695932392_0.731355406661564"},"_hasShrinkwrap":false},"0.0.0-f58ace8":{"name":"@cloudflare/next-on-pages","version":"0.0.0-f58ace8","bin":{"next-on-pages":"bin/index.js"},"exports":{"./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-f58ace8","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"f58ace86b8dfcf0beb20908cbb3f2b6341a5fab2","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-te/ra6K/8gF7GQDGe5vaafO8PAMVR0KjGrZfbS/DgwdzJqznLuIny2UJSsmXg6jJEFGZJMHSmizd4l6tsju9ZA==","shasum":"c8b82ae5babbac3c463cb17db62a09acbe77853b","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-f58ace8.tgz","fileCount":28,"unpackedSize":932043,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCID5lhYcH5Ri5M2jzH2SXVpHQD3dBhTkVPu21+R3duviTAiEA+6KmgFyLdE/3q7WFdKhEdE1VxdfpokyiSkkCoGto/ZE="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-f58ace8_1706798819017_0.7862059327820692"},"_hasShrinkwrap":false},"0.0.0-9f31f4f":{"name":"@cloudflare/next-on-pages","version":"0.0.0-9f31f4f","bin":{"next-on-pages":"bin/index.js"},"exports":{"./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.0.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-9f31f4f","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"9f31f4f0acfb03f9f01724f26c9a5375c174c9bd","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-ZMICDaf7vhhpn6qeZXe8vWAmwMxGvwKzcdrryfyJ9PUWVerPRwoL/+q6QFmexjjtdV07ZKOgJof7+DVK86EZ0Q==","shasum":"68c84c39ef3ca9fed90053c5236d2296eee7b607","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-9f31f4f.tgz","fileCount":28,"unpackedSize":932043,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQC3Ohu9AW2TXyALdMjEDUkQPGqStr0MUs4HfG3P+1GqcgIgFvy12lzzQ23nC0L/Mtf+QsHa7o7+kH7J8Szf3qcrr2Q="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-9f31f4f_1706833090125_0.37455169783016373"},"_hasShrinkwrap":false},"0.0.0-06de52e":{"name":"@cloudflare/next-on-pages","version":"0.0.0-06de52e","bin":{"next-on-pages":"bin/index.js"},"exports":{"./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build":"esbuild --bundle --platform=node ./src/index.ts --external:esbuild --external:chokidar --outfile=./dist/index.js","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.26.0"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-06de52e","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\nIf your application uses Cloudflare bindings to make them available in the standard dev server use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **Warning**\n> Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages [--watch]\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then use with Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"06de52ec55b582403c85fe695866faac98468e04","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-dj9JDVDogDa/9Qjgfb6vtVIGqzyJAw45RPWxL0zFUcCMC5vGY2yaJrJW+QUDWtbgwLxVqBjczGldtJKaDjrm+Q==","shasum":"afcc2a1f69c75e4c2ecebbd6fb9f551eab70014e","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-06de52e.tgz","fileCount":26,"unpackedSize":698432,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQD3F4yNen/FsN0Xjy0MQbJhhmjsd14x46XpGhD4jaU3qQIhAMhxwoAVfz7LYAM5dmGTE/hoZbdkEetzb+R9kS7XsjdR"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-06de52e_1707258581056_0.9341215468250377"},"_hasShrinkwrap":false},"0.0.0-5712c57":{"name":"@cloudflare/next-on-pages","version":"0.0.0-5712c57","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.0","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-5712c57","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"5712c57ea786f8716df002f401ecf6f800ce8b15","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-8HN01tvX9LuRAMBs26lCgo9h3HXdNaiJEyknM1JL0zje+gmdgqk1ZPgewXvX0DxMreVJBGmk/IXGHCwNqPFRUA==","shasum":"27235677691d43e787e732d356dba31bb220d42a","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-5712c57.tgz","fileCount":31,"unpackedSize":704359,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCICxyBoGi83O2C/jOsInbQtQZjUQhk0HK0n3zdR98QLxqAiANNvmebha/i+ydIeBvAX7qUJtx/T74OjVHGCQ7LWz0tQ=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-5712c57_1707747217059_0.513360683163768"},"_hasShrinkwrap":false},"0.0.0-84e661d":{"name":"@cloudflare/next-on-pages","version":"0.0.0-84e661d","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.0","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-84e661d","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"84e661d8f55812a42d53708bc053c52a1e645dd2","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-E4dckvOG3tjcI2mCVW6zxzs8X8EIM03wLDcY+yc5Wn08GIodac6RLlCdSb9Tgq2AoiTY4ODUUWVfPF5P3ZdZkQ==","shasum":"38d4ca1730ba1de99a9432d7ec227a575a21ba3a","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-84e661d.tgz","fileCount":31,"unpackedSize":705262,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDT199JlHtd7aU2HXWMuAxQ8fvMyzt4w9CUkJDz5cs7FAIgWW9ZyudYvizNQE/nI51w4s1F1+Rh7QtBcQxO4Rb4jzs="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-84e661d_1707841880711_0.019759558879827166"},"_hasShrinkwrap":false},"1.9.0":{"name":"@cloudflare/next-on-pages","version":"1.9.0","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.0","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"_id":"@cloudflare/next-on-pages@1.9.0","gitHead":"687a39c58024d9b23b035570de06dabcba20e4fb","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-fa46YoaKLRS0xIWlprrQD66bLMOUvvvfqQNkUZTeAk87QBRzgkm14RqrnO2ro2uHYNqW5qf9lhKbq2IUGQWJRQ==","shasum":"7bda477a242785e15a05ede665b38decdc929db6","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.9.0.tgz","fileCount":31,"unpackedSize":705156,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQDFGyPtPi0x3dDpLokCU0dVlYjdbR7qcg0FTOqY+Mq2IgIgCFUr/lYbsTysMLMzuNO2f4ZreQ3AxPgElB9XvxJy3+M="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.9.0_1707848015971_0.8370230745526519"},"_hasShrinkwrap":false},"0.0.0-687a39c":{"name":"@cloudflare/next-on-pages","version":"0.0.0-687a39c","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.0","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-687a39c","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"687a39c58024d9b23b035570de06dabcba20e4fb","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-kA7cCliNuDFRPrZvAnjoeDM63OGPdwty4Y9WeHblhjBo0TvFWELnv8u3/iW3HcfzKnRsLxAwjFY6NlhFn6jiGg==","shasum":"e8c6f338665beed4509e65535b9f5ebe3a73ee75","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-687a39c.tgz","fileCount":31,"unpackedSize":705262,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIB6ZYxQdzEIgOZxA+m/EgfT97x1bkDA/uVTA+niJAYPDAiEAsKfbeWOM847JUieS5XP9GkK3gO/8RWQcbgYHSzk3/gc="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-687a39c_1707848027853_0.16482533893771856"},"_hasShrinkwrap":false},"0.0.0-3846730":{"name":"@cloudflare/next-on-pages","version":"0.0.0-3846730","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-3846730","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"3846730c4a0d12cda128d691160968d0a131a6f1","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-x9llKRY48qvKLCpDpA5MiGI0w3zPd+ZQS2VAuhvK+ADCglCFdG34o29egN8bDPHsXd9Q9+uPAoxbt2uw2Y0BmQ==","shasum":"c906acca208f094170470d14955b2e1a5db71b2f","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-3846730.tgz","fileCount":31,"unpackedSize":705237,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCICJzRaBv8puzfpSHgUFiAy5sROAVWdoqembBie/eEMcRAiEAu01K85BvXLTc9lNKV75ZjtlBbzBvTcUf0Lv//qfhm9E="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-3846730_1707948148568_0.17872417288758968"},"_hasShrinkwrap":false},"0.0.0-1cdde11":{"name":"@cloudflare/next-on-pages","version":"0.0.0-1cdde11","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-1cdde11","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"1cdde1147c551a2f0f7c0724693eb5f6c4626207","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-gqU4xcH+zIZ+5MXV12KJnQ5+4fK9wj9zevFmdNyc/oTwUmfWcAmq5mYqmiW6Vb8fV2afcTCxYKLJ5x/oibiNVg==","shasum":"f6ff67750847a9c1485b0bc339fa1bb5256db39b","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-1cdde11.tgz","fileCount":31,"unpackedSize":705237,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIDtRZqwxt7rdclW12kYe/1AVH51j5AHavlz+ephjqBwBAiEA6MCPzuaMhAWQAri4NX5lvYHjBxVxC8kZSRgACpyoc0s="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-1cdde11_1708421108060_0.9880509479993989"},"_hasShrinkwrap":false},"0.0.0-90e140c":{"name":"@cloudflare/next-on-pages","version":"0.0.0-90e140c","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-90e140c","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"90e140c592e33c0c3fed3390dd0e31b0fe17fde6","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-y8lnUzMb9thVUxVDxxztpVFmaaKMPFjzdqUCVGQeV4YQ6Fda+pfsxy+DJ2yxOoanQ4SHUafdwlPDOGOVaEnjFQ==","shasum":"df34f694e99f0aef6b5eefdf561fe8c2376d2878","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-90e140c.tgz","fileCount":31,"unpackedSize":707429,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCICMJc7oI95fDfliImrpzCABGPH0oPz1TaG6FqSysVA/OAiEA8XVvmkw+ps100467UBWaqGb04TDBsUpr9rlinlLK/h4="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-90e140c_1708421240982_0.4587479022436196"},"_hasShrinkwrap":false},"0.0.0-be1ab75":{"name":"@cloudflare/next-on-pages","version":"0.0.0-be1ab75","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-be1ab75","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"be1ab75a0a5214e047c5a0cbb09d657b99e46bfc","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-gaowRn4DiU1tf1A9E89IawrRjgGv9RFB/NHb57zIKYhT8gmTSvnJuoXr9xZN77mtkL2gORFFzF13u3iItdANuQ==","shasum":"c9e3d0985d1a6a9df83fdbb4b9a21f1589966026","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-be1ab75.tgz","fileCount":31,"unpackedSize":707429,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCZdz2XWsD8yrBaD6JLUKp85YILaPJzb3YOB87OSWKNVQIhAJF7I2aBZH0IUViKAZwi1WkgeXCUv+M5DxQMz+WCLpBL"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-be1ab75_1708431214681_0.40756285323494823"},"_hasShrinkwrap":false},"0.0.0-94543f0":{"name":"@cloudflare/next-on-pages","version":"0.0.0-94543f0","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-94543f0","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"94543f0f1cb27c1e17c3bf4d88ba7ac348b2ab33","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-OTW+eTm9e9FHBfuH3cKgEsfeu7QaN7cQ3TC2Zv/w7x0IeCjVU7Pz9H0KVUpfj9snYm7njoYdzB5L1DfgexcaKw==","shasum":"45ab479da868d8c4fff716f812e65bc494044c4f","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-94543f0.tgz","fileCount":31,"unpackedSize":707429,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDKY8EwP2/LaJXn63Qu3tgh9BNLqZS4p4sqZTqP9k01MgIhAPXJVMCdn3MQOSbE083whjX9V99+phG/2v4EJDWihyX2"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-94543f0_1709126119701_0.9594531679225682"},"_hasShrinkwrap":false},"0.0.0-739e2a7":{"name":"@cloudflare/next-on-pages","version":"0.0.0-739e2a7","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-739e2a7","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"739e2a736d6fad5b5c297d20c3ee75525a5bc8f4","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-wf4acWfWwcKih5AMkY9eVHp8zbAivB6f/H27FajrRaT1JhODxS6vMCKOCYv2JLSIodje1yo3xtORbrhGihwdfw==","shasum":"e2776162e87a6fb857c4835bf134758b00a5190d","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-739e2a7.tgz","fileCount":31,"unpackedSize":707347,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCA/ZjoE5Vv39a8GYj926updOvbHSU+XPMBkOPartQFwQIgUvlYw4q58t8x3BB/oiYTdw+cf+rxQ2C5dMGkay6rxXw="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-739e2a7_1709132521073_0.9986200117403992"},"_hasShrinkwrap":false},"0.0.0-5187973":{"name":"@cloudflare/next-on-pages","version":"0.0.0-5187973","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-5187973","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"51879733975fcf610d881937ca0a244924a30044","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-O98WjXGGzzMIx3qnDh5CfCn3n16arDs2/UCIX/lVOXH+sC5xhrFe+OR9V3t8HcxzWjX6Rpx4TqjaWoPB4z5C5g==","shasum":"c3318d0ad0b3d99f8da912be2520c495f056f01f","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-5187973.tgz","fileCount":31,"unpackedSize":707853,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQC1323u35xTjgoyC0f7mEglCaRPHyn2UWTf/Es7cejAgAIhALCArWmtvGm1V1PklM7D8MHS1wvP+0o/V+X+/dX+/GHF"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-5187973_1709248296151_0.6981112367464788"},"_hasShrinkwrap":false},"0.0.0-9b1d951":{"name":"@cloudflare/next-on-pages","version":"0.0.0-9b1d951","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-9b1d951","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"9b1d95154aeb63f73bcc5af643dead54e97d964b","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-GPx4IUaH43N5GO53HjbaYCiAi27qnfy7XwrkZPnSTk8Oubk4WklrYSkXxeR3C5Sn0Sf9gc2b5qusHeZtvpxvEw==","shasum":"74a391a5a937ff36dd131cdbc7733443e58ad3ff","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-9b1d951.tgz","fileCount":31,"unpackedSize":708212,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIC7NKH44A/+IkKVFl2ax5WA1hp9j6r+kAJDmQU7xMQr4AiEA1UoRsFIJsCIUXY0d9vkwoWGkOgRUxz/pcF1L0bZC8+I="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-9b1d951_1709488227807_0.26335721300413595"},"_hasShrinkwrap":false},"0.0.0-b46977c":{"name":"@cloudflare/next-on-pages","version":"0.0.0-b46977c","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-b46977c","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"b46977cec2ed5b39f8a3119546e7ba550e059ccf","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-fft1gUImOKudejxTacjwLB5tn7avZvtscvC0Pnm8TfwsBeCdYFc8+EBjFjJVc52bPd3RoGL+JAdMaPd69gMBSw==","shasum":"aa69786928414e03276a4afc25ab4a8fbe90c286","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-b46977c.tgz","fileCount":31,"unpackedSize":708338,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIDx9m+gOeokrA2UJAWwyjuJQvRqwjU/0ILgl8FJvYrv7AiEAg86dk/fMGPchp2etpyjHFX2we87j1wvYVo9jqc9/v9Y="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-b46977c_1709508968902_0.18709933601876738"},"_hasShrinkwrap":false},"1.10.0":{"name":"@cloudflare/next-on-pages","version":"1.10.0","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"_id":"@cloudflare/next-on-pages@1.10.0","gitHead":"46e53ec54e83d5efcc25c5b0e96e0d3e2a9ec5c2","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-N0aGSRxinxQFbsQWGV7d/uhRclYup2itv34x9hkfwGeFLbQxZVSSkZHIYuk8R+1mmxfAWm3rRFKo6bT7PaMAVA==","shasum":"1dd487518e5327609d73e051834b2a4843cc9a9b","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.10.0.tgz","fileCount":31,"unpackedSize":708234,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIAISTWGd8tP1Rx7NAAtbBwhZRhWigYOlkcH15fv9dId0AiBY16Ygohfyw8yS5J/2cmfjy5uDXCZObamF/NVjc2Go0w=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.10.0_1709555412741_0.8939509158895926"},"_hasShrinkwrap":false},"0.0.0-46e53ec":{"name":"@cloudflare/next-on-pages","version":"0.0.0-46e53ec","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-46e53ec","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"46e53ec54e83d5efcc25c5b0e96e0d3e2a9ec5c2","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-8fqHNbvXQziWpqBWvi8ZHBTMZ6FSbDK6nsxSvKEG2uc5jQ9JpEHkmufKvVqvnNdnMVUF4A4lKAeB03L0mP0X/g==","shasum":"5bf6c7a197c208953718b1d3eff9672a2c99b438","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-46e53ec.tgz","fileCount":31,"unpackedSize":708338,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIDLQE/7vpKVMltAtiXNodq/BV2YKf1kGcRzQR4/a0uVdAiA9/curyTHALvsQjETExVpKpDM5X/LwTH4b32jC31KUYA=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-46e53ec_1709555418473_0.6592379380896374"},"_hasShrinkwrap":false},"0.0.0-555b4a7":{"name":"@cloudflare/next-on-pages","version":"0.0.0-555b4a7","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-555b4a7","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"555b4a7c75abc1421fa9e146498110480aadc4c9","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-Mb+qVmtbgI0YJBIXbE/HtFVlIoIOVNs92JDLR7GwInc0/xw3XmNqwAVCu2hcY4pYCbIrmnrn/Sip3UJKIamk2A==","shasum":"01f9daa3f32d2b2a63c760d093624f0b25963bae","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-555b4a7.tgz","fileCount":31,"unpackedSize":708404,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDfo/fcoVKM3Xe9F+L9WE3Np5kI8dDH+TfBHBC18V9vnQIhAIIToTx9/JWTfmWACnfvkM5c9SoucjLoY4nY5LFCVJTx"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-555b4a7_1709765569691_0.21409646663089088"},"_hasShrinkwrap":false},"0.0.0-9900517":{"name":"@cloudflare/next-on-pages","version":"0.0.0-9900517","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-9900517","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"9900517223d34612d503b0489d3383c3b4453cd2","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-tbq3Cak0eTVMt7A5+iBvK1bWOJI5dLH2CjPZz9L9s+L1z8xIsR7l8o9mdlXVdK5xNjSk5JMWm6h019SUlMsKzw==","shasum":"f544ece387caaf8c5ecbcabd7840d10e18fdfd89","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-9900517.tgz","fileCount":31,"unpackedSize":708880,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCID6+vCxJu2FqJTLIcxhDbF9IyLNa83ZNkj5j5L9hKJRZAiEA8UGGKtqnnVXJv7fXmytKV8nxuaK213d3f9HJ6TMoS+w="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-9900517_1709771538250_0.10182954397681043"},"_hasShrinkwrap":false},"0.0.0-60eb0ae":{"name":"@cloudflare/next-on-pages","version":"0.0.0-60eb0ae","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-60eb0ae","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"60eb0aef9d7b0835204e62c167f9f0cbd5c23404","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-SPe/qdGLR6tk/TMI9j+hvsR+QWnTP9ZXm7KSFV8o4VSsewQ7ncC1JOwibRf0HrWPgu659Ffn+F8iiQMH0cY5cg==","shasum":"4142369cdacad05f63b16fdd7e8a079b80e050c9","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-60eb0ae.tgz","fileCount":31,"unpackedSize":709064,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIHYdpTIQcFoRf1MDZRBU8qNSaFo2KNu6tXhrl0OLLyUFAiAo++idOVeXCSSUG7T5rhEjtiisXfAFJwyXEgMDKQAPeA=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-60eb0ae_1710330997286_0.0010595918273084148"},"_hasShrinkwrap":false},"0.0.0-f71ec2e":{"name":"@cloudflare/next-on-pages","version":"0.0.0-f71ec2e","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-f71ec2e","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"f71ec2ebfd4c433079d0fc22bc6f1cf30bffe2ef","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-scptGcoKqFJDYmjqp/Q7Nw0B8endzfKg6zMAgB/AAn804fbN5hJt4Pz4DoFD+1MyRo9DRtSGV494doVF6hJX0g==","shasum":"3f90aaf7a8b421ef9f949bf4095f68284636ba61","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-f71ec2e.tgz","fileCount":31,"unpackedSize":709178,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDsgKatnKT183K+ghhdsihUV0CF4anbLYw6WDWGU57YeAIhAI2UCOjItQ/0huN6Nucpi7+k9IIxp7iaxLHJX30eKVC3"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-f71ec2e_1710853218985_0.35434624852802465"},"_hasShrinkwrap":false},"0.0.0-702f601":{"name":"@cloudflare/next-on-pages","version":"0.0.0-702f601","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-702f601","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"702f601d0a25c5445e7f4c0f7e12ec78ff5691b1","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-EA894YPqAek/MPiA6e6f0XiACWXTWFkLEZksdidEANfUEqAnFWfoqfNGp9A6veMUaeAYhNFvB3Cd6CWFtXQXuA==","shasum":"1505b9933bd83eebeb01d6f97ff98098113d2671","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-702f601.tgz","fileCount":31,"unpackedSize":709064,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIFLUywNdRlKrFtA/D4nz2eQe+0kmwR7nSuymdrjGtSQdAiAUlIMx+uTKrX8KDd6hIAyyxsJ2N5lyhKnoZTylp0+8tw=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-702f601_1710864556459_0.14073271040806312"},"_hasShrinkwrap":false},"0.0.0-11308cf":{"name":"@cloudflare/next-on-pages","version":"0.0.0-11308cf","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-11308cf","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Gotchas\n\nThere are a few gotchas that might trip developers over, please familiarize yourself with the [Gotchas document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/gotchas.md) in order to avoid such pitfalls.\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"11308cf02d5e8ac5d591cef8a1da663a5be318da","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-ErxLu8065b7jmUrdFuuZlf4bQ14bjv2a3oOVen7A5LdFlCH0GLSuLqjpM3cEz01u3/PLU1XCMVH15XZS9/cAnA==","shasum":"3bf13f4865e4134b3bdfb205ae696eb815f48967","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-11308cf.tgz","fileCount":31,"unpackedSize":709064,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIEhPVuyZAB/d27aYBqWcwuPWbNNnqo4c6y42+sQnHWiwAiEAhKQPHWs6BTCWuseWCu9VZDp1AwXkG2+QhnV3RdbKDhk="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-11308cf_1711043507682_0.1016295989358953"},"_hasShrinkwrap":false},"0.0.0-8951ab0":{"name":"@cloudflare/next-on-pages","version":"0.0.0-8951ab0","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-8951ab0","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Troubleshooting\n\nIf you find yourself hitting some issues with `@cloudflare/next-on-pages` please check out our [official troubleshooting documentation](https://developers.cloudflare.com/pages/framework-guides/nextjs/deploy-a-nextjs-site/#troubleshooting).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"8951ab0ec33d9993b19c5c84631e589cd4a4ce6b","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-xgsK7CK734d5iJY5evmuB72NtfyUMNHPI0SAsKGwZOyAZPYV+SyJia5hFTr1CQI5Mjn/ZZoqLVZIN3mmPfgtAw==","shasum":"9d8dbebd5223e1296ed8701a3796f6ca006b675e","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-8951ab0.tgz","fileCount":31,"unpackedSize":709489,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCICQa0pb6y6kuAevVGjt+067JgPBUMqTNJeEjOWXIQxKpAiAEnffP0xHEH0AucDSDBqPqEfR0F+Ws9R82ENLB87CM8A=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-8951ab0_1711043550315_0.08781354567037591"},"_hasShrinkwrap":false},"0.0.0-c3fb67b":{"name":"@cloudflare/next-on-pages","version":"0.0.0-c3fb67b","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-c3fb67b","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Troubleshooting\n\nIf you find yourself hitting some issues with `@cloudflare/next-on-pages` please check out our [official troubleshooting documentation](https://developers.cloudflare.com/pages/framework-guides/nextjs/deploy-a-nextjs-site/#troubleshooting).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"c3fb67bd0af0fa70bf57c96d0333a56120ce9233","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-fv6B5IUsct4jqVT88RUlE8Xmi1LQ5lYjGIVyKgIAAOBNr0A4Fiio2dERi+nrQvwJroM8Ob5Zg1Pha23/fp4TwQ==","shasum":"8d7f210adc5b947a08d0bf7b5f8fa384341b6345","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-c3fb67b.tgz","fileCount":31,"unpackedSize":709451,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCF7wukKhIAkoeMRltgsKB5JOkLF03VWocCnsq9qCAcpQIhAO4/Hm9UD7tIStTYZO+D/YdAGo+fLInpkCYEJNsQrYuM"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-c3fb67b_1711043896969_0.9127193482879234"},"_hasShrinkwrap":false},"0.0.0-82aa1a4":{"name":"@cloudflare/next-on-pages","version":"0.0.0-82aa1a4","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-82aa1a4","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Troubleshooting\n\nIf you find yourself hitting some issues with `@cloudflare/next-on-pages` please check out our [official troubleshooting documentation](https://developers.cloudflare.com/pages/framework-guides/nextjs/deploy-a-nextjs-site/#troubleshooting).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"82aa1a42eee4955aa6d73c4f93d653c2c5061abc","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-zaDI0cFZWTsRqxuC97e83RLKf+EvG3GWwT5HpnJZ6UrpwZ9fGoCwBbKzWicjboqUzHxHpHB2HUThdLJEZvwA0A==","shasum":"01c5943f25983d1f0808e2019b25684093d5d715","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-82aa1a4.tgz","fileCount":31,"unpackedSize":709451,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIBUzslDeGT7iaEQ4rSqKf12fqIWFpNErjl85lRelQAPaAiA9wuiD9R5JBe1fCed0eUNtPoUwC+3caJpabQHNhtS2Nw=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-82aa1a4_1711043951041_0.8446702697937667"},"_hasShrinkwrap":false},"0.0.0-8da9da2":{"name":"@cloudflare/next-on-pages","version":"0.0.0-8da9da2","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-8da9da2","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Troubleshooting\n\nIf you find yourself hitting some issues with `@cloudflare/next-on-pages` please check out our [official troubleshooting documentation](https://developers.cloudflare.com/pages/framework-guides/nextjs/deploy-a-nextjs-site/#troubleshooting).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"8da9da2535356836a7091776d5be84c80cc8091d","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-+xT7BFRDIEn6B9pNT75DXWQZNAwKV27MAbs5/E3VKH8VqgOCtztXs+GvhEzZ4gzQoZbKwxICV6YD68WosbqIRw==","shasum":"6e3c2daa1fc12dcbc755dda16e47b76992981375","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-8da9da2.tgz","fileCount":31,"unpackedSize":709500,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIB1HjQzbeAfdjjXF6BG5WFO5qH8OOomxV0W7EbWZKowTAiEAlhgiMYMUFniz5pBwJ0FTnMQV9xNjqVteRVeOIEIy430="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-8da9da2_1711101755565_0.1448602977119262"},"_hasShrinkwrap":false},"0.0.0-53cb762":{"name":"@cloudflare/next-on-pages","version":"0.0.0-53cb762","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-53cb762","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Troubleshooting\n\nIf you find yourself hitting some issues with `@cloudflare/next-on-pages` please check out our [official troubleshooting documentation](https://developers.cloudflare.com/pages/framework-guides/nextjs/deploy-a-nextjs-site/#troubleshooting).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"53cb7625b1af14308144765077dea5b56600624f","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-iMjEGx0HFP4GALT95bi1M/sWiyPu1CztzKvV6nrjaZVRrMfnT19t7mqf70+V1tbnCtXIAxEhCILPaNl8p8Fndg==","shasum":"a16dd37bd017c457841fc9b7973f8028b63a86ae","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-53cb762.tgz","fileCount":31,"unpackedSize":709512,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQD18u05Qn1ZWWvIYI3z4iZwka1Vx9/0ttDqLx/Bv6nNwAIhALEmtjrNneJWSSURhAtVLteF4PYstGU9xks+SwD4HroV"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-53cb762_1711139617009_0.10319601702590209"},"_hasShrinkwrap":false},"1.11.0":{"name":"@cloudflare/next-on-pages","version":"1.11.0","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"_id":"@cloudflare/next-on-pages@1.11.0","gitHead":"64988cabc4b737b4319b6576d4524d6be843b850","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-/wKpDMrp2THkco+O5IKb7/JA07pppop4cRF3LEgL1FhJYxlOn3jo9WsZSuW58PovQJR2tZisLB/EJjJpmt1KOA==","shasum":"83f4e32289d53a103bb77caed760f56aff04d4af","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.11.0.tgz","fileCount":31,"unpackedSize":709408,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIBFKodc/24NdeG6CyxkRkLlQjEgyr4Xci4M7CM3AjMN8AiEAnQ3DhPqoIy7BkU+8IPVoqvLFCJNyUpguJE5YXEUoZHA="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.11.0_1711140344677_0.3322333732768554"},"_hasShrinkwrap":false},"0.0.0-64988ca":{"name":"@cloudflare/next-on-pages","version":"0.0.0-64988ca","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-64988ca","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Troubleshooting\n\nIf you find yourself hitting some issues with `@cloudflare/next-on-pages` please check out our [official troubleshooting documentation](https://developers.cloudflare.com/pages/framework-guides/nextjs/deploy-a-nextjs-site/#troubleshooting).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"64988cabc4b737b4319b6576d4524d6be843b850","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-wVOb5/Jk1D0UZX2cr0IcOW4A8GZoplSJg1MSk3jp9EaEpFEDv2B2peaczeBD4w0OYitHw9jl/plSASsh5DmWCw==","shasum":"f2f943696d31052ce473b31d1bd50edd17d72c19","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-64988ca.tgz","fileCount":31,"unpackedSize":709512,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQClShQxtXeSfB/y3ldSNnyJh2+RF90/2jZXq2FA7ffGsgIhAN5IQyFgwVd+suMZyCJfYBxKpTgfiEW8xc3EVONSvyr2"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-64988ca_1711140349842_0.7609495094020258"},"_hasShrinkwrap":false},"0.0.0-a84add8":{"name":"@cloudflare/next-on-pages","version":"0.0.0-a84add8","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-a84add8","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Troubleshooting\n\nIf you find yourself hitting some issues with `@cloudflare/next-on-pages` please check out our [official troubleshooting documentation](https://developers.cloudflare.com/pages/framework-guides/nextjs/deploy-a-nextjs-site/#troubleshooting).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"a84add8db159a7c5d728c8169ef7b5aeac768e29","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-HKmMNcinyi02Oe8n4QAYmeJYHT9A1+vF5fSpSHH5wiHsUxvYoKSHWM4WxJenjnFK1V3dniQs+fPirK65GTljiQ==","shasum":"91619f01037e2095e92a7b629435233f20bd0197","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-a84add8.tgz","fileCount":31,"unpackedSize":709512,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIFQWEAVITw1T2KHogZ2UAdxmZu1ujqKzx9U0aq2OxBZPAiEA4azxKWML3pccaJoqsrTTG8wZqT2VC1quSIw46LdnMDE="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-a84add8_1712174782486_0.3276747046373987"},"_hasShrinkwrap":false},"0.0.0-ad4ca02":{"name":"@cloudflare/next-on-pages","version":"0.0.0-ad4ca02","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-ad4ca02","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Troubleshooting\n\nIf you find yourself hitting some issues with `@cloudflare/next-on-pages` please check out our [official troubleshooting documentation](https://developers.cloudflare.com/pages/framework-guides/nextjs/deploy-a-nextjs-site/#troubleshooting).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"ad4ca023f89ab7fc8ef43264666b7791ea0ef40f","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-UpLoczq5Ri6mMK3KZ9wQveGMx1uifWiuBY6aDNqE4S9E7zEWs4EkpbeXWZo3c+gijGuaOL/E33Ke5Qvukwrh4w==","shasum":"e714d634f085b83d67cbe4e2dacc484d5788cf33","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-ad4ca02.tgz","fileCount":31,"unpackedSize":709534,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIAP+/MB7zmf9h24rYUXdx32yLmAdkXH+kManCr9FLwq9AiAqB9sBedKMiZVqQHxnXkvMiIAI6iqJ1P8SYQdA6houiQ=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-ad4ca02_1712574714985_0.042185609816561165"},"_hasShrinkwrap":false},"0.0.0-c8a83f0":{"name":"@cloudflare/next-on-pages","version":"0.0.0-c8a83f0","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-c8a83f0","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Troubleshooting\n\nIf you find yourself hitting some issues with `@cloudflare/next-on-pages` please check out our [official troubleshooting documentation](https://developers.cloudflare.com/pages/framework-guides/nextjs/deploy-a-nextjs-site/#troubleshooting).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"c8a83f042f1c3c6bc479279e8f3ae850b996e75b","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-wzDG7LQwrugjMtVtd0/KO18lfkYIDRYo96QKdWZztFTINswYXvWFwfOGRv3MjAyukSnVjekLMIjWFErHoy4ltw==","shasum":"cc207bca7f187406f19e79186e30e59c079d4f29","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-c8a83f0.tgz","fileCount":31,"unpackedSize":709534,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCICxF/S/akeTA7gU5A50NPKnFB3jty+ZIySirrCSDOBXNAiEAwAvYzmy/gKtDdfQRqYMVP0VmMzcOI5jbXXaw/LbZIlM="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"lbarthonet","email":"lbarthonet@cloudflare.com"},{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-c8a83f0_1713779278896_0.6060989746156478"},"_hasShrinkwrap":false},"0.0.0-5170477":{"name":"@cloudflare/next-on-pages","version":"0.0.0-5170477","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-5170477","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Troubleshooting\n\nIf you find yourself hitting some issues with `@cloudflare/next-on-pages` please check out our [official troubleshooting documentation](https://developers.cloudflare.com/pages/framework-guides/nextjs/deploy-a-nextjs-site/#troubleshooting).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"5170477797519f6f943fc3f834f8a5ba7f4841ef","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-JYbUlR/ZsmHz4FFcm6Fslh/gRwRZbTQq9yNqIxoq1sxt7R5Z91U43e576FWoNLXA8uygkO9GH6/YgnAk2brjVA==","shasum":"fc17380dce140ae40bb50a5b14007c15f7ad6f0e","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-5170477.tgz","fileCount":31,"unpackedSize":709601,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIHLhDMD/s0E4EH+Z/AVgb5xAy4F5tISqEbRzkrxwX65KAiAOKBDfSunsQrykF0BKxY8nOS2AgUHw6RZw2KOdERk1Dg=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"lbarthonet","email":"lbarthonet@cloudflare.com"},{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-5170477_1713793318591_0.10433854267334897"},"_hasShrinkwrap":false},"0.0.0-446e9af":{"name":"@cloudflare/next-on-pages","version":"0.0.0-446e9af","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-446e9af","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Troubleshooting\n\nIf you find yourself hitting some issues with `@cloudflare/next-on-pages` please check out our [official troubleshooting documentation](https://developers.cloudflare.com/pages/framework-guides/nextjs/deploy-a-nextjs-site/#troubleshooting).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"446e9afd0843ff98046653b6713db7ba02e0f449","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-hh6rAml7MiEWsJzv3x/5UuEMfE5LLnKHZrC1iVinGTFRuM1HsH6tI+VHUvT53qqWkK/aDybNtTgjV1eIdTbTxA==","shasum":"be590b3048fb5161124bcfe2faf41afbef483d09","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-446e9af.tgz","fileCount":31,"unpackedSize":709656,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIGu43leoHBi9d7Jjwc/ihOi0iNeVPUBPWetiupq8VAHfAiEA6vNs2SPu8Gv4bgkNQmHX8MyvwW1W76kmcxD6gaSBxvI="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"lbarthonet","email":"lbarthonet@cloudflare.com"},{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-446e9af_1713820413033_0.04935364734108738"},"_hasShrinkwrap":false},"0.0.0-f7bf30b":{"name":"@cloudflare/next-on-pages","version":"0.0.0-f7bf30b","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-f7bf30b","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Troubleshooting\n\nIf you find yourself hitting some issues with `@cloudflare/next-on-pages` please check out our [official troubleshooting documentation](https://developers.cloudflare.com/pages/framework-guides/nextjs/deploy-a-nextjs-site/#troubleshooting).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"f7bf30b54032adf133c1413909e0ad259f7d9b9a","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-XnzMKlPS1xMAZ1x0otl0cLsZ7m4aCC5rSfB2QTNvwf9SxZmdenxHfDPgjS9CwWMVRjy10dUPlvq8+v9tEgRPSA==","shasum":"f9444415ea3874f6368c4279f8306aa44445f998","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-f7bf30b.tgz","fileCount":31,"unpackedSize":710134,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQDsuQhaPPVimLyv7TY8V0wW4QROHUS8XFlsNwrsp4GoNAIhAJU+154+cK+ESV6jOm+BcNqQMuo2VQAXYn6h5m/HX4Ck"}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"lbarthonet","email":"lbarthonet@cloudflare.com"},{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-f7bf30b_1713872565523_0.36494041933719124"},"_hasShrinkwrap":false},"1.11.1":{"name":"@cloudflare/next-on-pages","version":"1.11.1","bin":{"next-on-pages":"bin/index.js"},"exports":{".":"./dist/api/index.js","./next-dev":"./dist/next-dev/index.cjs"},"typesVersions":{"*":{".":["./dist/api/index.d.ts"],"next-dev":["./dist/next-dev/index.d.ts"]}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"_id":"@cloudflare/next-on-pages@1.11.1","gitHead":"beec78a537be12e43ef29d25000d07be22396506","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-fDXauz1dM/yNju/n43t2EiLkjekHiDAyNxjRnLamOQHe2oUO4ug+0fwsDn/cy71p/jfmcNdQpE0VrSf6MToEBQ==","shasum":"86609e0cf39a42b17b21463b3b867b9149dfb683","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.11.1.tgz","fileCount":31,"unpackedSize":710030,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIENfybgjqENyJrb06UyXM1kRYvbnRsD4LUWFD7jLNrqkAiBaBS4Nq0NfHx7WqH/Gfl4cbI9UWnlpFg+Wp7Liy0cN8Q=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"lbarthonet","email":"lbarthonet@cloudflare.com"},{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.11.1_1713874795689_0.7119033337696223"},"_hasShrinkwrap":false},"0.0.0-31c2627":{"name":"@cloudflare/next-on-pages","version":"0.0.0-31c2627","bin":{"next-on-pages":"bin/index.js"},"exports":{".":{"import":"./dist/api/index.js","types":"./dist/api/index.d.ts"},"./next-dev":{"import":"./dist/next-dev/index.cjs","require":"./dist/next-dev/index.cjs","types":"./dist/next-dev/index.d.ts"}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-31c2627","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Troubleshooting\n\nIf you find yourself hitting some issues with `@cloudflare/next-on-pages` please check out our [official troubleshooting documentation](https://developers.cloudflare.com/pages/framework-guides/nextjs/deploy-a-nextjs-site/#troubleshooting).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"31c2627519e285dd2f0997264eb25699b9a97726","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-okgumzAIQ4f/KrVH0t66w61INg2o1Pc7/BpVTF8rwjUfDgKOrvsAS6uTt35hIZcI78hpTgKKEZdeuD9EvGXg+Q==","shasum":"8e13dd691a384f71f491faf7877f0f49184a4aa6","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-31c2627.tgz","fileCount":31,"unpackedSize":710168,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIHKpkTFTNNwGo9rkpI9ttuqVuZO44X0R4cYne9P0iKX0AiAtRQmutfIyeVbF7KInaZi6BRvO/aDV6WPFR2yaUMt1xQ=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"lbarthonet","email":"lbarthonet@cloudflare.com"},{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-31c2627_1714511022458_0.7382977999475748"},"_hasShrinkwrap":false},"0.0.0-1493f82":{"name":"@cloudflare/next-on-pages","version":"0.0.0-1493f82","bin":{"next-on-pages":"bin/index.js"},"exports":{".":{"import":"./dist/api/index.js","types":"./dist/api/index.d.ts"},"./next-dev":{"import":"./dist/next-dev/index.cjs","require":"./dist/next-dev/index.cjs","types":"./dist/next-dev/index.d.ts"}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"nextOnPagesMetadata":{"beta":true},"_id":"@cloudflare/next-on-pages@0.0.0-1493f82","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Troubleshooting\n\nIf you find yourself hitting some issues with `@cloudflare/next-on-pages` please check out our [official troubleshooting documentation](https://developers.cloudflare.com/pages/framework-guides/nextjs/deploy-a-nextjs-site/#troubleshooting).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","gitHead":"1493f82f5a7276f7442e60402d4bee0b04904cf0","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-aEVAg5rHOVYa1mz/MYIDWsbRq+AbJ20VAo2K6akKwhrTcIPUG9WW7tWM4SgaMSs+RauYZMGFXOS7fO/18QkZEQ==","shasum":"e8da04b96b52886a2ba989f026b016530b0584d8","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-0.0.0-1493f82.tgz","fileCount":31,"unpackedSize":710168,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIHCN2qA9+hzbvLS3YSIdjdQ/mzsZup5y9jwRWtgenQUzAiAOYtIwLZuht8yr3iz2pubdqg1u+8inv+Q4YUmSue2N5Q=="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"lbarthonet","email":"lbarthonet@cloudflare.com"},{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_0.0.0-1493f82_1714513763313_0.35175223936908107"},"_hasShrinkwrap":false},"1.11.2":{"name":"@cloudflare/next-on-pages","version":"1.11.2","bin":{"next-on-pages":"bin/index.js"},"exports":{".":{"import":"./dist/api/index.js","types":"./dist/api/index.d.ts"},"./next-dev":{"import":"./dist/next-dev/index.cjs","require":"./dist/next-dev/index.cjs","types":"./dist/next-dev/index.d.ts"}},"scripts":{"lint":"eslint src templates","types-check":"tsc --noEmit","build:types":"tsc -p tsconfig.api.json","build":"esbuild --bundle --platform=node ./src/index.ts ./src/api/index.ts --external:esbuild --external:chokidar --external:server-only --outdir=./dist","build:watch":"npm run build -- --watch=forever","build:no-nodejs-compat-error-page":"node ./build-no-nodejs-compat-flag-static-error-page.mjs","build:next-dev":"npm run build --workspace @cloudflare/next-on-pages-next-dev && rm -rf ./dist/next-dev && cp -R ../../internal-packages/next-dev/dist ./dist/next-dev","postbuild":"npm run build:types && npm run build:no-nodejs-compat-error-page && npm run build:next-dev","prepare":"npm run build","test:unit":"npx vitest --config vitest.config.ts"},"keywords":["cloudflare","cloudflare pages","edge","nextjs"],"license":"MIT","homepage":"https://github.com/cloudflare/next-on-pages#readme","bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"dependencies":{"acorn":"^8.8.0","ast-types":"^0.14.2","chalk":"^5.2.0","chokidar":"^3.5.3","commander":"^11.1.0","cookie":"^0.5.0","esbuild":"^0.15.3","js-yaml":"^4.1.0","miniflare":"^3.20231218.1","package-manager-manager":"^0.2.0","pcre-to-regexp":"^1.1.0","semver":"^7.5.2"},"devDependencies":{"@changesets/cli":"^2.26.0","@cloudflare/next-on-pages-next-dev":"*","@cloudflare/next-on-pages-tsconfig":"*","@cloudflare/workers-types":"^4.20230404.0","@tsconfig/strictest":"^2.0.0","@types/cookie":"^0.5.1","@types/js-yaml":"^4.0.5","@types/mock-fs":"^4.13.1","@types/node":"^20.1.4","dedent-tabs":"^0.10.3","eslint":"^8.35.0","image-to-base64":"^2.2.0","mock-fs":"^5.2.0","p-limit":"^4.0.0","prettier":"^2.8.4","typescript":"^5.0.4","vitest":"^0.32.2","vitest-environment-miniflare":"^2.13.0"},"peerDependencies":{"vercel":">=30.0.0","wrangler":"^3.28.2","@cloudflare/workers-types":"^4.20240208.0"},"peerDependenciesMeta":{"@cloudflare/workers-types":{"optional":true}},"_id":"@cloudflare/next-on-pages@1.11.2","gitHead":"1493f82f5a7276f7442e60402d4bee0b04904cf0","description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","_nodeVersion":"20.10.0","_npmVersion":"10.2.3","dist":{"integrity":"sha512-8xKi4CqOl4UwRUxUByFevf7jWcMNcEmAFmtodVMGJ5ZvX1z3tswxuefSZAaQ8lCB74TAbiY4lQkq9TDoeDcDgw==","shasum":"8c9712c6015f6987dae7b6710aa7775238ed0d10","tarball":"https://registry.npmjs.org/@cloudflare/next-on-pages/-/next-on-pages-1.11.2.tgz","fileCount":31,"unpackedSize":710064,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQCVx6UWRIHdPIve0zWjqCKWjZPVOuRUAfS7s2NPRpHssQIgOKbe81/IPS82+2hjITC8N158y/o2/uMyvQqg596hsFM="}]},"_npmUser":{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},"directories":{},"maintainers":[{"name":"lbarthonet","email":"lbarthonet@cloudflare.com"},{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/next-on-pages_1.11.2_1714515026298_0.06114750593567386"},"_hasShrinkwrap":false}},"time":{"created":"2022-10-24T12:12:16.579Z","0.1.0":"2022-10-24T12:12:16.800Z","modified":"2024-04-30T22:10:27.194Z","0.2.0":"2022-11-17T13:29:49.612Z","0.3.0":"2023-02-09T12:19:25.117Z","0.4.0":"2023-03-14T20:35:52.299Z","0.4.1":"2023-03-15T21:00:56.791Z","0.4.2":"2023-03-16T22:03:00.465Z","0.0.0-f25e836":"2023-03-20T12:38:52.311Z","0.0.0-b1845fd":"2023-03-20T12:46:45.229Z","0.0.0-4d3f879":"2023-03-20T13:02:00.175Z","0.0.0-4296d3e":"2023-03-20T18:26:04.552Z","0.0.0-cc91567":"2023-03-20T21:16:58.969Z","0.5.0":"2023-03-20T21:17:10.492Z","0.0.0-824944e":"2023-03-27T20:51:21.208Z","0.0.0-b87c51e":"2023-03-28T10:45:29.758Z","0.0.0-bdbf909":"2023-03-30T19:19:27.837Z","0.0.0-f6c1d34":"2023-03-31T18:07:23.374Z","0.0.0-057baa0":"2023-04-02T16:18:02.234Z","0.0.0-8b4f6d5":"2023-04-03T12:25:55.368Z","0.0.0-e0c53fe":"2023-04-03T12:40:38.241Z","0.0.0-70b2e80":"2023-04-03T17:48:37.934Z","0.0.0-dcbbb9a":"2023-04-03T22:05:19.465Z","0.6.0":"2023-04-03T22:08:48.708Z","0.0.0-04da2c9":"2023-04-03T22:08:50.858Z","0.0.0-2d72906":"2023-04-05T15:07:57.362Z","0.0.0-7266442":"2023-04-06T18:44:48.885Z","0.0.0-8d4aaae":"2023-04-06T18:45:22.419Z","0.0.0-9834066":"2023-04-06T18:46:52.371Z","0.7.0":"2023-04-06T18:46:55.282Z","0.0.0-3387ac9":"2023-04-12T18:31:50.513Z","0.0.0-119b55e":"2023-04-12T18:42:14.679Z","0.8.0":"2023-04-12T18:42:16.072Z","0.0.0-91f766f":"2023-04-13T18:41:13.819Z","0.0.0-752ae09":"2023-04-13T22:41:57.763Z","0.0.0-b8b0bde":"2023-04-17T09:01:59.789Z","0.0.0-3fa5b0e":"2023-04-17T20:41:56.397Z","0.0.0-84d9d5c":"2023-04-18T13:25:19.710Z","0.0.0-4258489":"2023-04-18T13:39:18.596Z","0.0.0-15f7ff5":"2023-04-18T15:47:49.846Z","0.0.0-3fe3a7d":"2023-04-18T16:23:35.428Z","0.0.0-6bb5dea":"2023-04-19T09:55:30.538Z","0.0.0-4dfd789":"2023-04-20T12:39:04.136Z","0.0.0-dc88b27":"2023-04-20T20:21:38.844Z","0.9.0":"2023-04-20T20:53:25.494Z","0.0.0-758f588":"2023-04-21T19:29:30.618Z","0.0.0-e3b92c3":"2023-04-22T17:58:55.739Z","0.0.0-4afad15":"2023-04-23T23:03:47.825Z","0.0.0-2a159ed":"2023-04-24T12:23:22.064Z","0.0.0-dc74ffe":"2023-04-24T15:18:15.474Z","0.0.0-cf43f44":"2023-04-24T15:18:46.674Z","0.0.0-60e375f":"2023-04-24T18:07:11.993Z","0.10.0":"2023-04-24T18:07:17.093Z","0.0.0-b07e3bc":"2023-04-24T22:08:27.987Z","0.0.0-bddbe04":"2023-04-25T09:47:46.637Z","0.0.0-9f5b83c":"2023-04-25T10:11:06.075Z","0.0.0-087d393":"2023-04-26T08:43:48.164Z","0.0.0-23aa2df":"2023-04-26T09:09:17.140Z","0.0.0-a680db6":"2023-04-27T16:50:39.731Z","0.0.0-d7e62c7":"2023-04-29T23:18:21.527Z","0.10.1":"2023-04-29T23:18:26.120Z","0.0.0-7817ecd":"2023-05-02T16:08:14.231Z","0.0.0-6fcb58b":"2023-05-02T16:08:42.309Z","0.0.0-89924e0":"2023-05-02T16:19:22.931Z","0.0.0-bb23b60":"2023-05-03T22:56:54.193Z","0.0.0-87e183b":"2023-05-04T10:29:25.941Z","0.0.0-1a68931":"2023-05-05T17:52:20.975Z","0.0.0-701f0c2":"2023-05-06T22:07:12.326Z","0.0.0-86df485":"2023-05-08T23:18:12.776Z","0.0.0-b33639f":"2023-05-09T09:13:59.446Z","0.0.0-3e2dad8":"2023-05-09T13:15:02.793Z","0.0.0-336f3a7":"2023-05-09T20:54:46.767Z","0.0.0-4740c02":"2023-05-09T22:09:39.283Z","0.0.0-d81c2e3":"2023-05-10T20:58:25.268Z","0.0.0-360d9f0":"2023-05-10T20:58:53.769Z","0.0.0-3447a97":"2023-05-12T11:54:03.499Z","0.0.0-ea761b8":"2023-05-12T16:25:05.902Z","0.0.0-c70151d":"2023-05-12T16:59:26.832Z","0.0.0-e2d2046":"2023-05-12T23:32:46.203Z","0.0.0-f1d76cd":"2023-05-13T22:15:34.471Z","0.0.0-8a46b36":"2023-05-13T23:40:02.904Z","0.0.0-0d9e155":"2023-05-15T11:36:45.938Z","0.0.0-b3ff89f":"2023-05-15T15:39:36.513Z","0.0.0-3277f72":"2023-05-15T18:04:47.483Z","0.0.0-e053756":"2023-05-15T18:59:06.610Z","0.0.0-39cfa74":"2023-05-16T08:36:51.194Z","0.0.0-d4440ba":"2023-05-16T10:54:32.043Z","0.0.0-f010420":"2023-05-16T12:00:22.065Z","1.0.0":"2023-05-16T12:00:24.554Z","0.0.0-b16622c":"2023-05-16T13:15:50.936Z","0.0.0-f72a56f":"2023-05-16T19:17:57.474Z","0.0.0-95b1704":"2023-05-18T15:09:36.924Z","0.0.0-29b7547":"2023-05-18T16:04:47.672Z","0.0.0-4f43b9b":"2023-05-18T16:56:38.019Z","0.0.0-3f05e81":"2023-05-18T19:51:48.540Z","0.0.0-c0ecec3":"2023-05-19T09:57:22.910Z","0.0.0-fd51777":"2023-05-22T10:44:03.947Z","0.0.0-81bfcdb":"2023-05-22T10:54:51.344Z","0.0.0-97c8739":"2023-05-22T17:51:22.654Z","0.0.0-e4a3ee4":"2023-05-23T10:03:27.026Z","0.10.2":"2023-05-25T16:09:47.187Z","0.0.0-c844242":"2023-05-25T17:46:05.589Z","1.0.1":"2023-05-25T17:46:18.215Z","0.0.0-f687d25":"2023-05-26T10:08:46.602Z","0.0.0-ff90dde":"2023-05-26T15:47:42.245Z","0.0.0-7deb9d8":"2023-06-05T10:41:17.528Z","0.0.0-d91b24b":"2023-06-05T11:10:23.094Z","0.0.0-1a7e0e4":"2023-06-05T15:58:42.162Z","0.0.0-1703ed6":"2023-06-06T11:25:47.928Z","0.0.0-81ebcb7":"2023-06-06T11:29:15.279Z","0.0.0-cb62938":"2023-06-06T15:28:48.179Z","0.0.0-6455355":"2023-06-06T20:34:08.094Z","1.0.2":"2023-06-06T20:34:24.257Z","0.0.0-3fa7019":"2023-06-07T08:09:27.602Z","0.0.0-7d0c0f8":"2023-06-07T15:23:54.058Z","0.0.0-016b8d3":"2023-06-07T18:29:50.478Z","0.0.0-d835933":"2023-06-13T22:35:49.896Z","0.0.0-1be5e72":"2023-06-14T09:37:15.063Z","0.0.0-e48c4a0":"2023-06-14T11:18:28.656Z","0.0.0-783dc79":"2023-06-15T09:07:47.513Z","0.0.0-fb818bf":"2023-06-15T13:37:21.663Z","1.1.0":"2023-06-15T13:44:02.722Z","0.0.0-1f930d3":"2023-06-15T13:44:10.638Z","0.0.0-14a0e77":"2023-06-21T14:07:04.015Z","0.0.0-cad492b":"2023-06-22T21:31:35.823Z","0.0.0-b1c3a33":"2023-06-22T22:07:05.788Z","0.0.0-cc6c114":"2023-06-23T10:21:11.483Z","0.0.0-a9b8c3c":"2023-06-25T17:52:25.319Z","0.0.0-e6cdfaa":"2023-06-26T09:20:08.379Z","0.0.0-b97ad52":"2023-06-26T09:44:27.442Z","0.0.0-2f63de8":"2023-06-26T09:48:49.208Z","1.0.3":"2023-06-26T09:49:06.638Z","0.0.0-2c87481":"2023-06-26T10:00:11.831Z","1.1.1":"2023-06-26T10:48:24.689Z","0.0.0-b021650":"2023-06-26T10:48:32.146Z","0.0.0-64b8579":"2023-06-26T13:21:45.309Z","0.0.0-2dceb75":"2023-06-26T14:33:34.388Z","0.0.0-2f9cf97":"2023-06-26T16:33:54.135Z","0.0.0-63002ef":"2023-06-26T16:40:17.101Z","0.0.0-6212bfd":"2023-06-26T18:00:14.780Z","0.0.0-f879ffd":"2023-06-26T20:44:24.965Z","0.0.0-daa32fd":"2023-06-27T12:44:04.872Z","0.0.0-c21c995":"2023-06-28T08:49:24.295Z","0.0.0-68d905e":"2023-06-28T16:26:27.928Z","0.0.0-3a95489":"2023-06-29T09:30:01.592Z","1.2.0":"2023-06-29T10:30:59.429Z","0.0.0-8346e05":"2023-06-29T10:31:13.431Z","0.0.0-68dd9e9":"2023-06-29T13:27:20.725Z","0.0.0-b151505":"2023-06-30T17:21:38.652Z","0.0.0-9a66adc":"2023-07-02T18:49:36.542Z","0.0.0-6bf6480":"2023-07-03T08:41:33.408Z","0.0.0-adf0713":"2023-07-03T16:15:03.353Z","0.0.0-cb7ab43":"2023-07-03T17:21:33.650Z","0.0.0-c0ab05a":"2023-07-04T11:36:34.620Z","0.0.0-92c865b":"2023-07-05T18:04:59.581Z","0.0.0-505be1e":"2023-07-06T11:30:18.467Z","0.0.0-dacf52d":"2023-07-06T13:28:22.993Z","0.0.0-cf5234a":"2023-07-06T14:38:12.134Z","0.0.0-df9d256":"2023-07-06T14:56:25.509Z","0.0.0-ffbae15":"2023-07-07T11:34:51.127Z","0.0.0-f1f5a95":"2023-07-10T14:58:50.783Z","0.0.0-9a98561":"2023-07-10T16:06:12.445Z","0.0.0-b630232":"2023-07-10T16:49:31.321Z","1.3.0":"2023-07-10T16:49:34.867Z","0.0.0-dc529d7":"2023-07-10T22:33:05.763Z","0.0.0-b4c4245":"2023-07-10T22:50:50.553Z","0.0.0-76a8bb4":"2023-07-12T22:29:10.674Z","0.0.0-619beea":"2023-07-14T09:34:30.131Z","0.0.0-ef63ae2":"2023-07-17T17:58:18.454Z","1.3.1":"2023-07-17T17:58:20.970Z","0.0.0-6c28128":"2023-07-19T09:25:11.795Z","0.0.0-48779e5":"2023-07-20T09:03:56.769Z","0.0.0-0424aab":"2023-07-20T09:54:49.322Z","0.0.0-660ed5e":"2023-07-20T11:02:28.018Z","0.0.0-ee6b7dc":"2023-07-20T17:21:05.279Z","0.0.0-f08f2b9":"2023-07-24T12:11:28.992Z","0.0.0-551fa05":"2023-07-24T12:52:18.264Z","0.0.0-1588974":"2023-07-24T15:11:13.005Z","0.0.0-9734795":"2023-07-24T15:12:52.377Z","0.0.0-11afe0a":"2023-07-25T12:58:08.397Z","0.0.0-671ff82":"2023-07-25T15:47:37.797Z","0.0.0-476d26a":"2023-07-25T18:36:10.332Z","0.0.0-5d42e57":"2023-07-25T20:11:53.945Z","1.4.0":"2023-07-25T20:16:45.999Z","0.0.0-eae9f6a":"2023-07-25T20:16:49.213Z","0.0.0-ea98a8f":"2023-07-25T20:20:56.111Z","0.0.0-2772725":"2023-07-28T13:05:18.090Z","0.0.0-c6621c6":"2023-07-28T13:52:10.132Z","0.0.0-226d562":"2023-07-28T23:38:13.872Z","0.0.0-3affd17":"2023-07-31T09:43:10.973Z","0.0.0-53ad429":"2023-07-31T14:13:16.219Z","0.0.0-5aefce5":"2023-07-31T14:23:44.406Z","0.0.0-9faf701":"2023-07-31T15:56:53.790Z","0.0.0-7a18efb":"2023-07-31T20:46:06.983Z","1.5.0":"2023-07-31T20:46:13.982Z","0.0.0-7da1fd8":"2023-08-09T17:59:23.995Z","0.0.0-5bfbbe1":"2023-08-09T18:00:35.404Z","0.0.0-705a95b":"2023-08-09T18:37:56.353Z","0.0.0-7f94fd2":"2023-08-14T09:10:44.157Z","0.0.0-32426e1":"2023-08-14T16:31:22.693Z","1.5.1":"2023-08-14T16:32:20.116Z","0.0.0-4570aa6":"2023-08-15T15:35:52.192Z","0.0.0-291bfde":"2023-08-21T11:30:42.787Z","0.0.0-fe6ea04":"2023-08-24T14:18:03.650Z","0.0.0-b3a2ca4":"2023-08-24T16:36:14.582Z","0.0.0-c788def":"2023-08-24T16:36:38.053Z","0.0.0-cb32baf":"2023-08-24T16:37:00.224Z","1.6.0":"2023-08-26T19:36:28.636Z","0.0.0-82dacc5":"2023-08-26T19:38:13.870Z","0.0.0-f764fff":"2023-08-28T14:20:29.419Z","0.0.0-c06b437":"2023-09-01T10:38:04.025Z","0.0.0-1e25a97":"2023-09-14T10:05:51.168Z","0.0.0-168496":"2023-09-15T08:31:04.074Z","0.0.0-6c34550":"2023-09-15T10:12:28.565Z","1.6.1":"2023-09-15T10:53:46.159Z","0.0.0-b585099":"2023-09-18T19:44:37.118Z","0.0.0-f65227f":"2023-09-20T12:08:24.018Z","0.0.0-23562ad":"2023-09-24T11:03:54.530Z","0.0.0-628f6bb":"2023-09-24T11:46:02.886Z","0.0.0-5b4a5b7":"2023-09-26T12:02:04.223Z","0.0.0-a6b9d0e":"2023-09-29T09:42:19.377Z","1.6.2":"2023-09-29T09:42:32.546Z","0.0.0-072af87":"2023-09-29T15:09:19.593Z","1.6.3":"2023-09-29T15:46:23.330Z","0.0.0-0fb53a7":"2023-10-02T09:28:21.215Z","0.0.0-69efaa5":"2023-10-03T13:20:40.124Z","0.0.0-77369b6":"2023-10-03T21:15:15.520Z","0.0.0-29d3041":"2023-10-04T16:42:40.695Z","0.0.0-2423529":"2023-10-06T12:02:18.486Z","0.0.0-d24e241":"2023-10-06T13:01:54.680Z","0.0.0-bdf37d0":"2023-10-06T13:03:58.141Z","0.0.0-b5e8631":"2023-10-06T16:41:37.370Z","0.0.0-5af0ca3":"2023-10-06T22:37:03.415Z","0.0.0-6600d2a":"2023-10-07T22:33:45.864Z","0.0.0-1133a7f":"2023-10-12T17:14:13.741Z","0.0.0-c3df4e0":"2023-10-16T17:46:18.775Z","0.0.0-ea970f7":"2023-10-16T20:34:28.404Z","0.0.0-b296765":"2023-10-16T20:35:40.272Z","0.0.0-e75cd34":"2023-10-17T10:12:42.877Z","0.0.0-9a51c79":"2023-10-17T10:25:22.784Z","0.0.0-ab83858":"2023-10-17T19:21:51.787Z","0.0.0-5dae9b2":"2023-10-17T22:35:53.575Z","0.0.0-33c5ff8":"2023-10-18T11:05:54.880Z","1.7.0":"2023-10-18T11:06:02.214Z","0.0.0-5b44784":"2023-10-19T14:27:28.560Z","0.0.0-b474580":"2023-10-19T15:05:17.996Z","1.7.1":"2023-10-19T15:19:00.721Z","0.0.0-a1091b1":"2023-10-21T20:51:10.031Z","0.0.0-f9b7ced":"2023-10-21T21:39:53.365Z","1.7.2":"2023-10-21T21:39:58.351Z","0.0.0-3179e4f":"2023-10-22T19:56:26.460Z","0.0.0-9b290cb":"2023-10-29T20:51:15.087Z","0.0.0-4572873":"2023-11-03T12:17:56.334Z","0.0.0-bf57ec9":"2023-11-05T13:47:38.416Z","0.0.0-c83d125":"2023-11-11T14:23:03.079Z","0.0.0-500edef":"2023-11-11T14:32:30.785Z","0.0.0-ee237f3":"2023-11-11T14:42:32.016Z","1.7.3":"2023-11-11T14:53:37.405Z","0.0.0-3dc3ac4":"2023-11-11T14:53:44.071Z","0.0.0-48796ca":"2023-11-13T09:32:14.571Z","0.0.0-c9167ea":"2023-11-13T10:18:20.922Z","0.0.0-9d5db04":"2023-11-19T19:42:21.981Z","0.0.0-1c746ea":"2023-11-20T21:34:26.225Z","1.7.4":"2023-11-20T21:34:41.956Z","0.0.0-2d5dde9":"2023-11-21T13:34:37.223Z","0.0.0-f364224":"2023-11-25T18:12:50.807Z","0.0.0-888ae85":"2023-11-26T15:49:51.413Z","0.0.0-dbe2c78":"2023-11-26T15:50:26.057Z","0.0.0-d7b34cc":"2023-11-26T16:04:34.211Z","0.0.0-733fed9":"2023-11-26T16:28:59.065Z","1.8.0":"2023-11-26T16:47:09.668Z","0.0.0-b7f9225":"2023-11-28T22:28:27.928Z","0.0.0-61d0a2f":"2023-11-28T22:30:26.534Z","0.0.0-1e73555":"2023-11-30T21:51:40.883Z","0.0.0-bc216b4":"2023-12-02T23:18:25.000Z","0.0.0-8ece962":"2023-12-04T17:05:42.009Z","1.8.1":"2023-12-04T17:29:33.269Z","0.0.0-91acc21":"2023-12-04T17:29:45.488Z","0.0.0-8fe72f1":"2023-12-04T17:35:44.749Z","0.0.0-20d0e0d":"2023-12-06T12:15:19.261Z","0.0.0-252c3ac":"2023-12-08T10:16:11.968Z","0.0.0-8fc1597":"2023-12-08T17:52:17.855Z","0.0.0-d0a2edd":"2023-12-08T19:12:19.831Z","1.8.2":"2023-12-08T19:25:12.894Z","0.0.0-0c2c2fa":"2023-12-08T19:25:18.704Z","0.0.0-227f9cb":"2023-12-13T11:32:14.946Z","0.0.0-72426c2":"2023-12-13T11:58:46.607Z","0.0.0-37260e2":"2023-12-13T12:18:33.584Z","0.0.0-a4efc7b":"2023-12-13T12:29:09.032Z","0.0.0-352bf4b":"2023-12-18T15:34:57.578Z","0.0.0-eb4d28c":"2023-12-20T14:00:32.290Z","0.0.0-ed9a4ac":"2023-12-21T21:11:37.391Z","0.0.0-2b5c8f2":"2023-12-22T17:52:29.073Z","1.8.3":"2023-12-30T14:31:13.138Z","0.0.0-f0df948":"2024-01-02T09:12:35.035Z","0.0.0-f07ea9b":"2024-01-08T19:48:16.860Z","0.0.0-30cf4fa":"2024-01-08T20:16:35.477Z","0.0.0-2499cd7":"2024-01-08T20:29:34.611Z","1.8.4":"2024-01-08T20:32:29.751Z","0.0.0-ea73acc":"2024-01-08T21:09:36.626Z","1.8.5":"2024-01-08T21:12:35.008Z","0.0.0-1e516e3":"2024-01-08T21:12:39.924Z","0.0.0-8e93067":"2024-01-10T22:20:25.354Z","0.0.0-bb18e8a":"2024-01-15T12:04:00.954Z","0.0.0-34af449":"2024-01-15T13:39:10.561Z","0.0.0-05b6256":"2024-01-15T17:50:17.838Z","0.0.0-cc420a3":"2024-01-16T11:28:44.798Z","0.0.0-3dd1f20":"2024-01-18T16:43:48.157Z","0.0.0-519c6cc":"2024-01-18T21:46:15.082Z","0.0.0-0a91001":"2024-01-22T14:15:12.634Z","0.0.0-1350eea":"2024-01-29T23:10:46.181Z","0.0.0-0b1af18":"2024-01-30T16:46:01.774Z","1.8.6":"2024-01-31T10:12:12.585Z","0.0.0-f58ace8":"2024-02-01T14:46:59.307Z","0.0.0-9f31f4f":"2024-02-02T00:18:10.380Z","0.0.0-06de52e":"2024-02-06T22:29:41.292Z","0.0.0-5712c57":"2024-02-12T14:13:37.329Z","0.0.0-84e661d":"2024-02-13T16:31:20.942Z","1.9.0":"2024-02-13T18:13:36.219Z","0.0.0-687a39c":"2024-02-13T18:13:48.122Z","0.0.0-3846730":"2024-02-14T22:02:28.913Z","0.0.0-1cdde11":"2024-02-20T09:25:08.243Z","0.0.0-90e140c":"2024-02-20T09:27:21.171Z","0.0.0-be1ab75":"2024-02-20T12:13:35.178Z","0.0.0-94543f0":"2024-02-28T13:15:19.922Z","0.0.0-739e2a7":"2024-02-28T15:02:01.254Z","0.0.0-5187973":"2024-02-29T23:11:36.373Z","0.0.0-9b1d951":"2024-03-03T17:50:28.011Z","0.0.0-b46977c":"2024-03-03T23:36:09.059Z","1.10.0":"2024-03-04T12:30:12.968Z","0.0.0-46e53ec":"2024-03-04T12:30:18.691Z","0.0.0-555b4a7":"2024-03-06T22:52:49.955Z","0.0.0-9900517":"2024-03-07T00:32:18.513Z","0.0.0-60eb0ae":"2024-03-13T11:56:37.535Z","0.0.0-f71ec2e":"2024-03-19T13:00:19.193Z","0.0.0-702f601":"2024-03-19T16:09:16.674Z","0.0.0-11308cf":"2024-03-21T17:51:47.914Z","0.0.0-8951ab0":"2024-03-21T17:52:30.586Z","0.0.0-c3fb67b":"2024-03-21T17:58:17.226Z","0.0.0-82aa1a4":"2024-03-21T17:59:11.278Z","0.0.0-8da9da2":"2024-03-22T10:02:35.796Z","0.0.0-53cb762":"2024-03-22T20:33:37.297Z","1.11.0":"2024-03-22T20:45:44.857Z","0.0.0-64988ca":"2024-03-22T20:45:50.073Z","0.0.0-a84add8":"2024-04-03T20:06:22.715Z","0.0.0-ad4ca02":"2024-04-08T11:11:55.201Z","0.0.0-c8a83f0":"2024-04-22T09:47:59.076Z","0.0.0-5170477":"2024-04-22T13:41:58.786Z","0.0.0-446e9af":"2024-04-22T21:13:33.290Z","0.0.0-f7bf30b":"2024-04-23T11:42:45.694Z","1.11.1":"2024-04-23T12:19:55.926Z","0.0.0-31c2627":"2024-04-30T21:03:42.741Z","0.0.0-1493f82":"2024-04-30T21:49:23.489Z","1.11.2":"2024-04-30T22:10:26.493Z"},"maintainers":[{"name":"lbarthonet","email":"lbarthonet@cloudflare.com"},{"name":"cf-media-manager","email":"florian@cloudflare.com"},{"name":"jacobbednarz","email":"jacob.bednarz@gmail.com"},{"name":"celso","email":"mail@celso.io"},{"name":"cf-radar","email":"team@radar.cloudflare.com"},{"name":"dash_service_account","email":"service-account@cloudflare-ui.com"},{"name":"g4brym","email":"g4bryrm98@gmail.com"},{"name":"snigdha34","email":"sgupta@cloudflare.com"},{"name":"wrangler-publisher","email":"workers-devprod@cloudflare.com"},{"name":"marksteyn","email":"mark@cloudflare.com"},{"name":"chiminator","email":"rnguyen@cloudflare.com"},{"name":"sgoodhew_cf","email":"sgoodhew@cloudflare.com"},{"name":"terinjokes","email":"terinjokes@gmail.com"},{"name":"third774","email":"kevin.kipp@gmail.com"},{"name":"jsteinberger","email":"jsteinberger@cloudflare.com"},{"name":"jasnell","email":"jasnell@gmail.com"},{"name":"asapzacy","email":"zacdarellano@gmail.com"},{"name":"pcostanzo","email":"pcostanzo@cloudflare.com"},{"name":"gregbrimble","email":"developer@gregbrimble.com"},{"name":"geelen","email":"glen@glenmaddern.com"},{"name":"rexscaria","email":"arunrex@cloudflare.com"},{"name":"dcruz_cf","email":"dcruz@cloudflare.com"},{"name":"xuranwang","email":"xuran@cloudflare.com"},{"name":"jculvey","email":"jculveyhouse@gmail.com"},{"name":"sejoker","email":"sejoker@gmail.com"},{"name":"vasturiano","email":"vastur@gmail.com"},{"name":"cf-ci-write","email":"npm-readonly@cloudflare.com"},{"name":"segments-write","email":"ingvar@cloudflare.com"},{"name":"thibmeu","email":"mail@thibaultmeunier.com"},{"name":"xortive","email":"granjef3@gmail.com"},{"name":"gurjinder","email":"gurjinder@cloudflare.com"},{"name":"cf-ci2","email":"npm-readonly2@cloudflare.com"},{"name":"lvalenta","email":"lvalenta@cloudflare.com"},{"name":"worenga","email":"benedikt@cloudflare.com"}],"description":"`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various oth","readme":"# `@cloudflare/next-on-pages`\n\n`@cloudflare/next-on-pages` is a CLI tool that you can use to build and develop [Next.js](https://nextjs.org/) applications so that they can run on the [Cloudflare Pages](https://pages.cloudflare.com/) platform (and integrate with Cloudflare's various other [product offerings](https://developers.cloudflare.com/pages/platform/functions/bindings/), such as KV, D1, R2, and Durable Objects).\n\nThis tool is a best-effort library implemented by the Cloudflare team and the community. As such, most, but not all, Next.js features are supported. See the [Supported Versions and Features document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md) for more details.\n\n## Quick Start\n\nThis section describes how to bundle and deploy a (new or existing) Next.js application to [Cloudflare Pages](https://pages.cloudflare.com), using `@cloudflare/next-on-pages`.\n\n### 1. Select your Next.js app\n\nTo start using `@cloudflare/next-on-pages`, you must have a Next.js project that you wish to deploy. If you already have one, change to its directory. Otherwise, you can use the `create-next-app` command to start a new one.\n\n```sh\nnpx create-next-app@latest my-next-app\ncd my-next-app\n```\n\n<details>\n<summary>Note on the Next.js version</summary>\n\nWe have confirmed support for the current version of Next.js at the time of writing, `13.4.2`. Although we'll endeavor to keep support for newer versions, we cannot guarantee that we'll always be up-to-date with the latest version. If you experience any problems with `@cloudflare/next-on-pages`, you may wish to try pinning to `13.4.2` while we work on supporting any recent breaking changes.\n\n</details>\n\n### 2. Configure the application to use the Edge Runtime\n\nFor your application to run on Cloudflare Pages, it needs to opt in to use the Edge Runtime for routes containing server-side code (e.g. API Routes or pages that use `getServerSideProps`). To do this, export a `runtime` [route segment config](https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime) option from each file, specifying that it should use the Edge Runtime.\n\n```typescript\nexport const runtime = 'edge';\n```\n\n&NewLine;\n\nFor more examples of this and for Next.js versions prior to v13.3.1, take a look at our [examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md). Additionally, ensure that your application is not using any unsupported [APIs](https://nextjs.org/docs/app/api-reference/edge#unsupported-apis) or [features](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/supported.md).\n\n### 3. Deploy your application to Cloudflare Pages\n\nTo deploy your application to Cloudflare Pages, you need to install the `@cloudflare/next-on-pages` package.\n\n```sh\nnpm install -D @cloudflare/next-on-pages\n```\n\nThen you can deploy to Cloudflare Pages via the [automatic Git integration](https://developers.cloudflare.com/pages/platform/git-integration/). To do so, start by committing and pushing your application's code to a GitHub/GitLab repository.\n\nNext, in the [Cloudflare Dashboard](https://dash.cloudflare.com/?to=/:account/pages), create a new Pages project:\n\n- Navigate to the project creation pages (_Your account Home_ > _Workers & Pages_ > _Create application_ > _Pages_ > _Connect to Git_).\n- Select the GitHub/GitLab repository you pushed your code to.\n- Choose a project name and your production branch.\n- Select _Next.js_ as the _Framework preset_ and provide the following options:\n  | Option | Value |\n  | ---------------------- | ---------------------------------- |\n  | Build command | `npx @cloudflare/next-on-pages@1` |\n  | Build output directory | `.vercel/output/static` |\n- In the _Environment variables (advanced)_ section, add a new variable named `NODE_VERSION` set to `16` or greater.\n- Click on _Save and Deploy_ to start the deployment (this first deployment won't be fully functional as the next step is also necessary).\n- Go to the Pages project settings page (_Settings_ > _Functions_ > _Compatibility Flags_), **add the `nodejs_compat` flag** for both production and preview, and make sure that the **Compatibility Date** for both production and preview is set to at least `2022-11-30`.\n\n> If you don't want to set up a Git repository, you can build your application (as indicated in [Local Development](#local-development)) and publish it manually via the [`wrangler pages publish` command](https://developers.cloudflare.com/workers/wrangler/commands/#publish-1) instead (you'll still need to set the **`nodejs_compat`** flag for your project in the Cloudflare dashboard).\n\n> **Note**:\n> When deploying via the Git integration, for better compatibility with tools such as `yarn` and `pnpm` we recommend using the Build system version 2 (that is the default so no action is required).\n\n## Local development\n\n### Standard Next.js development\n\nYou can develop your application locally by simply using the [standard Next.js development server](https://nextjs.org/docs/app/api-reference/next-cli#development) you'd normally use.\n\n> **Warning**: Please note however that the standard Next.js dev server does not work with a Cloudflare Pages compatible application/output, so it does not provide any reassurance that your application once built with `@cloudflare/next-on-pages` will actually correctly run, in order to make sure it does the only option (besides simply deploying it and hoping for the best) is to locally preview the application as described below.\n\n### Local preview\n\nTo preview locally your Cloudflare Pages application, simply run:\n\n```sh\nnpx @cloudflare/next-on-pages\n```\n\nThis command will build your Next.js application and produce a `.vercel/output/static` directory which you can then supply to Wrangler:\n\n```sh\nnpx wrangler pages dev .vercel/output/static --compatibility-flag=nodejs_compat\n```\n\nRunning `npx @cloudflare/next-on-pages --help` will display a useful help message which will detail the various additional options the CLI offers.\n\n## Cloudflare Platform Integration\n\nNext.js applications built using `@cloudflare/next-on-pages` get access to resources and information only available or relevant on the Cloudflare platform, such are:\n\n- [Bindings (`env`)](https://developers.cloudflare.com/pages/platform/functions/bindings/), which allows you to take advantage of Cloudflare specific resources.\n- [Cloudflare properties (`cf`)](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties), object containing information about the request provided by Cloudflare’s global network.\n- [Lifecycle methods (`ctx`)](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#lifecycle-methods), methods to augment or control how the request is handled.\n\nSuch can be accessed by calling the `getRequestContext` function in server only code.\n\nFor example:\n\n```ts\nimport { getRequestContext } from '@cloudflare/next-on-pages';\n\n// ...\n\nconst { env, cf, ctx } = getRequestContext();\n```\n\n> **Warning**: The function cannot be called in code from components using the Pages router.\n\n> **Note**: In order to make the function work in development mode (using the standard Next.js dev server) use the [`@cloudflare/next-on-pages/next-dev`](https://github.com/cloudflare/next-on-pages/tree/main/internal-packages/next-dev) submodule.\n\n> **TypeScript Env Type**: the `env` object returned by `getRequestContext` implements the `CloudflareEnv` interface, add your binding types to such interface in order for get a correctly typed `env` object.\n\n> **Note**: `getRequestContext` throws an error if invoked when the request context is not available, if you prefer to receive `undefined` in such cases use `getOptionalRequestContext` instead, the latter is identical to `getRequestContext` except from the fact that it returns `undefined` when the context is not available.\n\n## Examples\n\nTo see some examples on how to use Next.js features with `@cloudflare/next-on-pages`, see the [Examples document](https://github.com/cloudflare/next-on-pages/blob/main/packages/next-on-pages/docs/examples.md).\n\n## Troubleshooting\n\nIf you find yourself hitting some issues with `@cloudflare/next-on-pages` please check out our [official troubleshooting documentation](https://developers.cloudflare.com/pages/framework-guides/nextjs/deploy-a-nextjs-site/#troubleshooting).\n\n## More Information\n\nFor more information on the project please check out the [README](https://github.com/cloudflare/next-on-pages/blob/main/README.md) in the next-on-pages github repository.\n","readmeFilename":"README.md","homepage":"https://github.com/cloudflare/next-on-pages#readme","keywords":["cloudflare","cloudflare pages","edge","nextjs"],"repository":{"type":"git","url":"git+https://github.com/cloudflare/next-on-pages.git"},"bugs":{"url":"https://github.com/cloudflare/next-on-pages/issues"},"license":"MIT"}